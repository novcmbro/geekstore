function J_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Rm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y_={exports:{}},Yd={},X_={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=Symbol.for("react.element"),_4=Symbol.for("react.portal"),w4=Symbol.for("react.fragment"),E4=Symbol.for("react.strict_mode"),I4=Symbol.for("react.profiler"),T4=Symbol.for("react.provider"),S4=Symbol.for("react.context"),C4=Symbol.for("react.forward_ref"),x4=Symbol.for("react.suspense"),P4=Symbol.for("react.memo"),A4=Symbol.for("react.lazy"),y1=Symbol.iterator;function R4(t){return t===null||typeof t!="object"?null:(t=y1&&t[y1]||t["@@iterator"],typeof t=="function"?t:null)}var Z_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ew=Object.assign,tw={};function va(t,e,n){this.props=t,this.context=e,this.refs=tw,this.updater=n||Z_}va.prototype.isReactComponent={};va.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};va.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nw(){}nw.prototype=va.prototype;function bm(t,e,n){this.props=t,this.context=e,this.refs=tw,this.updater=n||Z_}var km=bm.prototype=new nw;km.constructor=bm;ew(km,va.prototype);km.isPureReactComponent=!0;var v1=Array.isArray,rw=Object.prototype.hasOwnProperty,Dm={current:null},iw={key:!0,ref:!0,__self:!0,__source:!0};function sw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)rw.call(e,r)&&!iw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:mu,type:t,key:s,ref:o,props:i,_owner:Dm.current}}function b4(t,e){return{$$typeof:mu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nm(t){return typeof t=="object"&&t!==null&&t.$$typeof===mu}function k4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _1=/\/+/g;function Zh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?k4(""+t.key):e.toString(36)}function Sc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mu:case _4:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Zh(o,0):r,v1(i)?(n="",t!=null&&(n=t.replace(_1,"$&/")+"/"),Sc(i,e,n,"",function(c){return c})):i!=null&&(Nm(i)&&(i=b4(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",v1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Zh(s,a);o+=Sc(s,e,n,l,i)}else if(l=R4(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Zh(s,a++),o+=Sc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yu(t,e,n){if(t==null)return t;var r=[],i=0;return Sc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function D4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ln={current:null},Cc={transition:null},N4={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:Cc,ReactCurrentOwner:Dm};function ow(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:Yu,forEach:function(t,e,n){Yu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yu(t,function(){e++}),e},toArray:function(t){return Yu(t,function(e){return e})||[]},only:function(t){if(!Nm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=va;Ae.Fragment=w4;Ae.Profiler=I4;Ae.PureComponent=bm;Ae.StrictMode=E4;Ae.Suspense=x4;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N4;Ae.act=ow;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ew({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Dm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)rw.call(e,l)&&!iw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:mu,type:t.type,key:i,ref:s,props:r,_owner:o}};Ae.createContext=function(t){return t={$$typeof:S4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:T4,_context:t},t.Consumer=t};Ae.createElement=sw;Ae.createFactory=function(t){var e=sw.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:C4,render:t}};Ae.isValidElement=Nm;Ae.lazy=function(t){return{$$typeof:A4,_payload:{_status:-1,_result:t},_init:D4}};Ae.memo=function(t,e){return{$$typeof:P4,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=Cc.transition;Cc.transition={};try{t()}finally{Cc.transition=e}};Ae.unstable_act=ow;Ae.useCallback=function(t,e){return ln.current.useCallback(t,e)};Ae.useContext=function(t){return ln.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return ln.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return ln.current.useEffect(t,e)};Ae.useId=function(){return ln.current.useId()};Ae.useImperativeHandle=function(t,e,n){return ln.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return ln.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return ln.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return ln.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return ln.current.useReducer(t,e,n)};Ae.useRef=function(t){return ln.current.useRef(t)};Ae.useState=function(t){return ln.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return ln.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return ln.current.useTransition()};Ae.version="18.3.1";X_.exports=Ae;var B=X_.exports;const je=Rm(B),V4=J_({__proto__:null,default:je},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L4=B,O4=Symbol.for("react.element"),M4=Symbol.for("react.fragment"),F4=Object.prototype.hasOwnProperty,U4=L4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j4={key:!0,ref:!0,__self:!0,__source:!0};function aw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)F4.call(e,r)&&!j4.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:O4,type:t,key:s,ref:o,props:i,_owner:U4.current}}Yd.Fragment=M4;Yd.jsx=aw;Yd.jsxs=aw;Y_.exports=Yd;var R=Y_.exports,Wf={},lw={exports:{}},Nn={},uw={exports:{}},cw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,oe){var ce=H.length;H.push(oe);e:for(;0<ce;){var Re=ce-1>>>1,Te=H[Re];if(0<i(Te,oe))H[Re]=oe,H[ce]=Te,ce=Re;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var oe=H[0],ce=H.pop();if(ce!==oe){H[0]=ce;e:for(var Re=0,Te=H.length,Me=Te>>>1;Re<Me;){var kt=2*(Re+1)-1,pt=H[kt],mt=kt+1,_t=H[mt];if(0>i(pt,ce))mt<Te&&0>i(_t,pt)?(H[Re]=_t,H[mt]=ce,Re=mt):(H[Re]=pt,H[kt]=ce,Re=kt);else if(mt<Te&&0>i(_t,ce))H[Re]=_t,H[mt]=ce,Re=mt;else break e}}return oe}function i(H,oe){var ce=H.sortIndex-oe.sortIndex;return ce!==0?ce:H.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,_=!1,E=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(H){for(var oe=n(c);oe!==null;){if(oe.callback===null)r(c);else if(oe.startTime<=H)r(c),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=n(c)}}function k(H){if(P=!1,I(H),!E)if(n(l)!==null)E=!0,$e(V);else{var oe=n(c);oe!==null&&Oe(k,oe.startTime-H)}}function V(H,oe){E=!1,P&&(P=!1,S(v),v=-1),_=!0;var ce=p;try{for(I(oe),h=n(l);h!==null&&(!(h.expirationTime>oe)||H&&!A());){var Re=h.callback;if(typeof Re=="function"){h.callback=null,p=h.priorityLevel;var Te=Re(h.expirationTime<=oe);oe=t.unstable_now(),typeof Te=="function"?h.callback=Te:h===n(l)&&r(l),I(oe)}else r(l);h=n(l)}if(h!==null)var Me=!0;else{var kt=n(c);kt!==null&&Oe(k,kt.startTime-oe),Me=!1}return Me}finally{h=null,p=ce,_=!1}}var F=!1,g=null,v=-1,T=5,x=-1;function A(){return!(t.unstable_now()-x<T)}function b(){if(g!==null){var H=t.unstable_now();x=H;var oe=!0;try{oe=g(!0,H)}finally{oe?C():(F=!1,g=null)}}else F=!1}var C;if(typeof y=="function")C=function(){y(b)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ie=me.port2;me.port1.onmessage=b,C=function(){Ie.postMessage(null)}}else C=function(){N(b,0)};function $e(H){g=H,F||(F=!0,C())}function Oe(H,oe){v=N(function(){H(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){E||_||(E=!0,$e(V))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var oe=3;break;default:oe=p}var ce=p;p=oe;try{return H()}finally{p=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,oe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ce=p;p=H;try{return oe()}finally{p=ce}},t.unstable_scheduleCallback=function(H,oe,ce){var Re=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Re+ce:Re):ce=Re,H){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ce+Te,H={id:d++,callback:oe,priorityLevel:H,startTime:ce,expirationTime:Te,sortIndex:-1},ce>Re?(H.sortIndex=ce,e(c,H),n(l)===null&&H===n(c)&&(P?(S(v),v=-1):P=!0,Oe(k,ce-Re))):(H.sortIndex=Te,e(l,H),E||_||(E=!0,$e(V))),H},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(H){var oe=p;return function(){var ce=p;p=oe;try{return H.apply(this,arguments)}finally{p=ce}}}})(cw);uw.exports=cw;var B4=uw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z4=B,kn=B4;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dw=new Set,Ll={};function Hs(t,e){Wo(t,e),Wo(t+"Capture",e)}function Wo(t,e){for(Ll[t]=e,t=0;t<e.length;t++)dw.add(e[t])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qf=Object.prototype.hasOwnProperty,$4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w1={},E1={};function q4(t){return Qf.call(E1,t)?!0:Qf.call(w1,t)?!1:$4.test(t)?E1[t]=!0:(w1[t]=!0,!1)}function H4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function K4(t,e,n,r){if(e===null||typeof e>"u"||H4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vm=/[\-:]([a-z])/g;function Lm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vm,Lm);$t[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vm,Lm);$t[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vm,Lm);$t[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function Om(t,e,n,r){var i=$t.hasOwnProperty(e)?$t[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(K4(e,n,i,r)&&(n=null),r||i===null?q4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xr=z4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),To=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),Mm=Symbol.for("react.strict_mode"),Jf=Symbol.for("react.profiler"),hw=Symbol.for("react.provider"),fw=Symbol.for("react.context"),Fm=Symbol.for("react.forward_ref"),Yf=Symbol.for("react.suspense"),Xf=Symbol.for("react.suspense_list"),Um=Symbol.for("react.memo"),_i=Symbol.for("react.lazy"),pw=Symbol.for("react.offscreen"),I1=Symbol.iterator;function ja(t){return t===null||typeof t!="object"?null:(t=I1&&t[I1]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,ef;function sl(t){if(ef===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ef=e&&e[1]||""}return`
`+ef+t}var tf=!1;function nf(t,e){if(!t||tf)return"";tf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{tf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sl(t):""}function G4(t){switch(t.tag){case 5:return sl(t.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 2:case 15:return t=nf(t.type,!1),t;case 11:return t=nf(t.type.render,!1),t;case 1:return t=nf(t.type,!0),t;default:return""}}function Zf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case So:return"Fragment";case To:return"Portal";case Jf:return"Profiler";case Mm:return"StrictMode";case Yf:return"Suspense";case Xf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fw:return(t.displayName||"Context")+".Consumer";case hw:return(t._context.displayName||"Context")+".Provider";case Fm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Um:return e=t.displayName||null,e!==null?e:Zf(t.type)||"Memo";case _i:e=t._payload,t=t._init;try{return Zf(t(e))}catch{}}return null}function W4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zf(e);case 8:return e===Mm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q4(t){var e=mw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zu(t){t._valueTracker||(t._valueTracker=Q4(t))}function gw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ep(t,e){var n=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function T1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yw(t,e){e=e.checked,e!=null&&Om(t,"checked",e,!1)}function tp(t,e){yw(t,e);var n=Ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?np(t,e.type,n):e.hasOwnProperty("defaultValue")&&np(t,e.type,Ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function S1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function np(t,e,n){(e!=="number"||Xc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ol=Array.isArray;function Fo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ki(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function C1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(ol(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ki(n)}}function vw(t,e){var n=Ki(e.value),r=Ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function x1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _w(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ip(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_w(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ec,ww=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ec=ec||document.createElement("div"),ec.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ec.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ol(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J4=["Webkit","ms","Moz","O"];Object.keys(gl).forEach(function(t){J4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gl[e]=gl[t]})});function Ew(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gl.hasOwnProperty(t)&&gl[t]?(""+e).trim():e+"px"}function Iw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ew(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Y4=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sp(t,e){if(e){if(Y4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function op(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ap=null;function jm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lp=null,Uo=null,jo=null;function P1(t){if(t=vu(t)){if(typeof lp!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=nh(e),lp(t.stateNode,t.type,e))}}function Tw(t){Uo?jo?jo.push(t):jo=[t]:Uo=t}function Sw(){if(Uo){var t=Uo,e=jo;if(jo=Uo=null,P1(t),e)for(t=0;t<e.length;t++)P1(e[t])}}function Cw(t,e){return t(e)}function xw(){}var rf=!1;function Pw(t,e,n){if(rf)return t(e,n);rf=!0;try{return Cw(t,e,n)}finally{rf=!1,(Uo!==null||jo!==null)&&(xw(),Sw())}}function Ml(t,e){var n=t.stateNode;if(n===null)return null;var r=nh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var up=!1;if(Hr)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){up=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{up=!1}function X4(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var yl=!1,Zc=null,ed=!1,cp=null,Z4={onError:function(t){yl=!0,Zc=t}};function eC(t,e,n,r,i,s,o,a,l){yl=!1,Zc=null,X4.apply(Z4,arguments)}function tC(t,e,n,r,i,s,o,a,l){if(eC.apply(this,arguments),yl){if(yl){var c=Zc;yl=!1,Zc=null}else throw Error(Q(198));ed||(ed=!0,cp=c)}}function Ks(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Aw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function A1(t){if(Ks(t)!==t)throw Error(Q(188))}function nC(t){var e=t.alternate;if(!e){if(e=Ks(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return A1(i),t;if(s===r)return A1(i),e;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Rw(t){return t=nC(t),t!==null?bw(t):null}function bw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bw(t);if(e!==null)return e;t=t.sibling}return null}var kw=kn.unstable_scheduleCallback,R1=kn.unstable_cancelCallback,rC=kn.unstable_shouldYield,iC=kn.unstable_requestPaint,gt=kn.unstable_now,sC=kn.unstable_getCurrentPriorityLevel,Bm=kn.unstable_ImmediatePriority,Dw=kn.unstable_UserBlockingPriority,td=kn.unstable_NormalPriority,oC=kn.unstable_LowPriority,Nw=kn.unstable_IdlePriority,Xd=null,fr=null;function aC(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Xd,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:cC,lC=Math.log,uC=Math.LN2;function cC(t){return t>>>=0,t===0?32:31-(lC(t)/uC|0)|0}var tc=64,nc=4194304;function al(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=al(a):(s&=o,s!==0&&(r=al(s)))}else o=n&~i,o!==0?r=al(o):s!==0&&(r=al(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-er(e),i=1<<n,r|=t[n],e&=~i;return r}function dC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-er(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=dC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function dp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vw(){var t=tc;return tc<<=1,!(tc&4194240)&&(tc=64),t}function sf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function fC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-er(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function zm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ue=0;function Lw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ow,$m,Mw,Fw,Uw,hp=!1,rc=[],Di=null,Ni=null,Vi=null,Fl=new Map,Ul=new Map,Ei=[],pC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b1(t,e){switch(t){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":Fl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(e.pointerId)}}function za(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=vu(e),e!==null&&$m(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mC(t,e,n,r,i){switch(e){case"focusin":return Di=za(Di,t,e,n,r,i),!0;case"dragenter":return Ni=za(Ni,t,e,n,r,i),!0;case"mouseover":return Vi=za(Vi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Fl.set(s,za(Fl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ul.set(s,za(Ul.get(s)||null,t,e,n,r,i)),!0}return!1}function jw(t){var e=_s(t.target);if(e!==null){var n=Ks(e);if(n!==null){if(e=n.tag,e===13){if(e=Aw(n),e!==null){t.blockedOn=e,Uw(t.priority,function(){Mw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ap=r,n.target.dispatchEvent(r),ap=null}else return e=vu(n),e!==null&&$m(e),t.blockedOn=n,!1;e.shift()}return!0}function k1(t,e,n){xc(t)&&n.delete(e)}function gC(){hp=!1,Di!==null&&xc(Di)&&(Di=null),Ni!==null&&xc(Ni)&&(Ni=null),Vi!==null&&xc(Vi)&&(Vi=null),Fl.forEach(k1),Ul.forEach(k1)}function $a(t,e){t.blockedOn===e&&(t.blockedOn=null,hp||(hp=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,gC)))}function jl(t){function e(i){return $a(i,t)}if(0<rc.length){$a(rc[0],t);for(var n=1;n<rc.length;n++){var r=rc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Di!==null&&$a(Di,t),Ni!==null&&$a(Ni,t),Vi!==null&&$a(Vi,t),Fl.forEach(e),Ul.forEach(e),n=0;n<Ei.length;n++)r=Ei[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ei.length&&(n=Ei[0],n.blockedOn===null);)jw(n),n.blockedOn===null&&Ei.shift()}var Bo=Xr.ReactCurrentBatchConfig,rd=!0;function yC(t,e,n,r){var i=Ue,s=Bo.transition;Bo.transition=null;try{Ue=1,qm(t,e,n,r)}finally{Ue=i,Bo.transition=s}}function vC(t,e,n,r){var i=Ue,s=Bo.transition;Bo.transition=null;try{Ue=4,qm(t,e,n,r)}finally{Ue=i,Bo.transition=s}}function qm(t,e,n,r){if(rd){var i=fp(t,e,n,r);if(i===null)mf(t,e,r,id,n),b1(t,r);else if(mC(i,t,e,n,r))r.stopPropagation();else if(b1(t,r),e&4&&-1<pC.indexOf(t)){for(;i!==null;){var s=vu(i);if(s!==null&&Ow(s),s=fp(t,e,n,r),s===null&&mf(t,e,r,id,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else mf(t,e,r,null,n)}}var id=null;function fp(t,e,n,r){if(id=null,t=jm(r),t=_s(t),t!==null)if(e=Ks(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Aw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return id=t,null}function Bw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sC()){case Bm:return 1;case Dw:return 4;case td:case oC:return 16;case Nw:return 536870912;default:return 16}default:return 16}}var Ai=null,Hm=null,Pc=null;function zw(){if(Pc)return Pc;var t,e=Hm,n=e.length,r,i="value"in Ai?Ai.value:Ai.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Pc=i.slice(t,1<r?1-r:void 0)}function Ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ic(){return!0}function D1(){return!1}function Vn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ic:D1,this.isPropagationStopped=D1,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),e}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Km=Vn(_a),yu=at({},_a,{view:0,detail:0}),_C=Vn(yu),of,af,qa,Zd=at({},yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qa&&(qa&&t.type==="mousemove"?(of=t.screenX-qa.screenX,af=t.screenY-qa.screenY):af=of=0,qa=t),of)},movementY:function(t){return"movementY"in t?t.movementY:af}}),N1=Vn(Zd),wC=at({},Zd,{dataTransfer:0}),EC=Vn(wC),IC=at({},yu,{relatedTarget:0}),lf=Vn(IC),TC=at({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),SC=Vn(TC),CC=at({},_a,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xC=Vn(CC),PC=at({},_a,{data:0}),V1=Vn(PC),AC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bC[t])?!!e[t]:!1}function Gm(){return kC}var DC=at({},yu,{key:function(t){if(t.key){var e=AC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(t){return t.type==="keypress"?Ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NC=Vn(DC),VC=at({},Zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L1=Vn(VC),LC=at({},yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),OC=Vn(LC),MC=at({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),FC=Vn(MC),UC=at({},Zd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jC=Vn(UC),BC=[9,13,27,32],Wm=Hr&&"CompositionEvent"in window,vl=null;Hr&&"documentMode"in document&&(vl=document.documentMode);var zC=Hr&&"TextEvent"in window&&!vl,$w=Hr&&(!Wm||vl&&8<vl&&11>=vl),O1=" ",M1=!1;function qw(t,e){switch(t){case"keyup":return BC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Co=!1;function $C(t,e){switch(t){case"compositionend":return Hw(e);case"keypress":return e.which!==32?null:(M1=!0,O1);case"textInput":return t=e.data,t===O1&&M1?null:t;default:return null}}function qC(t,e){if(Co)return t==="compositionend"||!Wm&&qw(t,e)?(t=zw(),Pc=Hm=Ai=null,Co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $w&&e.locale!=="ko"?null:e.data;default:return null}}var HC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HC[t.type]:e==="textarea"}function Kw(t,e,n,r){Tw(r),e=sd(e,"onChange"),0<e.length&&(n=new Km("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _l=null,Bl=null;function KC(t){r2(t,0)}function eh(t){var e=Ao(t);if(gw(e))return t}function GC(t,e){if(t==="change")return e}var Gw=!1;if(Hr){var uf;if(Hr){var cf="oninput"in document;if(!cf){var U1=document.createElement("div");U1.setAttribute("oninput","return;"),cf=typeof U1.oninput=="function"}uf=cf}else uf=!1;Gw=uf&&(!document.documentMode||9<document.documentMode)}function j1(){_l&&(_l.detachEvent("onpropertychange",Ww),Bl=_l=null)}function Ww(t){if(t.propertyName==="value"&&eh(Bl)){var e=[];Kw(e,Bl,t,jm(t)),Pw(KC,e)}}function WC(t,e,n){t==="focusin"?(j1(),_l=e,Bl=n,_l.attachEvent("onpropertychange",Ww)):t==="focusout"&&j1()}function QC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eh(Bl)}function JC(t,e){if(t==="click")return eh(e)}function YC(t,e){if(t==="input"||t==="change")return eh(e)}function XC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:XC;function zl(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qf.call(e,i)||!nr(t[i],e[i]))return!1}return!0}function B1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z1(t,e){var n=B1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B1(n)}}function Qw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jw(){for(var t=window,e=Xc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xc(t.document)}return e}function Qm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZC(t){var e=Jw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qw(n.ownerDocument.documentElement,n)){if(r!==null&&Qm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=z1(n,s);var o=z1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ex=Hr&&"documentMode"in document&&11>=document.documentMode,xo=null,pp=null,wl=null,mp=!1;function $1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mp||xo==null||xo!==Xc(r)||(r=xo,"selectionStart"in r&&Qm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wl&&zl(wl,r)||(wl=r,r=sd(pp,"onSelect"),0<r.length&&(e=new Km("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xo)))}function sc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Po={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},df={},Yw={};Hr&&(Yw=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function th(t){if(df[t])return df[t];if(!Po[t])return t;var e=Po[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yw)return df[t]=e[n];return t}var Xw=th("animationend"),Zw=th("animationiteration"),e2=th("animationstart"),t2=th("transitionend"),n2=new Map,q1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(t,e){n2.set(t,e),Hs(e,[t])}for(var hf=0;hf<q1.length;hf++){var ff=q1[hf],tx=ff.toLowerCase(),nx=ff[0].toUpperCase()+ff.slice(1);Yi(tx,"on"+nx)}Yi(Xw,"onAnimationEnd");Yi(Zw,"onAnimationIteration");Yi(e2,"onAnimationStart");Yi("dblclick","onDoubleClick");Yi("focusin","onFocus");Yi("focusout","onBlur");Yi(t2,"onTransitionEnd");Wo("onMouseEnter",["mouseout","mouseover"]);Wo("onMouseLeave",["mouseout","mouseover"]);Wo("onPointerEnter",["pointerout","pointerover"]);Wo("onPointerLeave",["pointerout","pointerover"]);Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ll));function H1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tC(r,e,void 0,t),t.currentTarget=null}function r2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;H1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;H1(i,a,c),s=l}}}if(ed)throw t=cp,ed=!1,cp=null,t}function Je(t,e){var n=e[wp];n===void 0&&(n=e[wp]=new Set);var r=t+"__bubble";n.has(r)||(i2(e,t,2,!1),n.add(r))}function pf(t,e,n){var r=0;e&&(r|=4),i2(n,t,r,e)}var oc="_reactListening"+Math.random().toString(36).slice(2);function $l(t){if(!t[oc]){t[oc]=!0,dw.forEach(function(n){n!=="selectionchange"&&(rx.has(n)||pf(n,!1,t),pf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oc]||(e[oc]=!0,pf("selectionchange",!1,e))}}function i2(t,e,n,r){switch(Bw(e)){case 1:var i=yC;break;case 4:i=vC;break;default:i=qm}n=i.bind(null,e,n,t),i=void 0,!up||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function mf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_s(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Pw(function(){var c=s,d=jm(n),h=[];e:{var p=n2.get(t);if(p!==void 0){var _=Km,E=t;switch(t){case"keypress":if(Ac(n)===0)break e;case"keydown":case"keyup":_=NC;break;case"focusin":E="focus",_=lf;break;case"focusout":E="blur",_=lf;break;case"beforeblur":case"afterblur":_=lf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=N1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=EC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=OC;break;case Xw:case Zw:case e2:_=SC;break;case t2:_=FC;break;case"scroll":_=_C;break;case"wheel":_=jC;break;case"copy":case"cut":case"paste":_=xC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=L1}var P=(e&4)!==0,N=!P&&t==="scroll",S=P?p!==null?p+"Capture":null:p;P=[];for(var y=c,I;y!==null;){I=y;var k=I.stateNode;if(I.tag===5&&k!==null&&(I=k,S!==null&&(k=Ml(y,S),k!=null&&P.push(ql(y,k,I)))),N)break;y=y.return}0<P.length&&(p=new _(p,E,null,n,d),h.push({event:p,listeners:P}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==ap&&(E=n.relatedTarget||n.fromElement)&&(_s(E)||E[Kr]))break e;if((_||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,_?(E=n.relatedTarget||n.toElement,_=c,E=E?_s(E):null,E!==null&&(N=Ks(E),E!==N||E.tag!==5&&E.tag!==6)&&(E=null)):(_=null,E=c),_!==E)){if(P=N1,k="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(P=L1,k="onPointerLeave",S="onPointerEnter",y="pointer"),N=_==null?p:Ao(_),I=E==null?p:Ao(E),p=new P(k,y+"leave",_,n,d),p.target=N,p.relatedTarget=I,k=null,_s(d)===c&&(P=new P(S,y+"enter",E,n,d),P.target=I,P.relatedTarget=N,k=P),N=k,_&&E)t:{for(P=_,S=E,y=0,I=P;I;I=lo(I))y++;for(I=0,k=S;k;k=lo(k))I++;for(;0<y-I;)P=lo(P),y--;for(;0<I-y;)S=lo(S),I--;for(;y--;){if(P===S||S!==null&&P===S.alternate)break t;P=lo(P),S=lo(S)}P=null}else P=null;_!==null&&K1(h,p,_,P,!1),E!==null&&N!==null&&K1(h,N,E,P,!0)}}e:{if(p=c?Ao(c):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var V=GC;else if(F1(p))if(Gw)V=YC;else{V=QC;var F=WC}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=JC);if(V&&(V=V(t,c))){Kw(h,V,n,d);break e}F&&F(t,p,c),t==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&np(p,"number",p.value)}switch(F=c?Ao(c):window,t){case"focusin":(F1(F)||F.contentEditable==="true")&&(xo=F,pp=c,wl=null);break;case"focusout":wl=pp=xo=null;break;case"mousedown":mp=!0;break;case"contextmenu":case"mouseup":case"dragend":mp=!1,$1(h,n,d);break;case"selectionchange":if(ex)break;case"keydown":case"keyup":$1(h,n,d)}var g;if(Wm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Co?qw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&($w&&n.locale!=="ko"&&(Co||v!=="onCompositionStart"?v==="onCompositionEnd"&&Co&&(g=zw()):(Ai=d,Hm="value"in Ai?Ai.value:Ai.textContent,Co=!0)),F=sd(c,v),0<F.length&&(v=new V1(v,t,null,n,d),h.push({event:v,listeners:F}),g?v.data=g:(g=Hw(n),g!==null&&(v.data=g)))),(g=zC?$C(t,n):qC(t,n))&&(c=sd(c,"onBeforeInput"),0<c.length&&(d=new V1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=g))}r2(h,e)})}function ql(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ml(t,n),s!=null&&r.unshift(ql(t,s,i)),s=Ml(t,e),s!=null&&r.push(ql(t,s,i))),t=t.return}return r}function lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function K1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ml(n,s),l!=null&&o.unshift(ql(n,l,a))):i||(l=Ml(n,s),l!=null&&o.push(ql(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ix=/\r\n?/g,sx=/\u0000|\uFFFD/g;function G1(t){return(typeof t=="string"?t:""+t).replace(ix,`
`).replace(sx,"")}function ac(t,e,n){if(e=G1(e),G1(t)!==e&&n)throw Error(Q(425))}function od(){}var gp=null,yp=null;function vp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _p=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0,W1=typeof Promise=="function"?Promise:void 0,ax=typeof queueMicrotask=="function"?queueMicrotask:typeof W1<"u"?function(t){return W1.resolve(null).then(t).catch(lx)}:_p;function lx(t){setTimeout(function(){throw t})}function gf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),jl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);jl(e)}function Li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Q1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wa=Math.random().toString(36).slice(2),ar="__reactFiber$"+wa,Hl="__reactProps$"+wa,Kr="__reactContainer$"+wa,wp="__reactEvents$"+wa,ux="__reactListeners$"+wa,cx="__reactHandles$"+wa;function _s(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Q1(t);t!==null;){if(n=t[ar])return n;t=Q1(t)}return e}t=n,n=t.parentNode}return null}function vu(t){return t=t[ar]||t[Kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ao(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function nh(t){return t[Hl]||null}var Ep=[],Ro=-1;function Xi(t){return{current:t}}function Ye(t){0>Ro||(t.current=Ep[Ro],Ep[Ro]=null,Ro--)}function Ge(t,e){Ro++,Ep[Ro]=t.current,t.current=e}var Gi={},en=Xi(Gi),vn=Xi(!1),Rs=Gi;function Qo(t,e){var n=t.type.contextTypes;if(!n)return Gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _n(t){return t=t.childContextTypes,t!=null}function ad(){Ye(vn),Ye(en)}function J1(t,e,n){if(en.current!==Gi)throw Error(Q(168));Ge(en,e),Ge(vn,n)}function s2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,W4(t)||"Unknown",i));return at({},n,r)}function ld(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gi,Rs=en.current,Ge(en,t),Ge(vn,vn.current),!0}function Y1(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=s2(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,Ye(vn),Ye(en),Ge(en,t)):Ye(vn),Ge(vn,n)}var Nr=null,rh=!1,yf=!1;function o2(t){Nr===null?Nr=[t]:Nr.push(t)}function dx(t){rh=!0,o2(t)}function Zi(){if(!yf&&Nr!==null){yf=!0;var t=0,e=Ue;try{var n=Nr;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nr=null,rh=!1}catch(i){throw Nr!==null&&(Nr=Nr.slice(t+1)),kw(Bm,Zi),i}finally{Ue=e,yf=!1}}return null}var bo=[],ko=0,ud=null,cd=0,Fn=[],Un=0,bs=null,Lr=1,Or="";function ds(t,e){bo[ko++]=cd,bo[ko++]=ud,ud=t,cd=e}function a2(t,e,n){Fn[Un++]=Lr,Fn[Un++]=Or,Fn[Un++]=bs,bs=t;var r=Lr;t=Or;var i=32-er(r)-1;r&=~(1<<i),n+=1;var s=32-er(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Lr=1<<32-er(e)+i|n<<i|r,Or=s+t}else Lr=1<<s|n<<i|r,Or=t}function Jm(t){t.return!==null&&(ds(t,1),a2(t,1,0))}function Ym(t){for(;t===ud;)ud=bo[--ko],bo[ko]=null,cd=bo[--ko],bo[ko]=null;for(;t===bs;)bs=Fn[--Un],Fn[Un]=null,Or=Fn[--Un],Fn[Un]=null,Lr=Fn[--Un],Fn[Un]=null}var Rn=null,Pn=null,et=!1,Xn=null;function l2(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function X1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rn=t,Pn=Li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rn=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bs!==null?{id:Lr,overflow:Or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rn=t,Pn=null,!0):!1;default:return!1}}function Ip(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tp(t){if(et){var e=Pn;if(e){var n=e;if(!X1(t,e)){if(Ip(t))throw Error(Q(418));e=Li(n.nextSibling);var r=Rn;e&&X1(t,e)?l2(r,n):(t.flags=t.flags&-4097|2,et=!1,Rn=t)}}else{if(Ip(t))throw Error(Q(418));t.flags=t.flags&-4097|2,et=!1,Rn=t}}}function Z1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function lc(t){if(t!==Rn)return!1;if(!et)return Z1(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vp(t.type,t.memoizedProps)),e&&(e=Pn)){if(Ip(t))throw u2(),Error(Q(418));for(;e;)l2(t,e),e=Li(e.nextSibling)}if(Z1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=Li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=Rn?Li(t.stateNode.nextSibling):null;return!0}function u2(){for(var t=Pn;t;)t=Li(t.nextSibling)}function Jo(){Pn=Rn=null,et=!1}function Xm(t){Xn===null?Xn=[t]:Xn.push(t)}var hx=Xr.ReactCurrentBatchConfig;function Ha(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function uc(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function e0(t){var e=t._init;return e(t._payload)}function c2(t){function e(S,y){if(t){var I=S.deletions;I===null?(S.deletions=[y],S.flags|=16):I.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function r(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function i(S,y){return S=Ui(S,y),S.index=0,S.sibling=null,S}function s(S,y,I){return S.index=I,t?(I=S.alternate,I!==null?(I=I.index,I<y?(S.flags|=2,y):I):(S.flags|=2,y)):(S.flags|=1048576,y)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,y,I,k){return y===null||y.tag!==6?(y=Sf(I,S.mode,k),y.return=S,y):(y=i(y,I),y.return=S,y)}function l(S,y,I,k){var V=I.type;return V===So?d(S,y,I.props.children,k,I.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===_i&&e0(V)===y.type)?(k=i(y,I.props),k.ref=Ha(S,y,I),k.return=S,k):(k=Lc(I.type,I.key,I.props,null,S.mode,k),k.ref=Ha(S,y,I),k.return=S,k)}function c(S,y,I,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==I.containerInfo||y.stateNode.implementation!==I.implementation?(y=Cf(I,S.mode,k),y.return=S,y):(y=i(y,I.children||[]),y.return=S,y)}function d(S,y,I,k,V){return y===null||y.tag!==7?(y=xs(I,S.mode,k,V),y.return=S,y):(y=i(y,I),y.return=S,y)}function h(S,y,I){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Sf(""+y,S.mode,I),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xu:return I=Lc(y.type,y.key,y.props,null,S.mode,I),I.ref=Ha(S,null,y),I.return=S,I;case To:return y=Cf(y,S.mode,I),y.return=S,y;case _i:var k=y._init;return h(S,k(y._payload),I)}if(ol(y)||ja(y))return y=xs(y,S.mode,I,null),y.return=S,y;uc(S,y)}return null}function p(S,y,I,k){var V=y!==null?y.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return V!==null?null:a(S,y,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Xu:return I.key===V?l(S,y,I,k):null;case To:return I.key===V?c(S,y,I,k):null;case _i:return V=I._init,p(S,y,V(I._payload),k)}if(ol(I)||ja(I))return V!==null?null:d(S,y,I,k,null);uc(S,I)}return null}function _(S,y,I,k,V){if(typeof k=="string"&&k!==""||typeof k=="number")return S=S.get(I)||null,a(y,S,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Xu:return S=S.get(k.key===null?I:k.key)||null,l(y,S,k,V);case To:return S=S.get(k.key===null?I:k.key)||null,c(y,S,k,V);case _i:var F=k._init;return _(S,y,I,F(k._payload),V)}if(ol(k)||ja(k))return S=S.get(I)||null,d(y,S,k,V,null);uc(y,k)}return null}function E(S,y,I,k){for(var V=null,F=null,g=y,v=y=0,T=null;g!==null&&v<I.length;v++){g.index>v?(T=g,g=null):T=g.sibling;var x=p(S,g,I[v],k);if(x===null){g===null&&(g=T);break}t&&g&&x.alternate===null&&e(S,g),y=s(x,y,v),F===null?V=x:F.sibling=x,F=x,g=T}if(v===I.length)return n(S,g),et&&ds(S,v),V;if(g===null){for(;v<I.length;v++)g=h(S,I[v],k),g!==null&&(y=s(g,y,v),F===null?V=g:F.sibling=g,F=g);return et&&ds(S,v),V}for(g=r(S,g);v<I.length;v++)T=_(g,S,v,I[v],k),T!==null&&(t&&T.alternate!==null&&g.delete(T.key===null?v:T.key),y=s(T,y,v),F===null?V=T:F.sibling=T,F=T);return t&&g.forEach(function(A){return e(S,A)}),et&&ds(S,v),V}function P(S,y,I,k){var V=ja(I);if(typeof V!="function")throw Error(Q(150));if(I=V.call(I),I==null)throw Error(Q(151));for(var F=V=null,g=y,v=y=0,T=null,x=I.next();g!==null&&!x.done;v++,x=I.next()){g.index>v?(T=g,g=null):T=g.sibling;var A=p(S,g,x.value,k);if(A===null){g===null&&(g=T);break}t&&g&&A.alternate===null&&e(S,g),y=s(A,y,v),F===null?V=A:F.sibling=A,F=A,g=T}if(x.done)return n(S,g),et&&ds(S,v),V;if(g===null){for(;!x.done;v++,x=I.next())x=h(S,x.value,k),x!==null&&(y=s(x,y,v),F===null?V=x:F.sibling=x,F=x);return et&&ds(S,v),V}for(g=r(S,g);!x.done;v++,x=I.next())x=_(g,S,v,x.value,k),x!==null&&(t&&x.alternate!==null&&g.delete(x.key===null?v:x.key),y=s(x,y,v),F===null?V=x:F.sibling=x,F=x);return t&&g.forEach(function(b){return e(S,b)}),et&&ds(S,v),V}function N(S,y,I,k){if(typeof I=="object"&&I!==null&&I.type===So&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Xu:e:{for(var V=I.key,F=y;F!==null;){if(F.key===V){if(V=I.type,V===So){if(F.tag===7){n(S,F.sibling),y=i(F,I.props.children),y.return=S,S=y;break e}}else if(F.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===_i&&e0(V)===F.type){n(S,F.sibling),y=i(F,I.props),y.ref=Ha(S,F,I),y.return=S,S=y;break e}n(S,F);break}else e(S,F);F=F.sibling}I.type===So?(y=xs(I.props.children,S.mode,k,I.key),y.return=S,S=y):(k=Lc(I.type,I.key,I.props,null,S.mode,k),k.ref=Ha(S,y,I),k.return=S,S=k)}return o(S);case To:e:{for(F=I.key;y!==null;){if(y.key===F)if(y.tag===4&&y.stateNode.containerInfo===I.containerInfo&&y.stateNode.implementation===I.implementation){n(S,y.sibling),y=i(y,I.children||[]),y.return=S,S=y;break e}else{n(S,y);break}else e(S,y);y=y.sibling}y=Cf(I,S.mode,k),y.return=S,S=y}return o(S);case _i:return F=I._init,N(S,y,F(I._payload),k)}if(ol(I))return E(S,y,I,k);if(ja(I))return P(S,y,I,k);uc(S,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,y!==null&&y.tag===6?(n(S,y.sibling),y=i(y,I),y.return=S,S=y):(n(S,y),y=Sf(I,S.mode,k),y.return=S,S=y),o(S)):n(S,y)}return N}var Yo=c2(!0),d2=c2(!1),dd=Xi(null),hd=null,Do=null,Zm=null;function eg(){Zm=Do=hd=null}function tg(t){var e=dd.current;Ye(dd),t._currentValue=e}function Sp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zo(t,e){hd=t,Zm=Do=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(Zm!==t)if(t={context:t,memoizedValue:e,next:null},Do===null){if(hd===null)throw Error(Q(308));Do=t,hd.dependencies={lanes:0,firstContext:t}}else Do=Do.next=t;return e}var ws=null;function ng(t){ws===null?ws=[t]:ws.push(t)}function h2(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ng(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gr(t,r)}function Gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wi=!1;function rg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gr(t,n)}return i=r.interleaved,i===null?(e.next=e,ng(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gr(t,n)}function Rc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zm(t,n)}}function t0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fd(t,e,n,r){var i=t.updateQueue;wi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,_=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,P=a;switch(p=e,_=n,P.tag){case 1:if(E=P.payload,typeof E=="function"){h=E.call(_,h,p);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=P.payload,p=typeof E=="function"?E.call(_,h,p):E,p==null)break e;h=at({},h,p);break e;case 2:wi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else _={eventTime:_,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=_,l=h):d=d.next=_,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ds|=o,t.lanes=o,t.memoizedState=h}}function n0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var _u={},pr=Xi(_u),Kl=Xi(_u),Gl=Xi(_u);function Es(t){if(t===_u)throw Error(Q(174));return t}function ig(t,e){switch(Ge(Gl,e),Ge(Kl,t),Ge(pr,_u),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ip(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ip(e,t)}Ye(pr),Ge(pr,e)}function Xo(){Ye(pr),Ye(Kl),Ye(Gl)}function p2(t){Es(Gl.current);var e=Es(pr.current),n=ip(e,t.type);e!==n&&(Ge(Kl,t),Ge(pr,n))}function sg(t){Kl.current===t&&(Ye(pr),Ye(Kl))}var rt=Xi(0);function pd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vf=[];function og(){for(var t=0;t<vf.length;t++)vf[t]._workInProgressVersionPrimary=null;vf.length=0}var bc=Xr.ReactCurrentDispatcher,_f=Xr.ReactCurrentBatchConfig,ks=0,st=null,At=null,Nt=null,md=!1,El=!1,Wl=0,fx=0;function Gt(){throw Error(Q(321))}function ag(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function lg(t,e,n,r,i,s){if(ks=s,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bc.current=t===null||t.memoizedState===null?yx:vx,t=n(r,i),El){s=0;do{if(El=!1,Wl=0,25<=s)throw Error(Q(301));s+=1,Nt=At=null,e.updateQueue=null,bc.current=_x,t=n(r,i)}while(El)}if(bc.current=gd,e=At!==null&&At.next!==null,ks=0,Nt=At=st=null,md=!1,e)throw Error(Q(300));return t}function ug(){var t=Wl!==0;return Wl=0,t}function or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?st.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function qn(){if(At===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Nt===null?st.memoizedState:Nt.next;if(e!==null)Nt=e,At=t;else{if(t===null)throw Error(Q(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Nt===null?st.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Ql(t,e){return typeof e=="function"?e(t):e}function wf(t){var e=qn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=At,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((ks&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,st.lanes|=d,Ds|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,nr(r,e.memoizedState)||(mn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,st.lanes|=s,Ds|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ef(t){var e=qn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);nr(s,e.memoizedState)||(mn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function m2(){}function g2(t,e){var n=st,r=qn(),i=e(),s=!nr(r.memoizedState,i);if(s&&(r.memoizedState=i,mn=!0),r=r.queue,cg(_2.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Nt!==null&&Nt.memoizedState.tag&1){if(n.flags|=2048,Jl(9,v2.bind(null,n,r,i,e),void 0,null),Vt===null)throw Error(Q(349));ks&30||y2(n,e,i)}return i}function y2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v2(t,e,n,r){e.value=n,e.getSnapshot=r,w2(e)&&E2(t)}function _2(t,e,n){return n(function(){w2(e)&&E2(t)})}function w2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function E2(t){var e=Gr(t,1);e!==null&&tr(e,t,1,-1)}function r0(t){var e=or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ql,lastRenderedState:t},e.queue=t,t=t.dispatch=gx.bind(null,st,t),[e.memoizedState,t]}function Jl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function I2(){return qn().memoizedState}function kc(t,e,n,r){var i=or();st.flags|=t,i.memoizedState=Jl(1|e,n,void 0,r===void 0?null:r)}function ih(t,e,n,r){var i=qn();r=r===void 0?null:r;var s=void 0;if(At!==null){var o=At.memoizedState;if(s=o.destroy,r!==null&&ag(r,o.deps)){i.memoizedState=Jl(e,n,s,r);return}}st.flags|=t,i.memoizedState=Jl(1|e,n,s,r)}function i0(t,e){return kc(8390656,8,t,e)}function cg(t,e){return ih(2048,8,t,e)}function T2(t,e){return ih(4,2,t,e)}function S2(t,e){return ih(4,4,t,e)}function C2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function x2(t,e,n){return n=n!=null?n.concat([t]):null,ih(4,4,C2.bind(null,e,t),n)}function dg(){}function P2(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ag(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function A2(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ag(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function R2(t,e,n){return ks&21?(nr(n,e)||(n=Vw(),st.lanes|=n,Ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function px(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=_f.transition;_f.transition={};try{t(!1),e()}finally{Ue=n,_f.transition=r}}function b2(){return qn().memoizedState}function mx(t,e,n){var r=Fi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},k2(t))D2(e,n);else if(n=h2(t,e,n,r),n!==null){var i=sn();tr(n,t,r,i),N2(n,e,r)}}function gx(t,e,n){var r=Fi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(k2(t))D2(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,nr(a,o)){var l=e.interleaved;l===null?(i.next=i,ng(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=h2(t,e,i,r),n!==null&&(i=sn(),tr(n,t,r,i),N2(n,e,r))}}function k2(t){var e=t.alternate;return t===st||e!==null&&e===st}function D2(t,e){El=md=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function N2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zm(t,n)}}var gd={readContext:$n,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},yx={readContext:$n,useCallback:function(t,e){return or().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:i0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kc(4194308,4,C2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kc(4194308,4,t,e)},useInsertionEffect:function(t,e){return kc(4,2,t,e)},useMemo:function(t,e){var n=or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=or();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mx.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=or();return t={current:t},e.memoizedState=t},useState:r0,useDebugValue:dg,useDeferredValue:function(t){return or().memoizedState=t},useTransition:function(){var t=r0(!1),e=t[0];return t=px.bind(null,t[1]),or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,i=or();if(et){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Vt===null)throw Error(Q(349));ks&30||y2(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,i0(_2.bind(null,r,s,t),[t]),r.flags|=2048,Jl(9,v2.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=or(),e=Vt.identifierPrefix;if(et){var n=Or,r=Lr;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vx={readContext:$n,useCallback:P2,useContext:$n,useEffect:cg,useImperativeHandle:x2,useInsertionEffect:T2,useLayoutEffect:S2,useMemo:A2,useReducer:wf,useRef:I2,useState:function(){return wf(Ql)},useDebugValue:dg,useDeferredValue:function(t){var e=qn();return R2(e,At.memoizedState,t)},useTransition:function(){var t=wf(Ql)[0],e=qn().memoizedState;return[t,e]},useMutableSource:m2,useSyncExternalStore:g2,useId:b2,unstable_isNewReconciler:!1},_x={readContext:$n,useCallback:P2,useContext:$n,useEffect:cg,useImperativeHandle:x2,useInsertionEffect:T2,useLayoutEffect:S2,useMemo:A2,useReducer:Ef,useRef:I2,useState:function(){return Ef(Ql)},useDebugValue:dg,useDeferredValue:function(t){var e=qn();return At===null?e.memoizedState=t:R2(e,At.memoizedState,t)},useTransition:function(){var t=Ef(Ql)[0],e=qn().memoizedState;return[t,e]},useMutableSource:m2,useSyncExternalStore:g2,useId:b2,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:at({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sh={isMounted:function(t){return(t=t._reactInternals)?Ks(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=sn(),i=Fi(t),s=zr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,i),e!==null&&(tr(e,t,i,r),Rc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=sn(),i=Fi(t),s=zr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,i),e!==null&&(tr(e,t,i,r),Rc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),r=Fi(t),i=zr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Oi(t,i,r),e!==null&&(tr(e,t,r,n),Rc(e,t,r))}};function s0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!zl(n,r)||!zl(i,s):!0}function V2(t,e,n){var r=!1,i=Gi,s=e.contextType;return typeof s=="object"&&s!==null?s=$n(s):(i=_n(e)?Rs:en.current,r=e.contextTypes,s=(r=r!=null)?Qo(t,i):Gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function o0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sh.enqueueReplaceState(e,e.state,null)}function xp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},rg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$n(s):(s=_n(e)?Rs:en.current,i.context=Qo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sh.enqueueReplaceState(i,i.state,null),fd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e){try{var n="",r=e;do n+=G4(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function If(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wx=typeof WeakMap=="function"?WeakMap:Map;function L2(t,e,n){n=zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vd||(vd=!0,Mp=r),Pp(t,e)},n}function O2(t,e,n){n=zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Pp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Pp(t,e),typeof r!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function a0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Vx.bind(null,t,e,n),e.then(t,t))}function l0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function u0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zr(-1,1),e.tag=2,Oi(n,e,1))),n.lanes|=1),t)}var Ex=Xr.ReactCurrentOwner,mn=!1;function nn(t,e,n,r){e.child=t===null?d2(e,null,n,r):Yo(e,t.child,n,r)}function c0(t,e,n,r,i){n=n.render;var s=e.ref;return zo(e,i),r=lg(t,e,n,r,s,i),n=ug(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):(et&&n&&Jm(e),e.flags|=1,nn(t,e,r,i),e.child)}function d0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!_g(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,M2(t,e,s,r,i)):(t=Lc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:zl,n(o,r)&&t.ref===e.ref)return Wr(t,e,i)}return e.flags|=1,t=Ui(s,r),t.ref=e.ref,t.return=e,e.child=t}function M2(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(zl(s,r)&&t.ref===e.ref)if(mn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,Wr(t,e,i)}return Ap(t,e,n,r,i)}function F2(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Vo,xn),xn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge(Vo,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ge(Vo,xn),xn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ge(Vo,xn),xn|=r;return nn(t,e,i,n),e.child}function U2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ap(t,e,n,r,i){var s=_n(n)?Rs:en.current;return s=Qo(e,s),zo(e,i),n=lg(t,e,n,r,s,i),r=ug(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):(et&&r&&Jm(e),e.flags|=1,nn(t,e,n,i),e.child)}function h0(t,e,n,r,i){if(_n(n)){var s=!0;ld(e)}else s=!1;if(zo(e,i),e.stateNode===null)Dc(t,e),V2(e,n,r),xp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$n(c):(c=_n(n)?Rs:en.current,c=Qo(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&o0(e,o,r,c),wi=!1;var p=e.memoizedState;o.state=p,fd(e,r,o,i),l=e.memoizedState,a!==r||p!==l||vn.current||wi?(typeof d=="function"&&(Cp(e,n,d,r),l=e.memoizedState),(a=wi||s0(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,f2(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Qn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$n(l):(l=_n(n)?Rs:en.current,l=Qo(e,l));var _=n.getDerivedStateFromProps;(d=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&o0(e,o,r,l),wi=!1,p=e.memoizedState,o.state=p,fd(e,r,o,i);var E=e.memoizedState;a!==h||p!==E||vn.current||wi?(typeof _=="function"&&(Cp(e,n,_,r),E=e.memoizedState),(c=wi||s0(e,n,c,r,p,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Rp(t,e,n,r,s,i)}function Rp(t,e,n,r,i,s){U2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Y1(e,n,!1),Wr(t,e,s);r=e.stateNode,Ex.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yo(e,t.child,null,s),e.child=Yo(e,null,a,s)):nn(t,e,a,s),e.memoizedState=r.state,i&&Y1(e,n,!0),e.child}function j2(t){var e=t.stateNode;e.pendingContext?J1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&J1(t,e.context,!1),ig(t,e.containerInfo)}function f0(t,e,n,r,i){return Jo(),Xm(i),e.flags|=256,nn(t,e,n,r),e.child}var bp={dehydrated:null,treeContext:null,retryLane:0};function kp(t){return{baseLanes:t,cachePool:null,transitions:null}}function B2(t,e,n){var r=e.pendingProps,i=rt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ge(rt,i&1),t===null)return Tp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=lh(o,r,0,null),t=xs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=kp(n),e.memoizedState=bp,t):hg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ix(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ui(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ui(a,s):(s=xs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?kp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bp,r}return s=t.child,t=s.sibling,r=Ui(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hg(t,e){return e=lh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cc(t,e,n,r){return r!==null&&Xm(r),Yo(e,t.child,null,n),t=hg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ix(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=If(Error(Q(422))),cc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=lh({mode:"visible",children:r.children},i,0,null),s=xs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Yo(e,t.child,null,o),e.child.memoizedState=kp(o),e.memoizedState=bp,s);if(!(e.mode&1))return cc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Q(419)),r=If(s,r,void 0),cc(t,e,o,r)}if(a=(o&t.childLanes)!==0,mn||a){if(r=Vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gr(t,i),tr(r,t,i,-1))}return vg(),r=If(Error(Q(421))),cc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Lx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pn=Li(i.nextSibling),Rn=e,et=!0,Xn=null,t!==null&&(Fn[Un++]=Lr,Fn[Un++]=Or,Fn[Un++]=bs,Lr=t.id,Or=t.overflow,bs=e),e=hg(e,r.children),e.flags|=4096,e)}function p0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sp(t.return,e,n)}function Tf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function z2(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(nn(t,e,r.children,n),r=rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p0(t,n,e);else if(t.tag===19)p0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ge(rt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Tf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Tf(e,!0,n,null,s);break;case"together":Tf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Ui(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ui(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Tx(t,e,n){switch(e.tag){case 3:j2(e),Jo();break;case 5:p2(e);break;case 1:_n(e.type)&&ld(e);break;case 4:ig(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ge(dd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ge(rt,rt.current&1),e.flags|=128,null):n&e.child.childLanes?B2(t,e,n):(Ge(rt,rt.current&1),t=Wr(t,e,n),t!==null?t.sibling:null);Ge(rt,rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return z2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ge(rt,rt.current),r)break;return null;case 22:case 23:return e.lanes=0,F2(t,e,n)}return Wr(t,e,n)}var $2,Dp,q2,H2;$2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dp=function(){};q2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Es(pr.current);var s=null;switch(n){case"input":i=ep(t,i),r=ep(t,r),s=[];break;case"select":i=at({},i,{value:void 0}),r=at({},r,{value:void 0}),s=[];break;case"textarea":i=rp(t,i),r=rp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=od)}sp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ll.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ll.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Je("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};H2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ka(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Sx(t,e,n){var r=e.pendingProps;switch(Ym(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return _n(e.type)&&ad(),Wt(e),null;case 3:return r=e.stateNode,Xo(),Ye(vn),Ye(en),og(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(jp(Xn),Xn=null))),Dp(t,e),Wt(e),null;case 5:sg(e);var i=Es(Gl.current);if(n=e.type,t!==null&&e.stateNode!=null)q2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Wt(e),null}if(t=Es(pr.current),lc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ar]=e,r[Hl]=s,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(i=0;i<ll.length;i++)Je(ll[i],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":T1(r,s),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Je("invalid",r);break;case"textarea":C1(r,s),Je("invalid",r)}sp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ac(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ac(r.textContent,a,t),i=["children",""+a]):Ll.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Zu(r),S1(r,s,!0);break;case"textarea":Zu(r),x1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=od)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_w(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ar]=e,t[Hl]=r,$2(t,e,!1,!1),e.stateNode=t;e:{switch(o=op(n,r),n){case"dialog":Je("cancel",t),Je("close",t),i=r;break;case"iframe":case"object":case"embed":Je("load",t),i=r;break;case"video":case"audio":for(i=0;i<ll.length;i++)Je(ll[i],t);i=r;break;case"source":Je("error",t),i=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),i=r;break;case"details":Je("toggle",t),i=r;break;case"input":T1(t,r),i=ep(t,r),Je("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=at({},r,{value:void 0}),Je("invalid",t);break;case"textarea":C1(t,r),i=rp(t,r),Je("invalid",t);break;default:i=r}sp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Iw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ww(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ol(t,l):typeof l=="number"&&Ol(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ll.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Je("scroll",t):l!=null&&Om(t,s,l,o))}switch(n){case"input":Zu(t),S1(t,r,!1);break;case"textarea":Zu(t),x1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ki(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Fo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Fo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=od)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)H2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Es(Gl.current),Es(pr.current),lc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(s=r.nodeValue!==n)&&(t=Rn,t!==null))switch(t.tag){case 3:ac(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ac(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return Wt(e),null;case 13:if(Ye(rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&Pn!==null&&e.mode&1&&!(e.flags&128))u2(),Jo(),e.flags|=98560,s=!1;else if(s=lc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[ar]=e}else Jo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),s=!1}else Xn!==null&&(jp(Xn),Xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?Rt===0&&(Rt=3):vg())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return Xo(),Dp(t,e),t===null&&$l(e.stateNode.containerInfo),Wt(e),null;case 10:return tg(e.type._context),Wt(e),null;case 17:return _n(e.type)&&ad(),Wt(e),null;case 19:if(Ye(rt),s=e.memoizedState,s===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ka(s,!1);else{if(Rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pd(t),o!==null){for(e.flags|=128,Ka(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(rt,rt.current&1|2),e.child}t=t.sibling}s.tail!==null&&gt()>ea&&(e.flags|=128,r=!0,Ka(s,!1),e.lanes=4194304)}else{if(!r)if(t=pd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ka(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!et)return Wt(e),null}else 2*gt()-s.renderingStartTime>ea&&n!==1073741824&&(e.flags|=128,r=!0,Ka(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=gt(),e.sibling=null,n=rt.current,Ge(rt,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return yg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function Cx(t,e){switch(Ym(e),e.tag){case 1:return _n(e.type)&&ad(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xo(),Ye(vn),Ye(en),og(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sg(e),null;case 13:if(Ye(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Jo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(rt),null;case 4:return Xo(),null;case 10:return tg(e.type._context),null;case 22:case 23:return yg(),null;case 24:return null;default:return null}}var dc=!1,Yt=!1,xx=typeof WeakSet=="function"?WeakSet:Set,se=null;function No(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ut(t,e,r)}else n.current=null}function Np(t,e,n){try{n()}catch(r){ut(t,e,r)}}var m0=!1;function Px(t,e){if(gp=rd,t=Jw(),Qm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var _;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(_=h.firstChild)!==null;)p=h,h=_;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(_=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yp={focusedElem:t,selectionRange:n},rd=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var P=E.memoizedProps,N=E.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?P:Qn(e.type,P),N);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(k){ut(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return E=m0,m0=!1,E}function Il(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Np(e,n,s)}i=i.next}while(i!==r)}}function oh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function K2(t){var e=t.alternate;e!==null&&(t.alternate=null,K2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[Hl],delete e[wp],delete e[ux],delete e[cx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function G2(t){return t.tag===5||t.tag===3||t.tag===4}function g0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||G2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=od));else if(r!==4&&(t=t.child,t!==null))for(Lp(t,e,n),t=t.sibling;t!==null;)Lp(t,e,n),t=t.sibling}function Op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Op(t,e,n),t=t.sibling;t!==null;)Op(t,e,n),t=t.sibling}var jt=null,Jn=!1;function pi(t,e,n){for(n=n.child;n!==null;)W2(t,e,n),n=n.sibling}function W2(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Xd,n)}catch{}switch(n.tag){case 5:Yt||No(n,e);case 6:var r=jt,i=Jn;jt=null,pi(t,e,n),jt=r,Jn=i,jt!==null&&(Jn?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(Jn?(t=jt,n=n.stateNode,t.nodeType===8?gf(t.parentNode,n):t.nodeType===1&&gf(t,n),jl(t)):gf(jt,n.stateNode));break;case 4:r=jt,i=Jn,jt=n.stateNode.containerInfo,Jn=!0,pi(t,e,n),jt=r,Jn=i;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Np(n,e,o),i=i.next}while(i!==r)}pi(t,e,n);break;case 1:if(!Yt&&(No(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ut(n,e,a)}pi(t,e,n);break;case 21:pi(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,pi(t,e,n),Yt=r):pi(t,e,n);break;default:pi(t,e,n)}}function y0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xx),e.forEach(function(r){var i=Ox.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,Jn=!1;break e;case 3:jt=a.stateNode.containerInfo,Jn=!0;break e;case 4:jt=a.stateNode.containerInfo,Jn=!0;break e}a=a.return}if(jt===null)throw Error(Q(160));W2(s,o,i),jt=null,Jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ut(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Q2(e,t),e=e.sibling}function Q2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),sr(t),r&4){try{Il(3,t,t.return),oh(3,t)}catch(P){ut(t,t.return,P)}try{Il(5,t,t.return)}catch(P){ut(t,t.return,P)}}break;case 1:Wn(e,t),sr(t),r&512&&n!==null&&No(n,n.return);break;case 5:if(Wn(e,t),sr(t),r&512&&n!==null&&No(n,n.return),t.flags&32){var i=t.stateNode;try{Ol(i,"")}catch(P){ut(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&yw(i,s),op(a,o);var c=op(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Iw(i,h):d==="dangerouslySetInnerHTML"?ww(i,h):d==="children"?Ol(i,h):Om(i,d,h,c)}switch(a){case"input":tp(i,s);break;case"textarea":vw(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Fo(i,!!s.multiple,_,!1):p!==!!s.multiple&&(s.defaultValue!=null?Fo(i,!!s.multiple,s.defaultValue,!0):Fo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hl]=s}catch(P){ut(t,t.return,P)}}break;case 6:if(Wn(e,t),sr(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){ut(t,t.return,P)}}break;case 3:if(Wn(e,t),sr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jl(e.containerInfo)}catch(P){ut(t,t.return,P)}break;case 4:Wn(e,t),sr(t);break;case 13:Wn(e,t),sr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(mg=gt())),r&4&&y0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(c=Yt)||d,Wn(e,t),Yt=c):Wn(e,t),sr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(h=se=d;se!==null;){switch(p=se,_=p.child,p.tag){case 0:case 11:case 14:case 15:Il(4,p,p.return);break;case 1:No(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(P){ut(r,n,P)}}break;case 5:No(p,p.return);break;case 22:if(p.memoizedState!==null){_0(h);continue}}_!==null?(_.return=p,se=_):_0(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ew("display",o))}catch(P){ut(t,t.return,P)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(P){ut(t,t.return,P)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wn(e,t),sr(t),r&4&&y0(t);break;case 21:break;default:Wn(e,t),sr(t)}}function sr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(G2(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ol(i,""),r.flags&=-33);var s=g0(t);Op(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=g0(t);Lp(t,a,o);break;default:throw Error(Q(161))}}catch(l){ut(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ax(t,e,n){se=t,J2(t)}function J2(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||dc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Yt;a=dc;var c=Yt;if(dc=o,(Yt=l)&&!c)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?w0(i):l!==null?(l.return=o,se=l):w0(i);for(;s!==null;)se=s,J2(s),s=s.sibling;se=i,dc=a,Yt=c}v0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):v0(t)}}function v0(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||oh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&n0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}n0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&jl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Yt||e.flags&512&&Vp(e)}catch(p){ut(e,e.return,p)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function _0(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function w0(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oh(4,e)}catch(l){ut(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ut(e,i,l)}}var s=e.return;try{Vp(e)}catch(l){ut(e,s,l)}break;case 5:var o=e.return;try{Vp(e)}catch(l){ut(e,o,l)}}}catch(l){ut(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var Rx=Math.ceil,yd=Xr.ReactCurrentDispatcher,fg=Xr.ReactCurrentOwner,zn=Xr.ReactCurrentBatchConfig,Ve=0,Vt=null,Tt=null,zt=0,xn=0,Vo=Xi(0),Rt=0,Yl=null,Ds=0,ah=0,pg=0,Tl=null,pn=null,mg=0,ea=1/0,Dr=null,vd=!1,Mp=null,Mi=null,hc=!1,Ri=null,_d=0,Sl=0,Fp=null,Nc=-1,Vc=0;function sn(){return Ve&6?gt():Nc!==-1?Nc:Nc=gt()}function Fi(t){return t.mode&1?Ve&2&&zt!==0?zt&-zt:hx.transition!==null?(Vc===0&&(Vc=Vw()),Vc):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:Bw(t.type)),t):1}function tr(t,e,n,r){if(50<Sl)throw Sl=0,Fp=null,Error(Q(185));gu(t,n,r),(!(Ve&2)||t!==Vt)&&(t===Vt&&(!(Ve&2)&&(ah|=n),Rt===4&&Ii(t,zt)),wn(t,r),n===1&&Ve===0&&!(e.mode&1)&&(ea=gt()+500,rh&&Zi()))}function wn(t,e){var n=t.callbackNode;hC(t,e);var r=nd(t,t===Vt?zt:0);if(r===0)n!==null&&R1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&R1(n),e===1)t.tag===0?dx(E0.bind(null,t)):o2(E0.bind(null,t)),ax(function(){!(Ve&6)&&Zi()}),n=null;else{switch(Lw(r)){case 1:n=Bm;break;case 4:n=Dw;break;case 16:n=td;break;case 536870912:n=Nw;break;default:n=td}n=iE(n,Y2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Y2(t,e){if(Nc=-1,Vc=0,Ve&6)throw Error(Q(327));var n=t.callbackNode;if($o()&&t.callbackNode!==n)return null;var r=nd(t,t===Vt?zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wd(t,r);else{e=r;var i=Ve;Ve|=2;var s=Z2();(Vt!==t||zt!==e)&&(Dr=null,ea=gt()+500,Cs(t,e));do try{Dx();break}catch(a){X2(t,a)}while(!0);eg(),yd.current=s,Ve=i,Tt!==null?e=0:(Vt=null,zt=0,e=Rt)}if(e!==0){if(e===2&&(i=dp(t),i!==0&&(r=i,e=Up(t,i))),e===1)throw n=Yl,Cs(t,0),Ii(t,r),wn(t,gt()),n;if(e===6)Ii(t,r);else{if(i=t.current.alternate,!(r&30)&&!bx(i)&&(e=wd(t,r),e===2&&(s=dp(t),s!==0&&(r=s,e=Up(t,s))),e===1))throw n=Yl,Cs(t,0),Ii(t,r),wn(t,gt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:hs(t,pn,Dr);break;case 3:if(Ii(t,r),(r&130023424)===r&&(e=mg+500-gt(),10<e)){if(nd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_p(hs.bind(null,t,pn,Dr),e);break}hs(t,pn,Dr);break;case 4:if(Ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-er(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rx(r/1960))-r,10<r){t.timeoutHandle=_p(hs.bind(null,t,pn,Dr),r);break}hs(t,pn,Dr);break;case 5:hs(t,pn,Dr);break;default:throw Error(Q(329))}}}return wn(t,gt()),t.callbackNode===n?Y2.bind(null,t):null}function Up(t,e){var n=Tl;return t.current.memoizedState.isDehydrated&&(Cs(t,e).flags|=256),t=wd(t,e),t!==2&&(e=pn,pn=n,e!==null&&jp(e)),t}function jp(t){pn===null?pn=t:pn.push.apply(pn,t)}function bx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ii(t,e){for(e&=~pg,e&=~ah,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),r=1<<n;t[n]=-1,e&=~r}}function E0(t){if(Ve&6)throw Error(Q(327));$o();var e=nd(t,0);if(!(e&1))return wn(t,gt()),null;var n=wd(t,e);if(t.tag!==0&&n===2){var r=dp(t);r!==0&&(e=r,n=Up(t,r))}if(n===1)throw n=Yl,Cs(t,0),Ii(t,e),wn(t,gt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hs(t,pn,Dr),wn(t,gt()),null}function gg(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(ea=gt()+500,rh&&Zi())}}function Ns(t){Ri!==null&&Ri.tag===0&&!(Ve&6)&&$o();var e=Ve;Ve|=1;var n=zn.transition,r=Ue;try{if(zn.transition=null,Ue=1,t)return t()}finally{Ue=r,zn.transition=n,Ve=e,!(Ve&6)&&Zi()}}function yg(){xn=Vo.current,Ye(Vo)}function Cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ox(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(Ym(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ad();break;case 3:Xo(),Ye(vn),Ye(en),og();break;case 5:sg(r);break;case 4:Xo();break;case 13:Ye(rt);break;case 19:Ye(rt);break;case 10:tg(r.type._context);break;case 22:case 23:yg()}n=n.return}if(Vt=t,Tt=t=Ui(t.current,null),zt=xn=e,Rt=0,Yl=null,pg=ah=Ds=0,pn=Tl=null,ws!==null){for(e=0;e<ws.length;e++)if(n=ws[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ws=null}return t}function X2(t,e){do{var n=Tt;try{if(eg(),bc.current=gd,md){for(var r=st.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}md=!1}if(ks=0,Nt=At=st=null,El=!1,Wl=0,fg.current=null,n===null||n.return===null){Rt=1,Yl=e,Tt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=zt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=l0(o);if(_!==null){_.flags&=-257,u0(_,o,a,s,e),_.mode&1&&a0(s,c,e),e=_,l=c;var E=e.updateQueue;if(E===null){var P=new Set;P.add(l),e.updateQueue=P}else E.add(l);break e}else{if(!(e&1)){a0(s,c,e),vg();break e}l=Error(Q(426))}}else if(et&&a.mode&1){var N=l0(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),u0(N,o,a,s,e),Xm(Zo(l,a));break e}}s=l=Zo(l,a),Rt!==4&&(Rt=2),Tl===null?Tl=[s]:Tl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=L2(s,l,e);t0(s,S);break e;case 1:a=l;var y=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Mi===null||!Mi.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=O2(s,a,e);t0(s,k);break e}}s=s.return}while(s!==null)}tE(n)}catch(V){e=V,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function Z2(){var t=yd.current;return yd.current=gd,t===null?gd:t}function vg(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Vt===null||!(Ds&268435455)&&!(ah&268435455)||Ii(Vt,zt)}function wd(t,e){var n=Ve;Ve|=2;var r=Z2();(Vt!==t||zt!==e)&&(Dr=null,Cs(t,e));do try{kx();break}catch(i){X2(t,i)}while(!0);if(eg(),Ve=n,yd.current=r,Tt!==null)throw Error(Q(261));return Vt=null,zt=0,Rt}function kx(){for(;Tt!==null;)eE(Tt)}function Dx(){for(;Tt!==null&&!rC();)eE(Tt)}function eE(t){var e=rE(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?tE(t):Tt=e,fg.current=null}function tE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Cx(n,e),n!==null){n.flags&=32767,Tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rt=6,Tt=null;return}}else if(n=Sx(n,e,xn),n!==null){Tt=n;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=t}while(e!==null);Rt===0&&(Rt=5)}function hs(t,e,n){var r=Ue,i=zn.transition;try{zn.transition=null,Ue=1,Nx(t,e,n,r)}finally{zn.transition=i,Ue=r}return null}function Nx(t,e,n,r){do $o();while(Ri!==null);if(Ve&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(fC(t,s),t===Vt&&(Tt=Vt=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hc||(hc=!0,iE(td,function(){return $o(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=zn.transition,zn.transition=null;var o=Ue;Ue=1;var a=Ve;Ve|=4,fg.current=null,Px(t,n),Q2(n,t),ZC(yp),rd=!!gp,yp=gp=null,t.current=n,Ax(n),iC(),Ve=a,Ue=o,zn.transition=s}else t.current=n;if(hc&&(hc=!1,Ri=t,_d=i),s=t.pendingLanes,s===0&&(Mi=null),aC(n.stateNode),wn(t,gt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vd)throw vd=!1,t=Mp,Mp=null,t;return _d&1&&t.tag!==0&&$o(),s=t.pendingLanes,s&1?t===Fp?Sl++:(Sl=0,Fp=t):Sl=0,Zi(),null}function $o(){if(Ri!==null){var t=Lw(_d),e=zn.transition,n=Ue;try{if(zn.transition=null,Ue=16>t?16:t,Ri===null)var r=!1;else{if(t=Ri,Ri=null,_d=0,Ve&6)throw Error(Q(331));var i=Ve;for(Ve|=4,se=t.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:Il(8,d,s)}var h=d.child;if(h!==null)h.return=d,se=h;else for(;se!==null;){d=se;var p=d.sibling,_=d.return;if(K2(d),d===c){se=null;break}if(p!==null){p.return=_,se=p;break}se=_}}}var E=s.alternate;if(E!==null){var P=E.child;if(P!==null){E.child=null;do{var N=P.sibling;P.sibling=null,P=N}while(P!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Il(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,se=S;break e}se=s.return}}var y=t.current;for(se=y;se!==null;){o=se;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,se=I;else e:for(o=y;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:oh(9,a)}}catch(V){ut(a,a.return,V)}if(a===o){se=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,se=k;break e}se=a.return}}if(Ve=i,Zi(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Xd,t)}catch{}r=!0}return r}finally{Ue=n,zn.transition=e}}return!1}function I0(t,e,n){e=Zo(n,e),e=L2(t,e,1),t=Oi(t,e,1),e=sn(),t!==null&&(gu(t,1,e),wn(t,e))}function ut(t,e,n){if(t.tag===3)I0(t,t,n);else for(;e!==null;){if(e.tag===3){I0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mi===null||!Mi.has(r))){t=Zo(n,t),t=O2(e,t,1),e=Oi(e,t,1),t=sn(),e!==null&&(gu(e,1,t),wn(e,t));break}}e=e.return}}function Vx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,Vt===t&&(zt&n)===n&&(Rt===4||Rt===3&&(zt&130023424)===zt&&500>gt()-mg?Cs(t,0):pg|=n),wn(t,e)}function nE(t,e){e===0&&(t.mode&1?(e=nc,nc<<=1,!(nc&130023424)&&(nc=4194304)):e=1);var n=sn();t=Gr(t,e),t!==null&&(gu(t,e,n),wn(t,n))}function Lx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nE(t,n)}function Ox(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),nE(t,n)}var rE;rE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,Tx(t,e,n);mn=!!(t.flags&131072)}else mn=!1,et&&e.flags&1048576&&a2(e,cd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Dc(t,e),t=e.pendingProps;var i=Qo(e,en.current);zo(e,n),i=lg(null,e,r,t,i,n);var s=ug();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(r)?(s=!0,ld(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rg(e),i.updater=sh,e.stateNode=i,i._reactInternals=e,xp(e,r,t,n),e=Rp(null,e,r,!0,s,n)):(e.tag=0,et&&s&&Jm(e),nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Dc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Fx(r),t=Qn(r,t),i){case 0:e=Ap(null,e,r,t,n);break e;case 1:e=h0(null,e,r,t,n);break e;case 11:e=c0(null,e,r,t,n);break e;case 14:e=d0(null,e,r,Qn(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),Ap(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),h0(t,e,r,i,n);case 3:e:{if(j2(e),t===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,f2(t,e),fd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Zo(Error(Q(423)),e),e=f0(t,e,r,n,i);break e}else if(r!==i){i=Zo(Error(Q(424)),e),e=f0(t,e,r,n,i);break e}else for(Pn=Li(e.stateNode.containerInfo.firstChild),Rn=e,et=!0,Xn=null,n=d2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jo(),r===i){e=Wr(t,e,n);break e}nn(t,e,r,n)}e=e.child}return e;case 5:return p2(e),t===null&&Tp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,vp(r,i)?o=null:s!==null&&vp(r,s)&&(e.flags|=32),U2(t,e),nn(t,e,o,n),e.child;case 6:return t===null&&Tp(e),null;case 13:return B2(t,e,n);case 4:return ig(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yo(e,null,r,n):nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),c0(t,e,r,i,n);case 7:return nn(t,e,e.pendingProps,n),e.child;case 8:return nn(t,e,e.pendingProps.children,n),e.child;case 12:return nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ge(dd,r._currentValue),r._currentValue=o,s!==null)if(nr(s.value,o)){if(s.children===i.children&&!vn.current){e=Wr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=zr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Sp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Sp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zo(e,n),i=$n(i),r=r(i),e.flags|=1,nn(t,e,r,n),e.child;case 14:return r=e.type,i=Qn(r,e.pendingProps),i=Qn(r.type,i),d0(t,e,r,i,n);case 15:return M2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qn(r,i),Dc(t,e),e.tag=1,_n(r)?(t=!0,ld(e)):t=!1,zo(e,n),V2(e,r,i),xp(e,r,i,n),Rp(null,e,r,!0,t,n);case 19:return z2(t,e,n);case 22:return F2(t,e,n)}throw Error(Q(156,e.tag))};function iE(t,e){return kw(t,e)}function Mx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,r){return new Mx(t,e,n,r)}function _g(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fx(t){if(typeof t=="function")return _g(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fm)return 11;if(t===Um)return 14}return 2}function Ui(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")_g(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case So:return xs(n.children,i,s,e);case Mm:o=8,i|=8;break;case Jf:return t=Bn(12,n,e,i|2),t.elementType=Jf,t.lanes=s,t;case Yf:return t=Bn(13,n,e,i),t.elementType=Yf,t.lanes=s,t;case Xf:return t=Bn(19,n,e,i),t.elementType=Xf,t.lanes=s,t;case pw:return lh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hw:o=10;break e;case fw:o=9;break e;case Fm:o=11;break e;case Um:o=14;break e;case _i:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Bn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function xs(t,e,n,r){return t=Bn(7,t,r,e),t.lanes=n,t}function lh(t,e,n,r){return t=Bn(22,t,r,e),t.elementType=pw,t.lanes=n,t.stateNode={isHidden:!1},t}function Sf(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function Cf(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ux(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sf(0),this.expirationTimes=sf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wg(t,e,n,r,i,s,o,a,l){return t=new Ux(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Bn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rg(s),t}function jx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:To,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sE(t){if(!t)return Gi;t=t._reactInternals;e:{if(Ks(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(_n(n))return s2(t,n,e)}return e}function oE(t,e,n,r,i,s,o,a,l){return t=wg(n,r,!0,t,i,s,o,a,l),t.context=sE(null),n=t.current,r=sn(),i=Fi(n),s=zr(r,i),s.callback=e??null,Oi(n,s,i),t.current.lanes=i,gu(t,i,r),wn(t,r),t}function uh(t,e,n,r){var i=e.current,s=sn(),o=Fi(i);return n=sE(n),e.context===null?e.context=n:e.pendingContext=n,e=zr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oi(i,e,o),t!==null&&(tr(t,i,o,s),Rc(t,i,o)),o}function Ed(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function T0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Eg(t,e){T0(t,e),(t=t.alternate)&&T0(t,e)}function Bx(){return null}var aE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ig(t){this._internalRoot=t}ch.prototype.render=Ig.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));uh(t,e,null,null)};ch.prototype.unmount=Ig.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){uh(null,t,null,null)}),e[Kr]=null}};function ch(t){this._internalRoot=t}ch.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ei.length&&e!==0&&e<Ei[n].priority;n++);Ei.splice(n,0,t),n===0&&jw(t)}};function Tg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S0(){}function zx(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ed(o);s.call(c)}}var o=oE(e,r,t,0,null,!1,!1,"",S0);return t._reactRootContainer=o,t[Kr]=o.current,$l(t.nodeType===8?t.parentNode:t),Ns(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ed(l);a.call(c)}}var l=wg(t,0,!1,null,null,!1,!1,"",S0);return t._reactRootContainer=l,t[Kr]=l.current,$l(t.nodeType===8?t.parentNode:t),Ns(function(){uh(e,l,n,r)}),l}function hh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ed(o);a.call(l)}}uh(e,o,t,i)}else o=zx(n,e,t,i,r);return Ed(o)}Ow=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=al(e.pendingLanes);n!==0&&(zm(e,n|1),wn(e,gt()),!(Ve&6)&&(ea=gt()+500,Zi()))}break;case 13:Ns(function(){var r=Gr(t,1);if(r!==null){var i=sn();tr(r,t,1,i)}}),Eg(t,1)}};$m=function(t){if(t.tag===13){var e=Gr(t,134217728);if(e!==null){var n=sn();tr(e,t,134217728,n)}Eg(t,134217728)}};Mw=function(t){if(t.tag===13){var e=Fi(t),n=Gr(t,e);if(n!==null){var r=sn();tr(n,t,e,r)}Eg(t,e)}};Fw=function(){return Ue};Uw=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};lp=function(t,e,n){switch(e){case"input":if(tp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=nh(r);if(!i)throw Error(Q(90));gw(r),tp(r,i)}}}break;case"textarea":vw(t,n);break;case"select":e=n.value,e!=null&&Fo(t,!!n.multiple,e,!1)}};Cw=gg;xw=Ns;var $x={usingClientEntryPoint:!1,Events:[vu,Ao,nh,Tw,Sw,gg]},Ga={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qx={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||Bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Xd=fc.inject(qx),fr=fc}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$x;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tg(e))throw Error(Q(200));return jx(t,e,null,n)};Nn.createRoot=function(t,e){if(!Tg(t))throw Error(Q(299));var n=!1,r="",i=aE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wg(t,1,!1,null,null,n,!1,r,i),t[Kr]=e.current,$l(t.nodeType===8?t.parentNode:t),new Ig(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Rw(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return Ns(t)};Nn.hydrate=function(t,e,n){if(!dh(e))throw Error(Q(200));return hh(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!Tg(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=aE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=oE(e,null,t,1,n??null,i,!1,s,o),t[Kr]=e.current,$l(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ch(e)};Nn.render=function(t,e,n){if(!dh(e))throw Error(Q(200));return hh(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!dh(t))throw Error(Q(40));return t._reactRootContainer?(Ns(function(){hh(null,null,t,!1,function(){t._reactRootContainer=null,t[Kr]=null})}),!0):!1};Nn.unstable_batchedUpdates=gg;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return hh(t,e,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function lE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lE)}catch(t){console.error(t)}}lE(),lw.exports=Nn;var Sg=lw.exports;const Hx=Rm(Sg),Kx=J_({__proto__:null,default:Hx},[Sg]);var C0=Sg;Wf.createRoot=C0.createRoot,Wf.hydrateRoot=C0.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nt.apply(this,arguments)}var It;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(It||(It={}));const x0="popstate";function Gx(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Xl("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Vs(i)}return Qx(e,n,null,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ta(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Wx(){return Math.random().toString(36).substr(2,8)}function P0(t,e){return{usr:t.state,key:t.key,idx:e}}function Xl(t,e,n,r){return n===void 0&&(n=null),nt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?es(e):e,{state:n,key:e&&e.key||r||Wx()})}function Vs(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function es(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Qx(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=It.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(nt({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=It.Pop;let N=d(),S=N==null?null:N-c;c=N,l&&l({action:a,location:P.location,delta:S})}function p(N,S){a=It.Push;let y=Xl(P.location,N,S);c=d()+1;let I=P0(y,c),k=P.createHref(y);try{o.pushState(I,"",k)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(k)}s&&l&&l({action:a,location:P.location,delta:1})}function _(N,S){a=It.Replace;let y=Xl(P.location,N,S);c=d();let I=P0(y,c),k=P.createHref(y);o.replaceState(I,"",k),s&&l&&l({action:a,location:P.location,delta:0})}function E(N){let S=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof N=="string"?N:Vs(N);return y=y.replace(/ $/,"%20"),Se(S,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,S)}let P={get action(){return a},get location(){return t(i,o)},listen(N){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(x0,h),l=N,()=>{i.removeEventListener(x0,h),l=null}},createHref(N){return e(i,N)},createURL:E,encodeLocation(N){let S=E(N);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:_,go(N){return o.go(N)}};return P}var Ze;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ze||(Ze={}));const Jx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Yx(t){return t.index===!0}function Bp(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(Se(i.index!==!0||!i.children,"Cannot specify children on an index route"),Se(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Yx(i)){let l=nt({},i,e(i),{id:a});return r[a]=l,l}else{let l=nt({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Bp(i.children,e,o,r)),l}})}function Lo(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?es(e):e,i=Gs(r.pathname||"/",n);if(i==null)return null;let s=cE(t);Xx(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=cP(i);o=aP(s[a],l)}return o}function uE(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function cE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Se(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=$r([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Se(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:sP(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of dE(s.path))i(s,o,l)}),e}function dE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=dE(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Xx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Zx=/^:[\w-]+$/,eP=3,tP=2,nP=1,rP=10,iP=-2,A0=t=>t==="*";function sP(t,e){let n=t.split("/"),r=n.length;return n.some(A0)&&(r+=iP),e&&(r+=tP),n.filter(i=>!A0(i)).reduce((i,s)=>i+(Zx.test(s)?eP:s===""?nP:rP),r)}function oP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function aP(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=lP({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;s.push({params:r,pathname:$r([i,d.pathname]),pathnameBase:fP($r([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=$r([i,d.pathnameBase]))}return s}function lP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:_}=d;if(p==="*"){let P=a[h]||"";o=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const E=a[h];return _&&!E?c[p]=void 0:c[p]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function uP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ta(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function cP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ta(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Gs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function dP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?es(t):t;return{pathname:n?n.startsWith("/")?n:hP(n,e):e,search:pP(r),hash:mP(i)}}function hP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function xf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fh(t,e){let n=hE(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ph(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=es(t):(i=nt({},t),Se(!i.pathname||!i.pathname.includes("?"),xf("?","pathname","search",i)),Se(!i.pathname||!i.pathname.includes("#"),xf("#","pathname","hash",i)),Se(!i.search||!i.search.includes("#"),xf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=dP(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const $r=t=>t.join("/").replace(/\/\/+/g,"/"),fP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Cg{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function xg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fE=["post","put","patch","delete"],gP=new Set(fE),yP=["get",...fE],vP=new Set(yP),_P=new Set([301,302,303,307,308]),wP=new Set([307,308]),Pf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},EP={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Wa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Pg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IP=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),pE="remix-router-transitions";function TP(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Se(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;i=U=>({hasErrorBoundary:L(U)})}else i=IP;let s={},o=Bp(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||PP,d=nt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),h=null,p=new Set,_=null,E=null,P=null,N=t.hydrationData!=null,S=Lo(o,t.history.location,l),y=null;if(S==null){let L=Mn(404,{pathname:t.history.location.pathname}),{matches:U,route:q}=F0(o);S=U,y={[q.id]:L}}let I,k=S.some(L=>L.route.lazy),V=S.some(L=>L.route.loader);if(k)I=!1;else if(!V)I=!0;else if(d.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,U=t.hydrationData?t.hydrationData.errors:null,q=J=>J.route.loader?typeof J.route.loader=="function"&&J.route.loader.hydrate===!0?!1:L&&L[J.route.id]!==void 0||U&&U[J.route.id]!==void 0:!0;if(U){let J=S.findIndex(ie=>U[ie.route.id]!==void 0);I=S.slice(0,J+1).every(q)}else I=S.every(q)}else I=t.hydrationData!=null;let F,g={historyAction:t.history.action,location:t.history.location,matches:S,initialized:I,navigation:Pf,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},v=It.Pop,T=!1,x,A=!1,b=new Map,C=null,me=!1,Ie=!1,$e=[],Oe=[],H=new Map,oe=0,ce=-1,Re=new Map,Te=new Set,Me=new Map,kt=new Map,pt=new Set,mt=new Map,_t=new Map,Er=!1;function Zs(){if(h=t.history.listen(L=>{let{action:U,location:q,delta:J}=L;if(Er){Er=!1;return}ta(_t.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ie=no({currentLocation:g.location,nextLocation:q,historyAction:U});if(ie&&J!=null){Er=!0,t.history.go(J*-1),to(ie,{state:"blocked",location:q,proceed(){to(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),t.history.go(J)},reset(){let de=new Map(g.blockers);de.set(ie,Wa),Ct({blockers:de})}});return}return Hn(U,q)}),n){UP(e,b);let L=()=>jP(e,b);e.addEventListener("pagehide",L),C=()=>e.removeEventListener("pagehide",L)}return g.initialized||Hn(It.Pop,g.location,{initialHydration:!0}),F}function ri(){h&&h(),C&&C(),p.clear(),x&&x.abort(),g.fetchers.forEach((L,U)=>Sr(U)),g.blockers.forEach((L,U)=>Uu(U))}function Ir(L){return p.add(L),()=>p.delete(L)}function Ct(L,U){U===void 0&&(U={}),g=nt({},g,L);let q=[],J=[];d.v7_fetcherPersist&&g.fetchers.forEach((ie,de)=>{ie.state==="idle"&&(pt.has(de)?J.push(de):q.push(de))}),[...p].forEach(ie=>ie(g,{deletedFetchers:J,unstable_viewTransitionOpts:U.viewTransitionOpts,unstable_flushSync:U.flushSync===!0})),d.v7_fetcherPersist&&(q.forEach(ie=>g.fetchers.delete(ie)),J.forEach(ie=>Sr(ie)))}function Ln(L,U,q){var J,ie;let{flushSync:de}=q===void 0?{}:q,he=g.actionData!=null&&g.navigation.formMethod!=null&&Yn(g.navigation.formMethod)&&g.navigation.state==="loading"&&((J=L.state)==null?void 0:J._isRedirect)!==!0,re;U.actionData?Object.keys(U.actionData).length>0?re=U.actionData:re=null:he?re=g.actionData:re=null;let ve=U.loaderData?O0(g.loaderData,U.loaderData,U.matches||[],U.errors):g.loaderData,we=g.blockers;we.size>0&&(we=new Map(we),we.forEach((ge,Ke)=>we.set(Ke,Wa)));let xt=T===!0||g.navigation.formMethod!=null&&Yn(g.navigation.formMethod)&&((ie=L.state)==null?void 0:ie._isRedirect)!==!0;a&&(o=a,a=void 0),me||v===It.Pop||(v===It.Push?t.history.push(L,L.state):v===It.Replace&&t.history.replace(L,L.state));let Xe;if(v===It.Pop){let ge=b.get(g.location.pathname);ge&&ge.has(L.pathname)?Xe={currentLocation:g.location,nextLocation:L}:b.has(L.pathname)&&(Xe={currentLocation:L,nextLocation:g.location})}else if(A){let ge=b.get(g.location.pathname);ge?ge.add(L.pathname):(ge=new Set([L.pathname]),b.set(g.location.pathname,ge)),Xe={currentLocation:g.location,nextLocation:L}}Ct(nt({},U,{actionData:re,loaderData:ve,historyAction:v,location:L,initialized:!0,navigation:Pf,revalidation:"idle",restoreScrollPosition:io(L,U.matches||g.matches),preventScrollReset:xt,blockers:we}),{viewTransitionOpts:Xe,flushSync:de===!0}),v=It.Pop,T=!1,A=!1,me=!1,Ie=!1,$e=[],Oe=[]}async function Tr(L,U){if(typeof L=="number"){t.history.go(L);return}let q=zp(g.location,g.matches,l,d.v7_prependBasename,L,d.v7_relativeSplatPath,U==null?void 0:U.fromRouteId,U==null?void 0:U.relative),{path:J,submission:ie,error:de}=R0(d.v7_normalizeFormMethod,!1,q,U),he=g.location,re=Xl(g.location,J,U&&U.state);re=nt({},re,t.history.encodeLocation(re));let ve=U&&U.replace!=null?U.replace:void 0,we=It.Push;ve===!0?we=It.Replace:ve===!1||ie!=null&&Yn(ie.formMethod)&&ie.formAction===g.location.pathname+g.location.search&&(we=It.Replace);let xt=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,Xe=(U&&U.unstable_flushSync)===!0,ge=no({currentLocation:he,nextLocation:re,historyAction:we});if(ge){to(ge,{state:"blocked",location:re,proceed(){to(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:re}),Tr(L,U)},reset(){let Ke=new Map(g.blockers);Ke.set(ge,Wa),Ct({blockers:Ke})}});return}return await Hn(we,re,{submission:ie,pendingError:de,preventScrollReset:xt,replace:U&&U.replace,enableViewTransition:U&&U.unstable_viewTransition,flushSync:Xe})}function eo(){if(xe(),Ct({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){Hn(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}Hn(v||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation})}}async function Hn(L,U,q){x&&x.abort(),x=null,v=L,me=(q&&q.startUninterruptedRevalidation)===!0,ka(g.location,g.matches),T=(q&&q.preventScrollReset)===!0,A=(q&&q.enableViewTransition)===!0;let J=a||o,ie=q&&q.overrideNavigation,de=Lo(J,U,l),he=(q&&q.flushSync)===!0;if(!de){let ge=Mn(404,{pathname:U.pathname}),{matches:Ke,route:tt}=F0(J);ro(),Ln(U,{matches:Ke,loaderData:{},errors:{[tt.id]:ge}},{flushSync:he});return}if(g.initialized&&!Ie&&NP(g.location,U)&&!(q&&q.submission&&Yn(q.submission.formMethod))){Ln(U,{matches:de},{flushSync:he});return}x=new AbortController;let re=uo(t.history,U,x.signal,q&&q.submission),ve;if(q&&q.pendingError)ve=[Cl(de).route.id,{type:Ze.error,error:q.pendingError}];else if(q&&q.submission&&Yn(q.submission.formMethod)){let ge=await Fu(re,U,q.submission,de,{replace:q.replace,flushSync:he});if(ge.shortCircuited)return;ve=ge.pendingActionResult,ie=Af(U,q.submission),he=!1,re=uo(t.history,re.url,re.signal)}let{shortCircuited:we,loaderData:xt,errors:Xe}=await D(re,U,de,ie,q&&q.submission,q&&q.fetcherSubmission,q&&q.replace,q&&q.initialHydration===!0,he,ve);we||(x=null,Ln(U,nt({matches:de},M0(ve),{loaderData:xt,errors:Xe})))}async function Fu(L,U,q,J,ie){ie===void 0&&(ie={}),xe();let de=MP(U,q);Ct({navigation:de},{flushSync:ie.flushSync===!0});let he,re=qp(J,U);if(!re.route.action&&!re.route.lazy)he={type:Ze.error,error:Mn(405,{method:L.method,pathname:U.pathname,routeId:re.route.id})};else if(he=(await W("action",L,[re],J))[0],L.signal.aborted)return{shortCircuited:!0};if(Ts(he)){let ve;return ie&&ie.replace!=null?ve=ie.replace:ve=N0(he.response.headers.get("Location"),new URL(L.url),l)===g.location.pathname+g.location.search,await Y(L,he,{submission:q,replace:ve}),{shortCircuited:!0}}if(Is(he))throw Mn(400,{type:"defer-action"});if(jn(he)){let ve=Cl(J,re.route.id);return(ie&&ie.replace)!==!0&&(v=It.Push),{pendingActionResult:[ve.route.id,he]}}return{pendingActionResult:[re.route.id,he]}}async function D(L,U,q,J,ie,de,he,re,ve,we){let xt=J||Af(U,ie),Xe=ie||de||B0(xt),ge=a||o,[Ke,tt]=b0(t.history,g,q,Xe,U,d.v7_partialHydration&&re===!0,d.unstable_skipActionErrorRevalidation,Ie,$e,Oe,pt,Me,Te,ge,l,we);if(ro(Pe=>!(q&&q.some(Mt=>Mt.route.id===Pe))||Ke&&Ke.some(Mt=>Mt.route.id===Pe)),ce=++oe,Ke.length===0&&tt.length===0){let Pe=si();return Ln(U,nt({matches:q,loaderData:{},errors:we&&jn(we[1])?{[we[0]]:we[1].error}:null},M0(we),Pe?{fetchers:new Map(g.fetchers)}:{}),{flushSync:ve}),{shortCircuited:!0}}if(!me&&(!d.v7_partialHydration||!re)){tt.forEach(Mt=>{let Ft=g.fetchers.get(Mt.key),wt=Qa(void 0,Ft?Ft.data:void 0);g.fetchers.set(Mt.key,wt)});let Pe;we&&!jn(we[1])?Pe={[we[0]]:we[1].data}:g.actionData&&(Object.keys(g.actionData).length===0?Pe=null:Pe=g.actionData),Ct(nt({navigation:xt},Pe!==void 0?{actionData:Pe}:{},tt.length>0?{fetchers:new Map(g.fetchers)}:{}),{flushSync:ve})}tt.forEach(Pe=>{H.has(Pe.key)&&dn(Pe.key),Pe.controller&&H.set(Pe.key,Pe.controller)});let li=()=>tt.forEach(Pe=>dn(Pe.key));x&&x.signal.addEventListener("abort",li);let{loaderResults:On,fetcherResults:Kn}=await le(g.matches,q,Ke,tt,L);if(L.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",li),tt.forEach(Pe=>H.delete(Pe.key));let tn=U0([...On,...Kn]);if(tn){if(tn.idx>=Ke.length){let Pe=tt[tn.idx-Ke.length].key;Te.add(Pe)}return await Y(L,tn.result,{replace:he}),{shortCircuited:!0}}let{loaderData:xr,errors:Tn}=L0(g,q,Ke,On,we,tt,Kn,mt);mt.forEach((Pe,Mt)=>{Pe.subscribe(Ft=>{(Ft||Pe.done)&&mt.delete(Mt)})}),d.v7_partialHydration&&re&&g.errors&&Object.entries(g.errors).filter(Pe=>{let[Mt]=Pe;return!Ke.some(Ft=>Ft.route.id===Mt)}).forEach(Pe=>{let[Mt,Ft]=Pe;Tn=Object.assign(Tn||{},{[Mt]:Ft})});let ui=si(),ci=os(ce),as=ui||ci||tt.length>0;return nt({loaderData:xr,errors:Tn},as?{fetchers:new Map(g.fetchers)}:{})}function j(L,U,q,J){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(L)&&dn(L);let ie=(J&&J.unstable_flushSync)===!0,de=a||o,he=zp(g.location,g.matches,l,d.v7_prependBasename,q,d.v7_relativeSplatPath,U,J==null?void 0:J.relative),re=Lo(de,he,l);if(!re){ke(L,U,Mn(404,{pathname:he}),{flushSync:ie});return}let{path:ve,submission:we,error:xt}=R0(d.v7_normalizeFormMethod,!0,he,J);if(xt){ke(L,U,xt,{flushSync:ie});return}let Xe=qp(re,ve);if(T=(J&&J.preventScrollReset)===!0,we&&Yn(we.formMethod)){$(L,U,ve,Xe,re,ie,we);return}Me.set(L,{routeId:U,path:ve}),ee(L,U,ve,Xe,re,ie,we)}async function $(L,U,q,J,ie,de,he){if(xe(),Me.delete(L),!J.route.action&&!J.route.lazy){let wt=Mn(405,{method:he.formMethod,pathname:q,routeId:U});ke(L,U,wt,{flushSync:de});return}let re=g.fetchers.get(L);_e(L,FP(he,re),{flushSync:de});let ve=new AbortController,we=uo(t.history,q,ve.signal,he);H.set(L,ve);let xt=oe,ge=(await W("action",we,[J],ie))[0];if(we.signal.aborted){H.get(L)===ve&&H.delete(L);return}if(d.v7_fetcherPersist&&pt.has(L)){if(Ts(ge)||jn(ge)){_e(L,vi(void 0));return}}else{if(Ts(ge))if(H.delete(L),ce>xt){_e(L,vi(void 0));return}else return Te.add(L),_e(L,Qa(he)),Y(we,ge,{fetcherSubmission:he});if(jn(ge)){ke(L,U,ge.error);return}}if(Is(ge))throw Mn(400,{type:"defer-action"});let Ke=g.navigation.location||g.location,tt=uo(t.history,Ke,ve.signal),li=a||o,On=g.navigation.state!=="idle"?Lo(li,g.navigation.location,l):g.matches;Se(On,"Didn't find any matches after fetcher action");let Kn=++oe;Re.set(L,Kn);let tn=Qa(he,ge.data);g.fetchers.set(L,tn);let[xr,Tn]=b0(t.history,g,On,he,Ke,!1,d.unstable_skipActionErrorRevalidation,Ie,$e,Oe,pt,Me,Te,li,l,[J.route.id,ge]);Tn.filter(wt=>wt.key!==L).forEach(wt=>{let Pr=wt.key,di=g.fetchers.get(Pr),Ar=Qa(void 0,di?di.data:void 0);g.fetchers.set(Pr,Ar),H.has(Pr)&&dn(Pr),wt.controller&&H.set(Pr,wt.controller)}),Ct({fetchers:new Map(g.fetchers)});let ui=()=>Tn.forEach(wt=>dn(wt.key));ve.signal.addEventListener("abort",ui);let{loaderResults:ci,fetcherResults:as}=await le(g.matches,On,xr,Tn,tt);if(ve.signal.aborted)return;ve.signal.removeEventListener("abort",ui),Re.delete(L),H.delete(L),Tn.forEach(wt=>H.delete(wt.key));let Pe=U0([...ci,...as]);if(Pe){if(Pe.idx>=xr.length){let wt=Tn[Pe.idx-xr.length].key;Te.add(wt)}return Y(tt,Pe.result)}let{loaderData:Mt,errors:Ft}=L0(g,g.matches,xr,ci,void 0,Tn,as,mt);if(g.fetchers.has(L)){let wt=vi(ge.data);g.fetchers.set(L,wt)}os(Kn),g.navigation.state==="loading"&&Kn>ce?(Se(v,"Expected pending action"),x&&x.abort(),Ln(g.navigation.location,{matches:On,loaderData:Mt,errors:Ft,fetchers:new Map(g.fetchers)})):(Ct({errors:Ft,loaderData:O0(g.loaderData,Mt,On,Ft),fetchers:new Map(g.fetchers)}),Ie=!1)}async function ee(L,U,q,J,ie,de,he){let re=g.fetchers.get(L);_e(L,Qa(he,re?re.data:void 0),{flushSync:de});let ve=new AbortController,we=uo(t.history,q,ve.signal);H.set(L,ve);let xt=oe,ge=(await W("loader",we,[J],ie))[0];if(Is(ge)&&(ge=await vE(ge,we.signal,!0)||ge),H.get(L)===ve&&H.delete(L),!we.signal.aborted){if(pt.has(L)){_e(L,vi(void 0));return}if(Ts(ge))if(ce>xt){_e(L,vi(void 0));return}else{Te.add(L),await Y(we,ge);return}if(jn(ge)){ke(L,U,ge.error);return}Se(!Is(ge),"Unhandled fetcher deferred data"),_e(L,vi(ge.data))}}async function Y(L,U,q){let{submission:J,fetcherSubmission:ie,replace:de}=q===void 0?{}:q;U.response.headers.has("X-Remix-Revalidate")&&(Ie=!0);let he=U.response.headers.get("Location");Se(he,"Expected a Location header on the redirect Response"),he=N0(he,new URL(L.url),l);let re=Xl(g.location,he,{_isRedirect:!0});if(n){let Ke=!1;if(U.response.headers.has("X-Remix-Reload-Document"))Ke=!0;else if(Pg.test(he)){const tt=t.history.createURL(he);Ke=tt.origin!==e.location.origin||Gs(tt.pathname,l)==null}if(Ke){de?e.location.replace(he):e.location.assign(he);return}}x=null;let ve=de===!0?It.Replace:It.Push,{formMethod:we,formAction:xt,formEncType:Xe}=g.navigation;!J&&!ie&&we&&xt&&Xe&&(J=B0(g.navigation));let ge=J||ie;if(wP.has(U.response.status)&&ge&&Yn(ge.formMethod))await Hn(ve,re,{submission:nt({},ge,{formAction:he}),preventScrollReset:T});else{let Ke=Af(re,J);await Hn(ve,re,{overrideNavigation:Ke,fetcherSubmission:ie,preventScrollReset:T})}}async function W(L,U,q,J){try{let ie=await AP(c,L,U,q,J,s,i);return await Promise.all(ie.map((de,he)=>{if(VP(de)){let re=de.result;return{type:Ze.redirect,response:kP(re,U,q[he].route.id,J,l,d.v7_relativeSplatPath)}}return bP(de)}))}catch(ie){return q.map(()=>({type:Ze.error,error:ie}))}}async function le(L,U,q,J,ie){let[de,...he]=await Promise.all([q.length?W("loader",ie,q,U):[],...J.map(re=>{if(re.matches&&re.match&&re.controller){let ve=uo(t.history,re.path,re.controller.signal);return W("loader",ve,[re.match],re.matches).then(we=>we[0])}else return Promise.resolve({type:Ze.error,error:Mn(404,{pathname:re.path})})})]);return await Promise.all([j0(L,q,de,de.map(()=>ie.signal),!1,g.loaderData),j0(L,J.map(re=>re.match),he,J.map(re=>re.controller?re.controller.signal:null),!0)]),{loaderResults:de,fetcherResults:he}}function xe(){Ie=!0,$e.push(...ro()),Me.forEach((L,U)=>{H.has(U)&&(Oe.push(U),dn(U))})}function _e(L,U,q){q===void 0&&(q={}),g.fetchers.set(L,U),Ct({fetchers:new Map(g.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function ke(L,U,q,J){J===void 0&&(J={});let ie=Cl(g.matches,U);Sr(L),Ct({errors:{[ie.route.id]:q},fetchers:new Map(g.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function cn(L){return d.v7_fetcherPersist&&(kt.set(L,(kt.get(L)||0)+1),pt.has(L)&&pt.delete(L)),g.fetchers.get(L)||EP}function Sr(L){let U=g.fetchers.get(L);H.has(L)&&!(U&&U.state==="loading"&&Re.has(L))&&dn(L),Me.delete(L),Re.delete(L),Te.delete(L),pt.delete(L),g.fetchers.delete(L)}function ii(L){if(d.v7_fetcherPersist){let U=(kt.get(L)||0)-1;U<=0?(kt.delete(L),pt.add(L)):kt.set(L,U)}else Sr(L);Ct({fetchers:new Map(g.fetchers)})}function dn(L){let U=H.get(L);Se(U,"Expected fetch controller: "+L),U.abort(),H.delete(L)}function ir(L){for(let U of L){let q=cn(U),J=vi(q.data);g.fetchers.set(U,J)}}function si(){let L=[],U=!1;for(let q of Te){let J=g.fetchers.get(q);Se(J,"Expected fetcher: "+q),J.state==="loading"&&(Te.delete(q),L.push(q),U=!0)}return ir(L),U}function os(L){let U=[];for(let[q,J]of Re)if(J<L){let ie=g.fetchers.get(q);Se(ie,"Expected fetcher: "+q),ie.state==="loading"&&(dn(q),Re.delete(q),U.push(q))}return ir(U),U.length>0}function oi(L,U){let q=g.blockers.get(L)||Wa;return _t.get(L)!==U&&_t.set(L,U),q}function Uu(L){g.blockers.delete(L),_t.delete(L)}function to(L,U){let q=g.blockers.get(L)||Wa;Se(q.state==="unblocked"&&U.state==="blocked"||q.state==="blocked"&&U.state==="blocked"||q.state==="blocked"&&U.state==="proceeding"||q.state==="blocked"&&U.state==="unblocked"||q.state==="proceeding"&&U.state==="unblocked","Invalid blocker state transition: "+q.state+" -> "+U.state);let J=new Map(g.blockers);J.set(L,U),Ct({blockers:J})}function no(L){let{currentLocation:U,nextLocation:q,historyAction:J}=L;if(_t.size===0)return;_t.size>1&&ta(!1,"A router only supports one blocker at a time");let ie=Array.from(_t.entries()),[de,he]=ie[ie.length-1],re=g.blockers.get(de);if(!(re&&re.state==="proceeding")&&he({currentLocation:U,nextLocation:q,historyAction:J}))return de}function ro(L){let U=[];return mt.forEach((q,J)=>{(!L||L(J))&&(q.cancel(),U.push(J),mt.delete(J))}),U}function ju(L,U,q){if(_=L,P=U,E=q||null,!N&&g.navigation===Pf){N=!0;let J=io(g.location,g.matches);J!=null&&Ct({restoreScrollPosition:J})}return()=>{_=null,P=null,E=null}}function ai(L,U){return E&&E(L,U.map(J=>uE(J,g.loaderData)))||L.key}function ka(L,U){if(_&&P){let q=ai(L,U);_[q]=P()}}function io(L,U){if(_){let q=ai(L,U),J=_[q];if(typeof J=="number")return J}return null}function Cr(L){s={},a=Bp(L,i,void 0,s)}return F={get basename(){return l},get future(){return d},get state(){return g},get routes(){return o},get window(){return e},initialize:Zs,subscribe:Ir,enableScrollRestoration:ju,navigate:Tr,fetch:j,revalidate:eo,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:cn,deleteFetcher:ii,dispose:ri,getBlocker:oi,deleteBlocker:Uu,_internalFetchControllers:H,_internalActiveDeferreds:mt,_internalSetRoutes:Cr},F}function SP(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function zp(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){c=h;break}}else l=e,c=e[e.length-1];let d=ph(i||".",fh(l,s),Gs(t.pathname,n)||t.pathname,a==="path");return i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Ag(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:$r([n,d.pathname])),Vs(d)}function R0(t,e,n,r){if(!r||!SP(r))return{path:n};if(r.formMethod&&!OP(r.formMethod))return{path:n,error:Mn(405,{method:r.formMethod})};let i=()=>({path:n,error:Mn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=gE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Yn(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,E)=>{let[P,N]=E;return""+_+P+"="+N+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Yn(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}Se(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=$p(r.formData),c=r.formData;else if(r.body instanceof FormData)l=$p(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=V0(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=V0(l)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Yn(d.formMethod))return{path:n,submission:d};let h=es(n);return e&&h.search&&Ag(h.search)&&l.append("index",""),h.search="?"+l,{path:Vs(h),submission:d}}function CP(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function b0(t,e,n,r,i,s,o,a,l,c,d,h,p,_,E,P){let N=P?jn(P[1])?P[1].error:P[1].data:void 0,S=t.createURL(e.location),y=t.createURL(i),I=P&&jn(P[1])?P[0]:void 0,k=I?CP(n,I):n,V=P?P[1].statusCode:void 0,F=o&&V&&V>=400,g=k.filter((T,x)=>{let{route:A}=T;if(A.lazy)return!0;if(A.loader==null)return!1;if(s)return typeof A.loader!="function"||A.loader.hydrate?!0:e.loaderData[A.id]===void 0&&(!e.errors||e.errors[A.id]===void 0);if(xP(e.loaderData,e.matches[x],T)||l.some(me=>me===T.route.id))return!0;let b=e.matches[x],C=T;return k0(T,nt({currentUrl:S,currentParams:b.params,nextUrl:y,nextParams:C.params},r,{actionResult:N,unstable_actionStatus:V,defaultShouldRevalidate:F?!1:a||S.pathname+S.search===y.pathname+y.search||S.search!==y.search||mE(b,C)}))}),v=[];return h.forEach((T,x)=>{if(s||!n.some(Ie=>Ie.route.id===T.routeId)||d.has(x))return;let A=Lo(_,T.path,E);if(!A){v.push({key:x,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let b=e.fetchers.get(x),C=qp(A,T.path),me=!1;p.has(x)?me=!1:c.includes(x)?me=!0:b&&b.state!=="idle"&&b.data===void 0?me=a:me=k0(C,nt({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:N,unstable_actionStatus:V,defaultShouldRevalidate:F?!1:a})),me&&v.push({key:x,routeId:T.routeId,path:T.path,matches:A,match:C,controller:new AbortController})}),[g,v]}function xP(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function mE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function k0(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function D0(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Se(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ta(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Jx.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,nt({},e(i),{lazy:void 0}))}function PP(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function AP(t,e,n,r,i,s,o,a){let l=r.reduce((h,p)=>h.add(p.route.id),new Set),c=new Set,d=await t({matches:i.map(h=>{let p=l.has(h.route.id);return nt({},h,{shouldLoad:p,resolve:E=>(c.add(h.route.id),p?RP(e,n,h,s,o,E,a):Promise.resolve({type:Ze.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(h=>Se(c.has(h.route.id),'`match.resolve()` was not called for route id "'+h.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((h,p)=>l.has(i[p].route.id))}async function RP(t,e,n,r,i,s,o){let a,l,c=d=>{let h,p=new Promise((P,N)=>h=N);l=()=>h(),e.signal.addEventListener("abort",l);let _=P=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):d({request:e,params:n.params,context:o},...P!==void 0?[P]:[]),E;return s?E=s(P=>_(P)):E=(async()=>{try{return{type:"data",result:await _()}}catch(P){return{type:"error",result:P}}})(),Promise.race([E,p])};try{let d=n.route[t];if(n.route.lazy)if(d){let h,[p]=await Promise.all([c(d).catch(_=>{h=_}),D0(n.route,i,r)]);if(h!==void 0)throw h;a=p}else if(await D0(n.route,i,r),d=n.route[t],d)a=await c(d);else if(t==="action"){let h=new URL(e.url),p=h.pathname+h.search;throw Mn(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Ze.data,result:void 0};else if(d)a=await c(d);else{let h=new URL(e.url),p=h.pathname+h.search;throw Mn(404,{pathname:p})}Se(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Ze.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function bP(t){let{result:e,type:n,status:r}=t;if(yE(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Ze.error,error:a}}return n===Ze.error?{type:Ze.error,error:new Cg(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Ze.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Ze.error)return{type:Ze.error,error:e,statusCode:xg(e)?e.status:r};if(LP(e)){var i,s;return{type:Ze.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Ze.data,data:e,statusCode:r}}function kP(t,e,n,r,i,s){let o=t.headers.get("Location");if(Se(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Pg.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=zp(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function N0(t,e,n){if(Pg.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Gs(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function uo(t,e,n,r){let i=t.createURL(gE(e)).toString(),s={signal:n};if(r&&Yn(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=$p(r.formData):s.body=r.formData}return new Request(i,s)}function $p(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function V0(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function DP(t,e,n,r,i,s){let o={},a=null,l,c=!1,d={},h=r&&jn(r[1])?r[1].error:void 0;return n.forEach((p,_)=>{let E=e[_].route.id;if(Se(!Ts(p),"Cannot handle redirect results in processLoaderData"),jn(p)){let P=p.error;h!==void 0&&(P=h,h=void 0),a=a||{};{let N=Cl(t,E);a[N.route.id]==null&&(a[N.route.id]=P)}o[E]=void 0,c||(c=!0,l=xg(p.error)?p.error.status:500),p.headers&&(d[E]=p.headers)}else Is(p)?(i.set(E,p.deferredData),o[E]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[E]=p.headers)):(o[E]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(d[E]=p.headers))}),h!==void 0&&r&&(a={[r[0]]:h},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:d}}function L0(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=DP(e,n,r,i,a);for(let d=0;d<s.length;d++){let{key:h,match:p,controller:_}=s[d];Se(o!==void 0&&o[d]!==void 0,"Did not find corresponding fetcher result");let E=o[d];if(!(_&&_.signal.aborted))if(jn(E)){let P=Cl(t.matches,p==null?void 0:p.route.id);c&&c[P.route.id]||(c=nt({},c,{[P.route.id]:E.error})),t.fetchers.delete(h)}else if(Ts(E))Se(!1,"Unhandled fetcher revalidation redirect");else if(Is(E))Se(!1,"Unhandled fetcher deferred data");else{let P=vi(E.data);t.fetchers.set(h,P)}}return{loaderData:l,errors:c}}function O0(t,e,n,r){let i=nt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function M0(t){return t?jn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Cl(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function F0(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Mn(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new Cg(t||500,o,new Error(a),!0)}function U0(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Ts(n))return{result:n,idx:e}}}function gE(t){let e=typeof t=="string"?es(t):t;return Vs(nt({},e,{hash:""}))}function NP(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function VP(t){return yE(t.result)&&_P.has(t.result.status)}function Is(t){return t.type===Ze.deferred}function jn(t){return t.type===Ze.error}function Ts(t){return(t&&t.type)===Ze.redirect}function LP(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function yE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function OP(t){return vP.has(t.toLowerCase())}function Yn(t){return gP.has(t.toLowerCase())}async function j0(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(h=>h.route.id===l.route.id),d=c!=null&&!mE(c,l)&&(s&&s[l.route.id])!==void 0;if(Is(a)&&(i||d)){let h=r[o];Se(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await vE(a,h,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function vE(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ze.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ze.error,error:i}}return{type:Ze.data,data:t.deferredData.data}}}function Ag(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function qp(t,e){let n=typeof e=="string"?es(e).search:e.search;if(t[t.length-1].route.index&&Ag(n||""))return t[t.length-1];let r=hE(t);return r[r.length-1]}function B0(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Af(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function MP(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Qa(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function FP(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function vi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function UP(t,e){try{let n=t.sessionStorage.getItem(pE);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function jP(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(pE,JSON.stringify(n))}catch(r){ta(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Id(){return Id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Id.apply(this,arguments)}const wu=B.createContext(null),Rg=B.createContext(null),Zr=B.createContext(null),bg=B.createContext(null),wr=B.createContext({outlet:null,matches:[],isDataRoute:!1}),_E=B.createContext(null);function BP(t,e){let{relative:n}=e===void 0?{}:e;Ea()||Se(!1);let{basename:r,navigator:i}=B.useContext(Zr),{hash:s,pathname:o,search:a}=EE(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:$r([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ea(){return B.useContext(bg)!=null}function Ws(){return Ea()||Se(!1),B.useContext(bg).location}function wE(t){B.useContext(Zr).static||B.useLayoutEffect(t)}function Ia(){let{isDataRoute:t}=B.useContext(wr);return t?nA():zP()}function zP(){Ea()||Se(!1);let t=B.useContext(wu),{basename:e,future:n,navigator:r}=B.useContext(Zr),{matches:i}=B.useContext(wr),{pathname:s}=Ws(),o=JSON.stringify(fh(i,n.v7_relativeSplatPath)),a=B.useRef(!1);return wE(()=>{a.current=!0}),B.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=ph(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:$r([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}const $P=B.createContext(null);function qP(t){let e=B.useContext(wr).outlet;return e&&B.createElement($P.Provider,{value:t},e)}function mh(){let{matches:t}=B.useContext(wr),e=t[t.length-1];return e?e.params:{}}function EE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=B.useContext(Zr),{matches:i}=B.useContext(wr),{pathname:s}=Ws(),o=JSON.stringify(fh(i,r.v7_relativeSplatPath));return B.useMemo(()=>ph(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function HP(t,e,n,r){Ea()||Se(!1);let{navigator:i}=B.useContext(Zr),{matches:s}=B.useContext(wr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ws(),d;d=c;let h=d.pathname||"/",p=h;if(l!=="/"){let P=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(P.length).join("/")}let _=Lo(t,{pathname:p});return JP(_&&_.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:$r([l,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?l:$r([l,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r)}function KP(){let t=tA(),e=xg(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),n?B.createElement("pre",{style:i},n):null,null)}const GP=B.createElement(KP,null);class WP extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?B.createElement(wr.Provider,{value:this.props.routeContext},B.createElement(_E.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QP(t){let{routeContext:e,match:n,children:r}=t,i=B.useContext(wu);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(wr.Provider,{value:e},r)}function JP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Se(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:_}=n,E=h.route.loader&&p[h.route.id]===void 0&&(!_||_[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let _,E=!1,P=null,N=null;n&&(_=a&&h.route.id?a[h.route.id]:void 0,P=h.route.errorElement||GP,l&&(c<0&&p===0?(E=!0,N=null):c===p&&(E=!0,N=h.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,p+1)),y=()=>{let I;return _?I=P:E?I=N:h.route.Component?I=B.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,B.createElement(QP,{match:h,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?B.createElement(WP,{location:n.location,revalidation:n.revalidation,component:P,error:_,children:y(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):y()},null)}var IE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(IE||{}),na=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(na||{});function YP(t){let e=B.useContext(wu);return e||Se(!1),e}function kg(t){let e=B.useContext(Rg);return e||Se(!1),e}function XP(t){let e=B.useContext(wr);return e||Se(!1),e}function TE(t){let e=XP(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function ZP(){return kg(na.UseNavigation).navigation}function eA(){let{matches:t,loaderData:e}=kg(na.UseMatches);return B.useMemo(()=>t.map(n=>uE(n,e)),[t,e])}function tA(){var t;let e=B.useContext(_E),n=kg(na.UseRouteError),r=TE(na.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nA(){let{router:t}=YP(IE.UseNavigateStable),e=TE(na.UseNavigateStable),n=B.useRef(!1);return wE(()=>{n.current=!0}),B.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Id({fromRouteId:e},s)))},[t,e])}function SE(t){let{to:e,replace:n,state:r,relative:i}=t;Ea()||Se(!1);let{future:s,static:o}=B.useContext(Zr),{matches:a}=B.useContext(wr),{pathname:l}=Ws(),c=Ia(),d=ph(e,fh(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return B.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function rA(t){return qP(t.context)}function iA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=It.Pop,navigator:s,static:o=!1,future:a}=t;Ea()&&Se(!1);let l=e.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:l,navigator:s,static:o,future:Id({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=es(r));let{pathname:d="/",search:h="",hash:p="",state:_=null,key:E="default"}=r,P=B.useMemo(()=>{let N=Gs(d,l);return N==null?null:{location:{pathname:N,search:h,hash:p,state:_,key:E},navigationType:i}},[l,d,h,p,_,E,i]);return P==null?null:B.createElement(Zr.Provider,{value:c},B.createElement(bg.Provider,{children:n,value:P}))}new Promise(()=>{});function sA(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:B.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:B.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:B.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ra(){return ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ra.apply(this,arguments)}function oA(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function aA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lA(t,e){return t.button===0&&(!e||e==="_self")&&!aA(t)}const uA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],cA="6";try{window.__reactRouterVersion=cA}catch{}function dA(t,e){return TP({basename:void 0,future:ra({},void 0,{v7_prependBasename:!0}),history:Gx({window:void 0}),hydrationData:hA(),routes:t,mapRouteProperties:sA,unstable_dataStrategy:void 0,window:void 0}).initialize()}function hA(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=ra({},e,{errors:fA(e.errors)})),e}function fA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Cg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const pA=B.createContext({isTransitioning:!1}),mA=B.createContext(new Map),gA="startTransition",z0=V4[gA],yA="flushSync",$0=Kx[yA];function vA(t){z0?z0(t):t()}function Ja(t){$0?$0(t):t()}let _A=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function wA(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=B.useState(n.state),[o,a]=B.useState(),[l,c]=B.useState({isTransitioning:!1}),[d,h]=B.useState(),[p,_]=B.useState(),[E,P]=B.useState(),N=B.useRef(new Map),{v7_startTransition:S}=r||{},y=B.useCallback(g=>{S?vA(g):g()},[S]),I=B.useCallback((g,v)=>{let{deletedFetchers:T,unstable_flushSync:x,unstable_viewTransitionOpts:A}=v;T.forEach(C=>N.current.delete(C)),g.fetchers.forEach((C,me)=>{C.data!==void 0&&N.current.set(me,C.data)});let b=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!A||b){x?Ja(()=>s(g)):y(()=>s(g));return}if(x){Ja(()=>{p&&(d&&d.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:A.currentLocation,nextLocation:A.nextLocation})});let C=n.window.document.startViewTransition(()=>{Ja(()=>s(g))});C.finished.finally(()=>{Ja(()=>{h(void 0),_(void 0),a(void 0),c({isTransitioning:!1})})}),Ja(()=>_(C));return}p?(d&&d.resolve(),p.skipTransition(),P({state:g,currentLocation:A.currentLocation,nextLocation:A.nextLocation})):(a(g),c({isTransitioning:!0,flushSync:!1,currentLocation:A.currentLocation,nextLocation:A.nextLocation}))},[n.window,p,d,N,y]);B.useLayoutEffect(()=>n.subscribe(I),[n,I]),B.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new _A)},[l]),B.useEffect(()=>{if(d&&o&&n.window){let g=o,v=d.promise,T=n.window.document.startViewTransition(async()=>{y(()=>s(g)),await v});T.finished.finally(()=>{h(void 0),_(void 0),a(void 0),c({isTransitioning:!1})}),_(T)}},[y,o,d,n.window]),B.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,p,i.location,o]),B.useEffect(()=>{!l.isTransitioning&&E&&(a(E.state),c({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}),P(void 0))},[l.isTransitioning,E]),B.useEffect(()=>{},[]);let k=B.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,v,T)=>n.navigate(g,{state:v,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(g,v,T)=>n.navigate(g,{replace:!0,state:v,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[n]),V=n.basename||"/",F=B.useMemo(()=>({router:n,navigator:k,static:!1,basename:V}),[n,k,V]);return B.createElement(B.Fragment,null,B.createElement(wu.Provider,{value:F},B.createElement(Rg.Provider,{value:i},B.createElement(mA.Provider,{value:N.current},B.createElement(pA.Provider,{value:l},B.createElement(iA,{basename:V,location:i.location,navigationType:i.historyAction,navigator:k,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?B.createElement(EA,{routes:n.routes,future:n.future,state:i}):e))))),null)}function EA(t){let{routes:e,future:n,state:r}=t;return HP(e,void 0,r,n)}const IA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qr=B.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,unstable_viewTransition:h}=e,p=oA(e,uA),{basename:_}=B.useContext(Zr),E,P=!1;if(typeof c=="string"&&TA.test(c)&&(E=c,IA))try{let I=new URL(window.location.href),k=c.startsWith("//")?new URL(I.protocol+c):new URL(c),V=Gs(k.pathname,_);k.origin===I.origin&&V!=null?c=V+k.search+k.hash:P=!0}catch{}let N=BP(c,{relative:i}),S=PA(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:h});function y(I){r&&r(I),I.defaultPrevented||S(I)}return B.createElement("a",ra({},p,{href:E||N,onClick:P||s?r:y,ref:n,target:l}))});function SA(t){let{getKey:e,storageKey:n}=t;return AA({getKey:e,storageKey:n}),null}var Hp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hp||(Hp={}));var Kp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Kp||(Kp={}));function CA(t){let e=B.useContext(wu);return e||Se(!1),e}function xA(t){let e=B.useContext(Rg);return e||Se(!1),e}function PA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Ia(),c=Ws(),d=EE(t,{relative:o});return B.useCallback(h=>{if(lA(h,n)){h.preventDefault();let p=r!==void 0?r:Vs(c)===Vs(d);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}const q0="react-router-scroll-positions";let pc={};function AA(t){let{getKey:e,storageKey:n}=t===void 0?{}:t,{router:r}=CA(Hp.UseScrollRestoration),{restoreScrollPosition:i,preventScrollReset:s}=xA(Kp.UseScrollRestoration),{basename:o}=B.useContext(Zr),a=Ws(),l=eA(),c=ZP();B.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),RA(B.useCallback(()=>{if(c.state==="idle"){let d=(e?e(a,l):null)||a.key;pc[d]=window.scrollY}try{sessionStorage.setItem(n||q0,JSON.stringify(pc))}catch{}window.history.scrollRestoration="auto"},[n,e,c.state,a,l])),typeof document<"u"&&(B.useLayoutEffect(()=>{try{let d=sessionStorage.getItem(n||q0);d&&(pc=JSON.parse(d))}catch{}},[n]),B.useLayoutEffect(()=>{let d=e&&o!=="/"?(p,_)=>e(ra({},p,{pathname:Gs(p.pathname,o)||p.pathname}),_):e,h=r==null?void 0:r.enableScrollRestoration(pc,()=>window.scrollY,d);return()=>h&&h()},[r,o,e]),B.useLayoutEffect(()=>{if(i!==!1){if(typeof i=="number"){window.scrollTo(0,i);return}if(a.hash){let d=document.getElementById(decodeURIComponent(a.hash.slice(1)));if(d){d.scrollIntoView();return}}s!==!0&&window.scrollTo(0,0)}},[a,i,s]))}function RA(t,e){let{capture:n}={};B.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",t,r),()=>{window.removeEventListener("pagehide",t,r)}},[t,n])}const vt="/geekstore",bA={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let kA=class Gp{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||bA,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Gp(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Gp(this.logger,e)}};var ur=new kA;class gh{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[e,...r])})}}function Ya(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function H0(t){return t==null?"":""+t}function DA(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const NA=/###/g;function xl(t,e,n){function r(a){return a&&a.indexOf("###")>-1?a.replace(NA,"."):a}function i(){return!t||typeof t=="string"}const s=typeof e!="string"?e:e.split(".");let o=0;for(;o<s.length-1;){if(i())return{};const a=r(s[o]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++o}return i()?{}:{obj:t,k:r(s[o])}}function K0(t,e,n){const{obj:r,k:i}=xl(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=xl(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=xl(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n}function VA(t,e,n,r){const{obj:i,k:s}=xl(t,e,Object);i[s]=i[s]||[],i[s].push(n)}function Td(t,e){const{obj:n,k:r}=xl(t,e);if(n)return n[r]}function LA(t,e,n){const r=Td(t,n);return r!==void 0?r:Td(e,n)}function CE(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):CE(t[r],e[r],n):t[r]=e[r]);return t}function co(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var OA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function MA(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>OA[e]):t}class FA{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const UA=[" ",",","?","!",";"],jA=new FA(20);function BA(t,e,n){e=e||"",n=n||"";const r=UA.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=jA.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s}function Wp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i}function Sd(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class G0 extends gh{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):typeof r=="string"&&s?a.push(...r.split(s)):a.push(r)));const l=Td(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||typeof r!="string"?l:Wp(this.data&&this.data[e]&&this.data[e][n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),K0(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(typeof r[s]=="string"||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=Td(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?CE(l,r,s):l={...l,...r},K0(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var xE={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,r,i))}),e}};const W0={};class Cd extends gh{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),DA(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ur.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!BA(e,r,i);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return typeof s=="string"&&(s=[s]),{key:e,namespaces:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],c=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(d){const k=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${k}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${k}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const h=this.resolve(e,n);let p=h&&h.res;const _=h&&h.usedKey||o,E=h&&h.exactUsedKey||o,P=Object.prototype.toString.apply(p),N=["[object Number]","[object Function]","[object RegExp]"],S=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&p&&(typeof p!="string"&&typeof p!="boolean"&&typeof p!="number")&&N.indexOf(P)<0&&!(typeof S=="string"&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(_,p,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(h.res=k,h.usedParams=this.getUsedParamsDetails(n),h):k}if(s){const k=Array.isArray(p),V=k?[]:{},F=k?E:_;for(const g in p)if(Object.prototype.hasOwnProperty.call(p,g)){const v=`${F}${s}${g}`;V[g]=this.translate(v,{...n,joinArrays:!1,ns:a}),V[g]===v&&(V[g]=p[g])}p=V}}else if(y&&typeof S=="string"&&Array.isArray(p))p=p.join(S),p&&(p=this.extendTranslation(p,e,n,r));else{let k=!1,V=!1;const F=n.count!==void 0&&typeof n.count!="string",g=Cd.hasDefaultValue(n),v=F?this.pluralResolver.getSuffix(c,n.count,n):"",T=n.ordinal&&F?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",x=F&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),A=x&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${v}`]||n[`defaultValue${T}`]||n.defaultValue;!this.isValidLookup(p)&&g&&(k=!0,p=A),this.isValidLookup(p)||(V=!0,p=o);const C=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&V?void 0:p,me=g&&A!==p&&this.options.updateMissing;if(V||k||me){if(this.logger.log(me?"updateKey":"missingKey",c,l,o,me?A:p),s){const H=this.resolve(o,{...n,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ie=[];const $e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$e&&$e[0])for(let H=0;H<$e.length;H++)Ie.push($e[H]);else this.options.saveMissingTo==="all"?Ie=this.languageUtils.toResolveHierarchy(n.lng||this.language):Ie.push(n.lng||this.language);const Oe=(H,oe,ce)=>{const Re=g&&ce!==p?ce:C;this.options.missingKeyHandler?this.options.missingKeyHandler(H,l,oe,Re,me,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(H,l,oe,Re,me,n),this.emit("missingKey",H,l,oe,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&F?Ie.forEach(H=>{const oe=this.pluralResolver.getSuffixes(H,n);x&&n[`defaultValue${this.options.pluralSeparator}zero`]&&oe.indexOf(`${this.options.pluralSeparator}zero`)<0&&oe.push(`${this.options.pluralSeparator}zero`),oe.forEach(ce=>{Oe([H],o+ce,n[`defaultValue${ce}`]||A)})}):Oe(Ie,o,A))}p=this.extendTranslation(p,e,n,h,r),V&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}:${o}`),(V||k)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,k?p:void 0):p=this.options.parseMissingKeyHandler(p))}return i?(h.res=p,h.usedParams=this.getUsedParamsDetails(n),h):p}extendTranslation(e,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let h=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language,r),c){const p=e.match(this.interpolator.nestingRegexp),_=p&&p.length;d<_&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,_=new Array(p),E=0;E<p;E++)_[E]=arguments[E];return s&&s[0]===_[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${_[0]} in key: ${n[0]}`),null):o.translate(..._,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=typeof a=="string"?[a]:a;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=xE.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,a;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),d=c.key;i=d;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=n.count!==void 0&&typeof n.count!="string",_=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),E=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",P=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(N=>{this.isValidLookup(r)||(a=N,!W0[`${P[0]}-${N}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(W0[`${P[0]}-${N}`]=!0,this.logger.warn(`key "${i}" for languages "${P.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),P.forEach(S=>{if(this.isValidLookup(r))return;o=S;const y=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,d,S,N,n);else{let k;p&&(k=this.pluralResolver.getSuffix(S,n.count,n));const V=`${this.options.pluralSeparator}zero`,F=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(y.push(d+k),n.ordinal&&k.indexOf(F)===0&&y.push(d+k.replace(F,this.options.pluralSeparator)),_&&y.push(d+V)),E){const g=`${d}${this.options.contextSeparator}${n.context}`;y.push(g),p&&(y.push(g+k),n.ordinal&&k.indexOf(F)===0&&y.push(g+k.replace(F,this.options.pluralSeparator)),_&&y.push(g+V))}}let I;for(;I=y.pop();)this.isValidLookup(r)||(s=I,r=this.getResource(S,N,I,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function Rf(t){return t.charAt(0).toUpperCase()+t.slice(1)}class Q0{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ur.create("languageUtils")}getScriptPartFromCode(e){if(e=Sd(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Sd(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Rf(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Rf(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Rf(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):typeof e=="string"&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let zA=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],$A={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const qA=["v1","v2","v3"],HA=["v4"],J0={zero:0,one:1,two:2,few:3,many:4,other:5};function KA(){const t={};return zA.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:$A[e.fc]}})}),t}class GA{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=ur.create("pluralResolver"),(!this.options.compatibilityJSON||HA.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=KA()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Sd(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>J0[i]-J0[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!qA.includes(this.options.compatibilityJSON)}}function Y0(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=LA(t,e,n);return!s&&i&&typeof n=="string"&&(s=Wp(t,n,r),s===void 0&&(s=Wp(e,n,r))),s}class WA{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ur.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:_,nestingSuffix:E,nestingSuffixEscaped:P,nestingOptionsSeparator:N,maxReplaces:S,alwaysFormat:y}=e.interpolation;this.escape=n!==void 0?n:MA,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?co(s):o||"{{",this.suffix=a?co(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?co(p):_||co("$t("),this.nestingSuffix=E?co(E):P||co(")"),this.nestingOptionsSeparator=N||",",this.maxReplaces=S||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(E){return E.replace(/\$/g,"$$$$")}const d=E=>{if(E.indexOf(this.formatSeparator)<0){const y=Y0(n,l,E,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...i,...n,interpolationkey:E}):y}const P=E.split(this.formatSeparator),N=P.shift().trim(),S=P.join(this.formatSeparator).trim();return this.format(Y0(n,l,N,this.options.keySeparator,this.options.ignoreJSONStructure),S,r,{...i,...n,interpolationkey:N})};this.resetRegExp();const h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:E=>c(E)},{regex:this.regexp,safeValue:E=>this.escapeValue?c(this.escape(E)):c(E)}].forEach(E=>{for(a=0;s=E.regex.exec(e);){const P=s[1].trim();if(o=d(P),o===void 0)if(typeof h=="function"){const S=h(e,s,i);o=typeof S=="string"?S:""}else if(i&&Object.prototype.hasOwnProperty.call(i,P))o="";else if(p){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${P} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=H0(o));const N=E.safeValue(o);if(e=e.replace(s[0],N),p?(E.regex.lastIndex+=o.length,E.regex.lastIndex-=s[0].length):E.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;function a(l,c){const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const h=l.split(new RegExp(`${d}[ ]*{`));let p=`{${h[1]}`;l=h[0],p=this.interpolate(p,o);const _=p.match(/'/g),E=p.match(/"/g);(_&&_.length%2===0&&!E||E.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),c&&(o={...c,...o})}catch(P){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,P),`${l}${d}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l}for(;i=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const d=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=d.shift(),l=d,c=!0}if(s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&typeof s!="string")return s;typeof s!="string"&&(s=H0(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c&&(s=l.reduce((d,h)=>this.format(d,h,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}function QA(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),d=a.trim();n[d]||(n[d]=c),c==="false"&&(n[d]=!1),c==="true"&&(n[d]=!0),isNaN(c)||(n[d]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}}function ho(t){const e={};return function(r,i,s){const o=i+JSON.stringify(s);let a=e[o];return a||(a=t(Sd(i),s),e[o]=a),a(r)}}class JA{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ur.create("formatter"),this.options=e,this.formats={number:ho((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:ho((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:ho((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:ho((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:ho((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=ho(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((a,l)=>{const{formatName:c,formatOptions:d}=QA(l);if(this.formats[c]){let h=a;try{const p=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},_=p.locale||p.lng||i.locale||i.lng||r;h=this.formats[c](a,_,{...d,...i,...p})}catch(p){this.logger.warn(p)}return h}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}function YA(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class XA extends gh{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ur.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},l={};return e.forEach(c=>{let d=!0;n.forEach(h=>{const p=`${c}|${h}`;!r.reload&&this.store.hasResourceBundle(c,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,d=!1,o[p]===void 0&&(o[p]=!0),s[p]===void 0&&(s[p]=!0),l[h]===void 0&&(l[h]=!0)))}),d||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const a={};this.queue.forEach(l=>{VA(l.loaded,[s],o),YA(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const d=l.loaded[c];d.length&&d.forEach(h=>{a[c][h]===void 0&&(a[c][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(c,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(d=>a(null,d)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let d;c.length===5?d=c(e,n,r,i,l):d=c(e,n,r,i),d&&typeof d.then=="function"?d.then(h=>a(null,h)).catch(a):a(null,d)}catch(d){a(d)}else c(e,n,r,i,a,l)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}function X0(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let n={};if(typeof e[1]=="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(i=>{n[i]=r[i]})}return n},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Z0(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function mc(){}function ZA(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}class Zl extends gh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Z0(e),this.services={},this.logger=ur,this.modules={external:[]},ZA(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=X0();this.options={...i,...this.options,...Z0(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function s(d){return d?typeof d=="function"?new d:d:null}if(!this.options.isClone){this.modules.logger?ur.init(s(this.modules.logger),this.options):ur.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=JA);const h=new Q0(this.options);this.store=new G0(this.options.resources,this.options);const p=this.services;p.logger=ur,p.resourceStore=this.store,p.languageUtils=h,p.pluralResolver=new GA(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(p.formatter=s(d),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new WA(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new XA(s(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(_){for(var E=arguments.length,P=new Array(E>1?E-1:0),N=1;N<E;N++)P[N-1]=arguments[N];e.emit(_,...P)}),this.modules.languageDetector&&(p.languageDetector=s(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=s(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new Cd(this.services,this.options),this.translator.on("*",function(_){for(var E=arguments.length,P=new Array(E>1?E-1:0),N=1;N<E;N++)P[N-1]=arguments[N];e.emit(_,...P)}),this.modules.external.forEach(_=>{_.init&&_.init(this)})}if(this.format=this.options.interpolation.format,r||(r=mc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const l=Ya(),c=()=>{const d=(h,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),r(h,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mc;const i=typeof e=="string"?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const i=Ya();return e||(e=this.languages),n||(n=this.options.ns),r||(r=mc),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&xE.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=Ya();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,d=>{o(d,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),i}getFixedT(e,n,r){var i=this;const s=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,d=new Array(c>2?c-2:0),h=2;h<c;h++)d[h-2]=arguments[h];l=i.options.overloadTranslationOptionHandler([o,a].concat(d))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix=l.keyPrefix||r||s.keyPrefix;const p=i.options.keySeparator||".";let _;return l.keyPrefix&&Array.isArray(o)?_=o.map(E=>`${l.keyPrefix}${p}${E}`):_=l.keyPrefix?`${l.keyPrefix}${p}${o}`:o,i.t(_,l)};return typeof e=="string"?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=Ya();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Ya();typeof e=="string"&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new Q0(X0());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Zl(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mc;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Zl(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new G0(this.store.data,i),s.services.resourceStore=s.store),s.translator=new Cd(s.services,i),s.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];s.emit(a,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ft=Zl.createInstance();ft.createInstance=Zl.createInstance;ft.createInstance;ft.dir;ft.init;ft.loadResources;ft.reloadResources;ft.use;ft.changeLanguage;ft.getFixedT;const eu=ft.t;ft.exists;ft.setDefaultNamespace;ft.hasLoadedNamespace;ft.loadNamespaces;ft.loadLanguages;const PE=t=>{const e="GeekStore";let n="";for(const[i,s]of Object.entries(t))if(s){n=i.replace("is","").replace("Route","").replace(/[A-Z]/g,o=>"-"+o.toLowerCase()).replace(/^[-]/,"").toLowerCase();break}n||(n="not-found"),document.title+=` | ${ft.t(`routes.${n}`)}`;const r=()=>{document.title!==e&&(document.title=e),PE(t)};return ft.on("languageChanged",r),()=>{document.title=e,ft.off("languageChanged",r)}},AE=t=>{const e=setTimeout(()=>t(!1),3e3);return()=>clearTimeout(e)},ev={en:"English",pt:"Portugus"},eR=(t,e)=>{ft.language!==t&&(ft.changeLanguage(t),e(!0),AE(e))};var tv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(p=64)),r.push(n[d],n[h],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new nR;const p=s<<2|a>>4;if(r.push(p),c!==64){const _=a<<4&240|c>>2;if(r.push(_),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rR=function(t){const e=RE(t);return bE.encodeByteArray(e,!0)},kE=function(t){return rR(t).replace(/\./g,"")},DE=function(t){try{return bE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=()=>iR().__FIREBASE_DEFAULTS__,oR=()=>{if(typeof process>"u"||typeof tv>"u")return;const t=tv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DE(t[1]);return e&&JSON.parse(e)},yh=()=>{try{return sR()||oR()||aR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lR=t=>{var e,n;return(n=(e=yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},NE=()=>{var t;return(t=yh())===null||t===void 0?void 0:t.config},VE=t=>{var e;return(e=yh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function dR(){var t;const e=(t=yh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pR(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LE(){return!dR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OE(){try{return typeof indexedDB=="object"}catch{return!1}}function mR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="FirebaseError";class ei extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gR,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eu.prototype.create)}}class Eu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ei(i,a,r)}}function yR(t,e){return t.replace(vR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vR=/\{\$([^}]+)}/g;function _R(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(nv(s)&&nv(o)){if(!tu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function nv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ul(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function cl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function wR(t,e){const n=new ER(t,e);return n.subscribe.bind(n)}class ER{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=bf),i.error===void 0&&(i.error=bf),i.complete===void 0&&(i.complete=bf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){return t&&t._delegate?t._delegate:t}class Ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CR(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(t){return t===fs?void 0:t}function CR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const PR={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},AR=be.INFO,RR={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},bR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=RR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dg{constructor(e){this.name=e,this._logLevel=AR,this._logHandler=bR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const kR=(t,e)=>e.some(n=>t instanceof n);let rv,iv;function DR(){return rv||(rv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NR(){return iv||(iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ME=new WeakMap,Qp=new WeakMap,FE=new WeakMap,kf=new WeakMap,Ng=new WeakMap;function VR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ji(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ME.set(n,t)}).catch(()=>{}),Ng.set(e,t),e}function LR(t){if(Qp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qp.set(t,e)}let Jp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OR(t){Jp=t(Jp)}function MR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Df(this),e,...n);return FE.set(r,e.sort?e.sort():[e]),ji(r)}:NR().includes(t)?function(...e){return t.apply(Df(this),e),ji(ME.get(this))}:function(...e){return ji(t.apply(Df(this),e))}}function FR(t){return typeof t=="function"?MR(t):(t instanceof IDBTransaction&&LR(t),kR(t,DR())?new Proxy(t,Jp):t)}function ji(t){if(t instanceof IDBRequest)return VR(t);if(kf.has(t))return kf.get(t);const e=FR(t);return e!==t&&(kf.set(t,e),Ng.set(e,t)),e}const Df=t=>Ng.get(t);function UR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ji(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ji(o.result),l.oldVersion,l.newVersion,ji(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const jR=["get","getKey","getAll","getAllKeys","count"],BR=["put","add","delete","clear"],Nf=new Map;function sv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=BR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Nf.set(e,s),s}OR(t=>({...t,get:(e,n,r)=>sv(e,n)||t.get(e,n,r),has:(e,n)=>!!sv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($R(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $R(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yp="@firebase/app",ov="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Dg("@firebase/app"),qR="@firebase/app-compat",HR="@firebase/analytics-compat",KR="@firebase/analytics",GR="@firebase/app-check-compat",WR="@firebase/app-check",QR="@firebase/auth",JR="@firebase/auth-compat",YR="@firebase/database",XR="@firebase/database-compat",ZR="@firebase/functions",e3="@firebase/functions-compat",t3="@firebase/installations",n3="@firebase/installations-compat",r3="@firebase/messaging",i3="@firebase/messaging-compat",s3="@firebase/performance",o3="@firebase/performance-compat",a3="@firebase/remote-config",l3="@firebase/remote-config-compat",u3="@firebase/storage",c3="@firebase/storage-compat",d3="@firebase/firestore",h3="@firebase/vertexai-preview",f3="@firebase/firestore-compat",p3="firebase",m3="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="[DEFAULT]",g3={[Yp]:"fire-core",[qR]:"fire-core-compat",[KR]:"fire-analytics",[HR]:"fire-analytics-compat",[WR]:"fire-app-check",[GR]:"fire-app-check-compat",[QR]:"fire-auth",[JR]:"fire-auth-compat",[YR]:"fire-rtdb",[XR]:"fire-rtdb-compat",[ZR]:"fire-fn",[e3]:"fire-fn-compat",[t3]:"fire-iid",[n3]:"fire-iid-compat",[r3]:"fire-fcm",[i3]:"fire-fcm-compat",[s3]:"fire-perf",[o3]:"fire-perf-compat",[a3]:"fire-rc",[l3]:"fire-rc-compat",[u3]:"fire-gcs",[c3]:"fire-gcs-compat",[d3]:"fire-fst",[f3]:"fire-fst-compat",[h3]:"fire-vertex","fire-js":"fire-js",[p3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,y3=new Map,Zp=new Map;function av(t,e){try{t.container.addComponent(e)}catch(n){Os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ia(t){const e=t.name;if(Zp.has(e))return Os.debug(`There were multiple attempts to register component ${e}.`),!1;Zp.set(e,t);for(const n of xd.values())av(n,t);for(const n of y3.values())av(n,t);return!0}function Vg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bi=new Eu("app","Firebase",v3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=m3;function UE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bi.create("bad-app-name",{appName:String(i)});if(n||(n=NE()),!n)throw Bi.create("no-options");const s=xd.get(i);if(s){if(tu(n,s.options)&&tu(r,s.config))return s;throw Bi.create("duplicate-app",{appName:i})}const o=new xR(i);for(const l of Zp.values())o.addComponent(l);const a=new _3(n,r,o);return xd.set(i,a),a}function w3(t=Xp){const e=xd.get(t);if(!e&&t===Xp&&NE())return UE();if(!e)throw Bi.create("no-app",{appName:t});return e}function zi(t,e,n){var r;let i=(r=g3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Os.warn(a.join(" "));return}ia(new Ls(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3="firebase-heartbeat-database",I3=1,nu="firebase-heartbeat-store";let Vf=null;function jE(){return Vf||(Vf=UR(E3,I3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bi.create("idb-open",{originalErrorMessage:t.message})})),Vf}async function T3(t){try{const n=(await jE()).transaction(nu),r=await n.objectStore(nu).get(BE(t));return await n.done,r}catch(e){if(e instanceof ei)Os.warn(e.message);else{const n=Bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Os.warn(n.message)}}}async function lv(t,e){try{const r=(await jE()).transaction(nu,"readwrite");await r.objectStore(nu).put(e,BE(t)),await r.done}catch(n){if(n instanceof ei)Os.warn(n.message);else{const r=Bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Os.warn(r.message)}}}function BE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=1024,C3=30*24*60*60*1e3;class x3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new A3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=uv();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=C3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uv(),{heartbeatsToSend:r,unsentEntries:i}=P3(this._heartbeatsCache.heartbeats),s=kE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function uv(){return new Date().toISOString().substring(0,10)}function P3(t,e=S3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class A3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OE()?mR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await T3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cv(t){return kE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t){ia(new Ls("platform-logger",e=>new zR(e),"PRIVATE")),ia(new Ls("heartbeat",e=>new x3(e),"PRIVATE")),zi(Yp,ov,t),zi(Yp,ov,"esm2017"),zi("fire-js","")}R3("");function Lg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const b3=zE,$E=new Eu("auth","Firebase",zE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Dg("@firebase/auth");function k3(t,...e){Pd.logLevel<=be.WARN&&Pd.warn(`Auth (${Ta}): ${t}`,...e)}function Oc(t,...e){Pd.logLevel<=be.ERROR&&Pd.error(`Auth (${Ta}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw Og(t,...e)}function mr(t,...e){return Og(t,...e)}function qE(t,e,n){const r=Object.assign(Object.assign({},b3()),{[e]:n});return new Eu("auth","Firebase",r).create(e,{appName:t.name})}function $i(t){return qE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $E.create(t,...e)}function ye(t,e,...n){if(!t)throw Og(e,...n)}function Fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Oc(e),new Error(e)}function Jr(t,e){t||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function D3(){return dv()==="http:"||dv()==="https:"}function dv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D3()||hR()||"connection"in navigator)?navigator.onLine:!0}function V3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jr(n>e,"Short delay should be less than long delay!"),this.isMobile=cR()||fR()}get(){return N3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e){Jr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=new Tu(3e4,6e4);function Qs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ts(t,e,n,r,i={}){return KE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Iu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),HE.fetch()(GE(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function KE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},L3),e);try{const i=new F3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw qE(t,d,c);rr(t,d)}}catch(i){if(i instanceof ei)throw i;rr(t,"network-request-failed",{message:String(i)})}}async function vh(t,e,n,r,i={}){const s=await ts(t,e,n,r,i);return"mfaPendingCredential"in s&&rr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function GE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Mg(t.config,i):`${t.config.apiScheme}://${i}`}function M3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class F3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mr(this.auth,"network-request-failed")),O3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mr(t,e,r);return i.customData._tokenResponse=n,i}function hv(t){return t!==void 0&&t.enterprise!==void 0}class U3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return M3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function j3(t,e){return ts(t,"GET","/v2/recaptchaConfig",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B3(t,e){return ts(t,"POST","/v1/accounts:delete",e)}async function WE(t,e){return ts(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z3(t,e=!1){const n=qt(t),r=await n.getIdToken(e),i=Fg(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pl(Lf(i.auth_time)),issuedAtTime:Pl(Lf(i.iat)),expirationTime:Pl(Lf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Lf(t){return Number(t)*1e3}function Fg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Oc("JWT malformed, contained fewer than 3 sections"),null;try{const i=DE(n);return i?JSON.parse(i):(Oc("Failed to decode base64 JWT payload"),null)}catch(i){return Oc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fv(t){const e=Fg(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ei&&$3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pl(this.lastLoginAt),this.creationTime=Pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ad(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ru(t,WE(n,{idToken:r}));ye(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?QE(s.providerUserInfo):[],a=K3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tm(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function H3(t){const e=qt(t);await Ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function QE(t){return t.map(e=>{var{providerId:n}=e,r=Lg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(t,e){const n=await KE(t,{},async()=>{const r=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=GE(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function W3(t,e){return ts(t,"POST","/v2/accounts:revokeToken",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=fv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await G3(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qo;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ye(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qo,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Lg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new q3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ru(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return z3(this,e)}reload(){return H3(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ad(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mr(this.auth.app))return Promise.reject($i(this.auth));const e=await this.getIdToken();return await ru(this,B3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,S=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:k,isAnonymous:V,providerData:F,stsTokenManager:g}=n;ye(I&&g,e,"internal-error");const v=qo.fromJSON(this.name,g);ye(typeof I=="string",e,"internal-error"),mi(h,e.name),mi(p,e.name),ye(typeof k=="boolean",e,"internal-error"),ye(typeof V=="boolean",e,"internal-error"),mi(_,e.name),mi(E,e.name),mi(P,e.name),mi(N,e.name),mi(S,e.name),mi(y,e.name);const T=new Ur({uid:I,auth:e,email:p,emailVerified:k,displayName:h,isAnonymous:V,photoURL:E,phoneNumber:_,tenantId:P,stsTokenManager:v,createdAt:S,lastLoginAt:y});return F&&Array.isArray(F)&&(T.providerData=F.map(x=>Object.assign({},x))),N&&(T._redirectEventId=N),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new qo;i.updateFromServerResponse(n);const s=new Ur({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ad(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ye(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?QE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qo;a.updateFromIdToken(r);const l=new Ur({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new tm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new Map;function jr(t){Jr(t instanceof Function,"Expected a class definition");let e=pv.get(t);return e?(Jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JE.type="NONE";const mv=JE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Mc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Mc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ur._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ho(jr(mv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||jr(mv);const o=Mc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Ur._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ho(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ho(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tI(e))return"Blackberry";if(nI(e))return"Webos";if(Ug(e))return"Safari";if((e.includes("chrome/")||XE(e))&&!e.includes("edge/"))return"Chrome";if(eI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YE(t=St()){return/firefox\//i.test(t)}function Ug(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XE(t=St()){return/crios\//i.test(t)}function ZE(t=St()){return/iemobile/i.test(t)}function eI(t=St()){return/android/i.test(t)}function tI(t=St()){return/blackberry/i.test(t)}function nI(t=St()){return/webos/i.test(t)}function _h(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Q3(t=St()){var e;return _h(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function J3(){return pR()&&document.documentMode===10}function rI(t=St()){return _h(t)||eI(t)||nI(t)||tI(t)||/windows phone/i.test(t)||ZE(t)}function Y3(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t,e=[]){let n;switch(t){case"Browser":n=gv(St());break;case"Worker":n=`${gv(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ta}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e={}){return ts(t,"GET","/v2/passwordPolicy",Qs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=6;class tb{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yv(this),this.idTokenSubscription=new yv(this),this.beforeStateQueue=new X3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$E,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await WE(this,{idToken:e}),r=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Mr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ad(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mr(this.app))return Promise.reject($i(this));const n=e?qt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mr(this.app)?Promise.reject($i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mr(this.app)?Promise.reject($i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Z3(this),n=new tb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Eu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await W3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jr(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&k3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Sa(t){return qt(t)}class yv{constructor(e){this.auth=e,this.observer=null,this.addObserver=wR(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rb(t){wh=t}function sI(t){return wh.loadJS(t)}function ib(){return wh.recaptchaEnterpriseScript}function sb(){return wh.gapiScript}function ob(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ab="recaptcha-enterprise",lb="NO_RECAPTCHA";class ub{constructor(e){this.type=ab,this.auth=Sa(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{j3(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new U3(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;hv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(lb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&hv(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ib();l.length!==0&&(l+=a),sI(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function vv(t,e,n,r=!1){const i=new ub(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _v(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await vv(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await vv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t,e){const n=Vg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(tu(s,e??{}))return i;rr(i,"already-initialized")}return n.initialize({options:e})}function db(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hb(t,e,n){const r=Sa(t);ye(r._canInitEmulator,r,"emulator-config-failed"),ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=oI(e),{host:o,port:a}=fb(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),pb()}function oI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fb(t){const e=oI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wv(o)}}}function wv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,n){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function mb(t,e){return ts(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(t,e){return vh(t,"POST","/v1/accounts:signInWithPassword",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(t,e){return vh(t,"POST","/v1/accounts:signInWithEmailLink",Qs(t,e))}async function vb(t,e){return vh(t,"POST","/v1/accounts:signInWithEmailLink",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends jg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new iu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new iu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _v(e,n,"signInWithPassword",gb);case"emailLink":return yb(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _v(e,r,"signUpPassword",mb);case"emailLink":return vb(e,{idToken:n,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(t,e){return vh(t,"POST","/v1/accounts:signInWithIdp",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="http://localhost";class Ms extends jg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Lg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ms(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ko(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ko(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ko(e,n)}buildRequest(){const e={requestUri:_b,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Eb(t){const e=ul(cl(t)).link,n=e?ul(cl(e)).deep_link_id:null,r=ul(cl(t)).deep_link_id;return(r?ul(cl(r)).link:null)||r||n||e||t}class Bg{constructor(e){var n,r,i,s,o,a;const l=ul(cl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=wb((i=l.mode)!==null&&i!==void 0?i:null);ye(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Eb(e);try{return new Bg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(e,n){return iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Bg.parseLink(n);return ye(r,"argument-error"),iu._fromEmailAndCode(e,r.code,r.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends aI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Su{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Si.credential(n,r)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Su{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.GITHUB_SIGN_IN_METHOD="github.com";Ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Su{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xi.credential(n,r)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ur._fromIdTokenResponse(e,r,i),o=Ev(r);return new sa({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ev(r);return new sa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ev(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends ei{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Rd(e,n,r,i)}}function lI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(t,s,e,r):s})}async function Ib(t,e,n=!1){const r=await ru(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return sa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(t,e,n=!1){const{auth:r}=t;if(Mr(r.app))return Promise.reject($i(r));const i="reauthenticate";try{const s=await ru(t,lI(r,i,e,t),n);ye(s.idToken,r,"internal-error");const o=Fg(s.idToken);ye(o,r,"internal-error");const{sub:a}=o;return ye(t.uid===a,r,"user-mismatch"),sa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&rr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(t,e,n=!1){if(Mr(t.app))return Promise.reject($i(t));const r="signIn",i=await lI(t,r,e),s=await sa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Sb(t,e){return uI(Sa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(t){const e=Sa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function xb(t,e,n){return Mr(t.app)?Promise.reject($i(t)):Sb(qt(t),Ca.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Cb(t),r})}function Pb(t,e,n,r){return qt(t).onIdTokenChanged(e,n,r)}function Ab(t,e,n){return qt(t).beforeAuthStateChanged(e,n)}function cI(t,e,n,r){return qt(t).onAuthStateChanged(e,n,r)}function Rb(t){return qt(t).signOut()}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(){const t=St();return Ug(t)||_h(t)}const kb=1e3,Db=10;class hI extends dI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=bb()&&Y3(),this.fallbackToPolling=rI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);J3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Db):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hI.type="LOCAL";const Nb=hI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI extends dI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fI.type="SESSION";const pI=fI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Eh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await Vb(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=zg("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return window}function Ob(t){gr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(){return typeof gr().WorkerGlobalScope<"u"&&typeof gr().importScripts=="function"}async function Mb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ub(){return mI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="firebaseLocalStorageDb",jb=1,kd="firebaseLocalStorage",yI="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ih(t,e){return t.transaction([kd],e?"readwrite":"readonly").objectStore(kd)}function Bb(){const t=indexedDB.deleteDatabase(gI);return new Cu(t).toPromise()}function nm(){const t=indexedDB.open(gI,jb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kd,{keyPath:yI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kd)?e(r):(r.close(),await Bb(),e(await nm()))})})}async function Iv(t,e,n){const r=Ih(t,!0).put({[yI]:e,value:n});return new Cu(r).toPromise()}async function zb(t,e){const n=Ih(t,!1).get(e),r=await new Cu(n).toPromise();return r===void 0?null:r.value}function Tv(t,e){const n=Ih(t,!0).delete(e);return new Cu(n).toPromise()}const $b=800,qb=3;class vI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eh._getInstance(Ub()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Mb(),!this.activeServiceWorker)return;this.sender=new Lb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nm();return await Iv(e,bd,"1"),await Tv(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ih(i,!1).getAll();return new Cu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$b)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vI.type="LOCAL";const Hb=vI;new Tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t,e){return e?jr(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends jg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ko(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Gb(t){return uI(t.auth,new $g(t),t.bypassAuthState)}function Wb(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),Tb(n,new $g(t),t.bypassAuthState)}async function Qb(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),Ib(n,new $g(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gb;case"linkViaPopup":case"linkViaRedirect":return Qb;case"reauthViaPopup":case"reauthViaRedirect":return Wb;default:rr(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=new Tu(2e3,1e4);class Oo extends _I{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Jr(this.filter.length===1,"Popup operations only handle one event");const e=zg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Jb.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="pendingRedirect",Fc=new Map;class Xb extends _I{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fc.get(this.auth._key());if(!e){try{const r=await Zb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fc.set(this.auth._key(),e)}return this.bypassAuthState||Fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Zb(t,e){const n=nk(e),r=tk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ek(t,e){Fc.set(t._key(),e)}function tk(t){return jr(t._redirectPersistence)}function nk(t){return Mc(Yb,t.config.apiKey,t.name)}async function rk(t,e,n=!1){if(Mr(t.app))return Promise.reject($i(t));const r=Sa(t),i=Kb(r,e),o=await new Xb(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=10*60*1e3;class sk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ok(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ik&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sv(e))}saveEventToCache(e){this.cachedEventUids.add(Sv(e)),this.lastProcessedEventTime=Date.now()}}function Sv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ok(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,e={}){return ts(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uk=/^https?/;async function ck(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ak(t);for(const n of e)try{if(dk(n))return}catch{}rr(t,"unauthorized-domain")}function dk(t){const e=em(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!uk.test(n))return!1;if(lk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=new Tu(3e4,6e4);function Cv(){const t=gr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fk(t){return new Promise((e,n)=>{var r,i,s;function o(){Cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cv(),n(mr(t,"network-request-failed"))},timeout:hk.get()})}if(!((i=(r=gr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=gr().gapi)===null||s===void 0)&&s.load)o();else{const a=ob("iframefcb");return gr()[a]=()=>{gapi.load?o():n(mr(t,"network-request-failed"))},sI(`${sb()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Uc=null,e})}let Uc=null;function pk(t){return Uc=Uc||fk(t),Uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=new Tu(5e3,15e3),gk="__/auth/iframe",yk="emulator/auth/iframe",vk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_k=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wk(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mg(e,yk):`https://${t.config.authDomain}/${gk}`,r={apiKey:e.apiKey,appName:t.name,v:Ta},i=_k.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Iu(r).slice(1)}`}async function Ek(t){const e=await pk(t),n=gr().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:wk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=mr(t,"network-request-failed"),a=gr().setTimeout(()=>{s(o)},mk.get());function l(){gr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tk=500,Sk=600,Ck="_blank",xk="http://localhost";class xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pk(t,e,n,r=Tk,i=Sk){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ik),{width:r.toString(),height:i.toString(),top:s,left:o}),c=St().toLowerCase();n&&(a=XE(c)?Ck:n),YE(c)&&(e=e||xk,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[_,E])=>`${p}${_}=${E},`,"");if(Q3(c)&&a!=="_self")return Ak(e||"",a),new xv(null);const h=window.open(e||"",a,d);ye(h,t,"popup-blocked");try{h.focus()}catch{}return new xv(h)}function Ak(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="__/auth/handler",bk="emulator/auth/handler",kk=encodeURIComponent("fac");async function Pv(t,e,n,r,i,s){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ta,eventId:i};if(e instanceof aI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_R(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Su){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${kk}=${encodeURIComponent(l)}`:"";return`${Dk(t)}?${Iu(a).slice(1)}${c}`}function Dk({config:t}){return t.emulator?Mg(t,bk):`https://${t.authDomain}/${Rk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="webStorageSupport";class Nk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pI,this._completeRedirectFn=rk,this._overrideRedirectResult=ek}async _openPopup(e,n,r,i){var s;Jr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Pv(e,n,r,em(),i);return Pk(e,o,zg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Pv(e,n,r,em(),i);return Ob(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Jr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ek(e),r=new sk(e);return n.register("authEvent",i=>(ye(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Of,{type:Of},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Of];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ck(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rI()||Ug()||_h()}}const Vk=Nk;var Av="@firebase/auth",Rv="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Mk(t){ia(new Ls("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iI(t)},c=new nb(r,i,s,l);return db(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ia(new Ls("auth-internal",e=>{const n=Sa(e.getProvider("auth").getImmediate());return(r=>new Lk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zi(Av,Rv,Ok(t)),zi(Av,Rv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=5*60,Uk=VE("authIdTokenMaxAge")||Fk;let bv=null;const jk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Uk)return;const i=n==null?void 0:n.token;bv!==i&&(bv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Th(t=w3()){const e=Vg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cb(t,{popupRedirectResolver:Vk,persistence:[Hb,Nb,pI]}),r=VE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=jk(s.toString());Ab(n,o,()=>o(n.currentUser)),Pb(n,a=>o(a))}}const i=lR("auth");return i&&hb(n,`http://${i}`),n}function Bk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=mr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Bk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Mk("Browser");const zk={email:"",password:""},qr="novcmbro_geekstore_auth",$k=(t,e,n)=>{const r=Th();xb(r,t.email,t.password).then(()=>{localStorage.setItem(qr,"true"),e(`${vt}/admin-menu`)}).catch(i=>{const s=["invalid-credential","user-not-found","user-disabled","too-many-requests","network-request-failed"];for(let o of s)if(i.code.includes(o)){n(i.code.includes("password")?"password":"email",{type:"value",message:eu(`login.${o}`)});break}})},qk=(t,e)=>{const n=Th();Rb(n).then(()=>{localStorage.removeItem(qr),t(vt),e({type:"success",message:eu("logout.success")})}).catch(()=>e({type:"error",message:eu("logout.error")}))},Hk=(t,e,n)=>{const r=cI(t,i=>{if(i&&!localStorage.getItem(qr)){localStorage.setItem(qr,"true"),localStorage.getItem(qr)&&(e?n(`${vt}/admin-menu`):window.location.reload());return}});return()=>r()},Xa=[{id:1,image:"https://images.unsplash.com/photo-1609372332255-611485350f25?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Miscellaneous",name:"Pikachu Costume",price:30.99,description:"Reprehenderit elit incididunt minim nostrud cillum anim et deserunt ut ea dolore. Laboris voluptate non fugiat culpa in reprehenderit adipisicing id dolore ad ex velit. Consectetur qui voluptate velit veniam commodo qui nisi laboris deserunt enim. Et irure occaecat dolore ut ea ut laboris cupidatat voluptate sint."},{id:2,image:"https://images.unsplash.com/photo-1535223289827-42f1e9919769?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Miscellaneous",name:"VR Glasses",price:490.99,description:"Excepteur adipisicing ipsum consectetur incididunt velit in amet. Reprehenderit anim do consequat consectetur. Lorem commodo ullamco et enim dolore laboris nisi cillum. Pariatur mollit officia incididunt et est esse occaecat fugiat nostrud sint ipsum. Voluptate veniam ullamco nulla anim. Est dolor commodo commodo do cupidatat velit deserunt. Est sint labore reprehenderit tempor labore sit ad magna deserunt."},{id:3,image:"https://images.unsplash.com/photo-1611946258523-9c2bfabb94e3?q=80&w=1371&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Miscellaneous",name:"Vintage Radio",price:19.99,description:"Cillum est est consectetur esse pariatur reprehenderit. Cillum ad mollit qui nostrud minim. Aliquip occaecat ut enim labore labore consequat culpa exercitation aliquip dolor magna id. Esse anim anim nulla ipsum laboris labore. Et adipisicing nisi tempor qui enim enim elit aute amet ut enim in elit."},{id:4,image:"https://images.unsplash.com/photo-1550747545-c896b5f89ff7?q=80&w=1467&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Miscellaneous",name:"Sonic Figure",price:25.99,description:"Qui dolore consequat sint fugiat labore eu cillum culpa voluptate. Excepteur nulla fugiat ipsum sit esse ad nostrud fugiat sint consequat velit ipsum. Consequat reprehenderit et minim tempor. Labore exercitation fugiat voluptate ea exercitation duis labore id qui qui anim ut esse."},{id:5,image:"https://images.unsplash.com/photo-1554410637-1a8267402b57?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Miscellaneous",name:"Atari Console Shirt",price:7.99,description:"Laboris Lorem laborum pariatur ad. Ullamco sunt adipisicing est nisi. Sint magna minim culpa proident non culpa eiusmod duis labore amet ullamco culpa. Minim nostrud enim deserunt id. Exercitation eu quis cillum dolore non sit velit esse ad. Ullamco in reprehenderit sit officia labore nostrud deserunt voluptate laborum non officia."},{id:6,image:"https://images.unsplash.com/photo-1589021818993-a1223f8f0f04?q=80&w=1490&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Miscellaneous",name:"Atari Logo Shirt",price:8.99,description:"Minim duis eiusmod non anim reprehenderit consequat dolor. Consequat ad qui magna pariatur consequat occaecat excepteur excepteur id ex dolore tempor irure. Aliqua occaecat cillum dolore ipsum sint adipisicing officia ut incididunt culpa."},{id:7,image:"https://images.unsplash.com/photo-1577583113753-ca7e95d1bdc6?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Consoles",name:"GameBoy Color",price:168.99,description:"Velit incididunt incididunt ut tempor ad magna veniam. Proident culpa est et quis qui laborum laborum. Quis duis do cupidatat veniam nulla elit adipisicing qui occaecat pariatur magna ullamco veniam irure."},{id:8,image:"https://images.unsplash.com/photo-1621259182181-1ccb9ec306cd?q=80&w=1512&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Consoles",name:"Xbox",price:679.99,description:"Fugiat Lorem et consectetur eiusmod. Voluptate cupidatat fugiat id exercitation magna pariatur. Incididunt quis ullamco nulla nulla occaecat enim eu pariatur excepteur eiusmod velit eiusmod consequat proident. Esse laboris minim voluptate fugiat nulla cupidatat commodo Lorem."},{id:9,image:"https://images.unsplash.com/photo-1617096200347-cb04ae810b1d?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Consoles",name:"Nintendo Switch Controller",price:69.99,description:"Ea cupidatat enim amet tempor laboris laborum duis dolore dolor dolore. Eu Lorem proident consectetur esse eu commodo quis ex sunt eu officia magna velit et. Reprehenderit fugiat minim ea proident ullamco reprehenderit. Consectetur et aliquip pariatur enim ea aute commodo eu sunt culpa commodo velit. Et velit voluptate adipisicing ut aliqua. Officia nisi non ut dolor magna magna commodo mollit."},{id:10,image:"https://images.unsplash.com/photo-1533702165324-66678e2069b2?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Consoles",name:"Nintendo NES",price:820.99,description:"Sunt consequat exercitation eiusmod occaecat duis dolore anim ipsum. Aute velit mollit proident minim ullamco do consectetur occaecat eiusmod Lorem. Ullamco exercitation ad incididunt sint quis duis dolore laboris laboris esse aute amet duis. Ut sunt sunt minim cillum."},{id:11,image:"https://images.unsplash.com/photo-1607853202273-797f1c22a38e?q=80&w=1527&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Consoles",name:"PlayStation 5",price:987.99,description:"Do est nulla Lorem adipisicing ipsum dolor voluptate ex eiusmod. Tempor officia enim duis proident ullamco. Laboris non minim ut aute ut ea culpa eu. Dolor consequat deserunt consectetur duis eiusmod excepteur magna ullamco adipisicing."},{id:12,image:"https://images.unsplash.com/photo-1588872444509-d350e4aab61e?q=80&w=1392&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Consoles",name:"Xbox Controller",price:69.99,description:"Cillum Lorem occaecat eu dolore cupidatat deserunt reprehenderit voluptate. Nulla tempor pariatur commodo incididunt est dolor minim minim occaecat quis occaecat eiusmod mollit. Voluptate consequat officia aliquip dolor sint tempor consequat velit do pariatur amet ut aliqua."},{id:13,image:"https://images.unsplash.com/photo-1591927675938-b81b071d3e91?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Star Wars",name:"Kylo Ren Figure",price:29.99,description:"Ex do est ullamco duis amet. In ullamco in velit eiusmod duis adipisicing adipisicing duis ad ullamco tempor. Esse ut incididunt fugiat elit non magna. Non anim nulla mollit laborum tempor in fugiat ad commodo. Do occaecat qui in fugiat ea consequat dolor."},{id:14,image:"https://images.unsplash.com/photo-1601814933824-fd0b574dd592?q=80&w=1412&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Star Wars",name:"Baby Yoda Figure",price:32.99,description:"Dolor sunt ea velit amet ad esse mollit tempor deserunt eu id. Nulla exercitation ipsum fugiat Lorem amet officia Lorem sunt occaecat duis aute fugiat. Elit sunt adipisicing aute nulla minim non consectetur proident est cupidatat elit."},{id:15,image:"https://images.unsplash.com/photo-1599719500956-d158a26ab3ee?q=80&w=1471&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Star Wars",name:"Stormtrooper Figure",price:36.99,description:"Deserunt fugiat nisi do est. Consectetur ut occaecat qui adipisicing consectetur nulla sunt non proident minim labore. Quis labore esse nostrud sint nostrud et excepteur sint voluptate irure proident pariatur incididunt voluptate. Laboris proident consequat officia laborum minim id et."},{id:16,image:"https://images.unsplash.com/photo-1599002762948-19068b069803?q=80&w=1422&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Star Wars",name:"Yoda Figure",price:29.99,description:"Ad dolore consequat in enim cupidatat ex Lorem in voluptate laborum est sunt. Consequat fugiat aliqua nulla elit quis. Sint amet sit ut adipisicing. Eu quis veniam consequat cupidatat officia ea ea id ipsum. Elit proident velit consequat minim Lorem exercitation deserunt labore."},{id:17,image:"https://images.unsplash.com/photo-1620950127852-92592960e363?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Star Wars",name:"Star Wars Figure",price:49.99,description:"Anim amet deserunt duis labore laborum fugiat pariatur. Ad eiusmod officia est excepteur non occaecat. Eiusmod dolor excepteur tempor duis ullamco ullamco cupidatat aute dolore sint adipisicing eu ipsum esse. Lorem aliqua incididunt nulla est in ex elit id nulla labore fugiat aliquip est deserunt. Occaecat ad magna minim do laboris tempor."},{id:18,image:"https://images.unsplash.com/photo-1620138694717-07141b500f57?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",category:"Star Wars",name:"Stormtrooper Mug",price:11.99,description:"Esse culpa aliqua voluptate nulla ad aliqua ea cupidatat. Qui elit non aliqua amet magna adipisicing quis nostrud incididunt. Anim consequat nulla consectetur mollit nulla proident officia deserunt veniam officia laboris sit excepteur esse. Labore ut proident exercitation exercitation nisi mollit do non consequat id elit id. Quis id deserunt incididunt Lorem duis velit fugiat."}],Kk=(t,e,n,r)=>{if(!t.search.trim()){e({type:"warning",message:eu("search.empty")});return}n(`${vt}/search-products/${t.search}`),r("search","")},Gk={"contact-name":"","contact-message":""};var Wk="firebase",Qk="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi(Wk,Qk,"app");var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ps,EI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,v){function T(){}T.prototype=v.prototype,g.D=v.prototype,g.prototype=new T,g.prototype.constructor=g,g.C=function(x,A,b){for(var C=Array(arguments.length-2),me=2;me<arguments.length;me++)C[me-2]=arguments[me];return v.prototype[A].apply(x,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(g,v,T){T||(T=0);var x=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)x[A]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(A=0;16>A;++A)x[A]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=g.g[0],T=g.g[1],A=g.g[2];var b=g.g[3],C=v+(b^T&(A^b))+x[0]+3614090360&4294967295;v=T+(C<<7&4294967295|C>>>25),C=b+(A^v&(T^A))+x[1]+3905402710&4294967295,b=v+(C<<12&4294967295|C>>>20),C=A+(T^b&(v^T))+x[2]+606105819&4294967295,A=b+(C<<17&4294967295|C>>>15),C=T+(v^A&(b^v))+x[3]+3250441966&4294967295,T=A+(C<<22&4294967295|C>>>10),C=v+(b^T&(A^b))+x[4]+4118548399&4294967295,v=T+(C<<7&4294967295|C>>>25),C=b+(A^v&(T^A))+x[5]+1200080426&4294967295,b=v+(C<<12&4294967295|C>>>20),C=A+(T^b&(v^T))+x[6]+2821735955&4294967295,A=b+(C<<17&4294967295|C>>>15),C=T+(v^A&(b^v))+x[7]+4249261313&4294967295,T=A+(C<<22&4294967295|C>>>10),C=v+(b^T&(A^b))+x[8]+1770035416&4294967295,v=T+(C<<7&4294967295|C>>>25),C=b+(A^v&(T^A))+x[9]+2336552879&4294967295,b=v+(C<<12&4294967295|C>>>20),C=A+(T^b&(v^T))+x[10]+4294925233&4294967295,A=b+(C<<17&4294967295|C>>>15),C=T+(v^A&(b^v))+x[11]+2304563134&4294967295,T=A+(C<<22&4294967295|C>>>10),C=v+(b^T&(A^b))+x[12]+1804603682&4294967295,v=T+(C<<7&4294967295|C>>>25),C=b+(A^v&(T^A))+x[13]+4254626195&4294967295,b=v+(C<<12&4294967295|C>>>20),C=A+(T^b&(v^T))+x[14]+2792965006&4294967295,A=b+(C<<17&4294967295|C>>>15),C=T+(v^A&(b^v))+x[15]+1236535329&4294967295,T=A+(C<<22&4294967295|C>>>10),C=v+(A^b&(T^A))+x[1]+4129170786&4294967295,v=T+(C<<5&4294967295|C>>>27),C=b+(T^A&(v^T))+x[6]+3225465664&4294967295,b=v+(C<<9&4294967295|C>>>23),C=A+(v^T&(b^v))+x[11]+643717713&4294967295,A=b+(C<<14&4294967295|C>>>18),C=T+(b^v&(A^b))+x[0]+3921069994&4294967295,T=A+(C<<20&4294967295|C>>>12),C=v+(A^b&(T^A))+x[5]+3593408605&4294967295,v=T+(C<<5&4294967295|C>>>27),C=b+(T^A&(v^T))+x[10]+38016083&4294967295,b=v+(C<<9&4294967295|C>>>23),C=A+(v^T&(b^v))+x[15]+3634488961&4294967295,A=b+(C<<14&4294967295|C>>>18),C=T+(b^v&(A^b))+x[4]+3889429448&4294967295,T=A+(C<<20&4294967295|C>>>12),C=v+(A^b&(T^A))+x[9]+568446438&4294967295,v=T+(C<<5&4294967295|C>>>27),C=b+(T^A&(v^T))+x[14]+3275163606&4294967295,b=v+(C<<9&4294967295|C>>>23),C=A+(v^T&(b^v))+x[3]+4107603335&4294967295,A=b+(C<<14&4294967295|C>>>18),C=T+(b^v&(A^b))+x[8]+1163531501&4294967295,T=A+(C<<20&4294967295|C>>>12),C=v+(A^b&(T^A))+x[13]+2850285829&4294967295,v=T+(C<<5&4294967295|C>>>27),C=b+(T^A&(v^T))+x[2]+4243563512&4294967295,b=v+(C<<9&4294967295|C>>>23),C=A+(v^T&(b^v))+x[7]+1735328473&4294967295,A=b+(C<<14&4294967295|C>>>18),C=T+(b^v&(A^b))+x[12]+2368359562&4294967295,T=A+(C<<20&4294967295|C>>>12),C=v+(T^A^b)+x[5]+4294588738&4294967295,v=T+(C<<4&4294967295|C>>>28),C=b+(v^T^A)+x[8]+2272392833&4294967295,b=v+(C<<11&4294967295|C>>>21),C=A+(b^v^T)+x[11]+1839030562&4294967295,A=b+(C<<16&4294967295|C>>>16),C=T+(A^b^v)+x[14]+4259657740&4294967295,T=A+(C<<23&4294967295|C>>>9),C=v+(T^A^b)+x[1]+2763975236&4294967295,v=T+(C<<4&4294967295|C>>>28),C=b+(v^T^A)+x[4]+1272893353&4294967295,b=v+(C<<11&4294967295|C>>>21),C=A+(b^v^T)+x[7]+4139469664&4294967295,A=b+(C<<16&4294967295|C>>>16),C=T+(A^b^v)+x[10]+3200236656&4294967295,T=A+(C<<23&4294967295|C>>>9),C=v+(T^A^b)+x[13]+681279174&4294967295,v=T+(C<<4&4294967295|C>>>28),C=b+(v^T^A)+x[0]+3936430074&4294967295,b=v+(C<<11&4294967295|C>>>21),C=A+(b^v^T)+x[3]+3572445317&4294967295,A=b+(C<<16&4294967295|C>>>16),C=T+(A^b^v)+x[6]+76029189&4294967295,T=A+(C<<23&4294967295|C>>>9),C=v+(T^A^b)+x[9]+3654602809&4294967295,v=T+(C<<4&4294967295|C>>>28),C=b+(v^T^A)+x[12]+3873151461&4294967295,b=v+(C<<11&4294967295|C>>>21),C=A+(b^v^T)+x[15]+530742520&4294967295,A=b+(C<<16&4294967295|C>>>16),C=T+(A^b^v)+x[2]+3299628645&4294967295,T=A+(C<<23&4294967295|C>>>9),C=v+(A^(T|~b))+x[0]+4096336452&4294967295,v=T+(C<<6&4294967295|C>>>26),C=b+(T^(v|~A))+x[7]+1126891415&4294967295,b=v+(C<<10&4294967295|C>>>22),C=A+(v^(b|~T))+x[14]+2878612391&4294967295,A=b+(C<<15&4294967295|C>>>17),C=T+(b^(A|~v))+x[5]+4237533241&4294967295,T=A+(C<<21&4294967295|C>>>11),C=v+(A^(T|~b))+x[12]+1700485571&4294967295,v=T+(C<<6&4294967295|C>>>26),C=b+(T^(v|~A))+x[3]+2399980690&4294967295,b=v+(C<<10&4294967295|C>>>22),C=A+(v^(b|~T))+x[10]+4293915773&4294967295,A=b+(C<<15&4294967295|C>>>17),C=T+(b^(A|~v))+x[1]+2240044497&4294967295,T=A+(C<<21&4294967295|C>>>11),C=v+(A^(T|~b))+x[8]+1873313359&4294967295,v=T+(C<<6&4294967295|C>>>26),C=b+(T^(v|~A))+x[15]+4264355552&4294967295,b=v+(C<<10&4294967295|C>>>22),C=A+(v^(b|~T))+x[6]+2734768916&4294967295,A=b+(C<<15&4294967295|C>>>17),C=T+(b^(A|~v))+x[13]+1309151649&4294967295,T=A+(C<<21&4294967295|C>>>11),C=v+(A^(T|~b))+x[4]+4149444226&4294967295,v=T+(C<<6&4294967295|C>>>26),C=b+(T^(v|~A))+x[11]+3174756917&4294967295,b=v+(C<<10&4294967295|C>>>22),C=A+(v^(b|~T))+x[2]+718787259&4294967295,A=b+(C<<15&4294967295|C>>>17),C=T+(b^(A|~v))+x[9]+3951481745&4294967295,g.g[0]=g.g[0]+v&4294967295,g.g[1]=g.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,g.g[2]=g.g[2]+A&4294967295,g.g[3]=g.g[3]+b&4294967295}r.prototype.u=function(g,v){v===void 0&&(v=g.length);for(var T=v-this.blockSize,x=this.B,A=this.h,b=0;b<v;){if(A==0)for(;b<=T;)i(this,g,b),b+=this.blockSize;if(typeof g=="string"){for(;b<v;)if(x[A++]=g.charCodeAt(b++),A==this.blockSize){i(this,x),A=0;break}}else for(;b<v;)if(x[A++]=g[b++],A==this.blockSize){i(this,x),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var v=1;v<g.length-8;++v)g[v]=0;var T=8*this.o;for(v=g.length-8;v<g.length;++v)g[v]=T&255,T/=256;for(this.u(g),g=Array(16),v=T=0;4>v;++v)for(var x=0;32>x;x+=8)g[T++]=this.g[v]>>>x&255;return g};function s(g,v){var T=a;return Object.prototype.hasOwnProperty.call(T,g)?T[g]:T[g]=v(g)}function o(g,v){this.h=v;for(var T=[],x=!0,A=g.length-1;0<=A;A--){var b=g[A]|0;x&&b==v||(T[A]=b,x=!1)}this.g=T}var a={};function l(g){return-128<=g&&128>g?s(g,function(v){return new o([v|0],0>v?-1:0)}):new o([g|0],0>g?-1:0)}function c(g){if(isNaN(g)||!isFinite(g))return h;if(0>g)return N(c(-g));for(var v=[],T=1,x=0;g>=T;x++)v[x]=g/T|0,T*=4294967296;return new o(v,0)}function d(g,v){if(g.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(g.charAt(0)=="-")return N(d(g.substring(1),v));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(v,8)),x=h,A=0;A<g.length;A+=8){var b=Math.min(8,g.length-A),C=parseInt(g.substring(A,A+b),v);8>b?(b=c(Math.pow(v,b)),x=x.j(b).add(c(C))):(x=x.j(T),x=x.add(c(C)))}return x}var h=l(0),p=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(P(this))return-N(this).m();for(var g=0,v=1,T=0;T<this.g.length;T++){var x=this.i(T);g+=(0<=x?x:4294967296+x)*v,v*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E(this))return"0";if(P(this))return"-"+N(this).toString(g);for(var v=c(Math.pow(g,6)),T=this,x="";;){var A=k(T,v).g;T=S(T,A.j(v));var b=((0<T.g.length?T.g[0]:T.h)>>>0).toString(g);if(T=A,E(T))return b+x;for(;6>b.length;)b="0"+b;x=b+x}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function E(g){if(g.h!=0)return!1;for(var v=0;v<g.g.length;v++)if(g.g[v]!=0)return!1;return!0}function P(g){return g.h==-1}t.l=function(g){return g=S(this,g),P(g)?-1:E(g)?0:1};function N(g){for(var v=g.g.length,T=[],x=0;x<v;x++)T[x]=~g.g[x];return new o(T,~g.h).add(p)}t.abs=function(){return P(this)?N(this):this},t.add=function(g){for(var v=Math.max(this.g.length,g.g.length),T=[],x=0,A=0;A<=v;A++){var b=x+(this.i(A)&65535)+(g.i(A)&65535),C=(b>>>16)+(this.i(A)>>>16)+(g.i(A)>>>16);x=C>>>16,b&=65535,C&=65535,T[A]=C<<16|b}return new o(T,T[T.length-1]&-2147483648?-1:0)};function S(g,v){return g.add(N(v))}t.j=function(g){if(E(this)||E(g))return h;if(P(this))return P(g)?N(this).j(N(g)):N(N(this).j(g));if(P(g))return N(this.j(N(g)));if(0>this.l(_)&&0>g.l(_))return c(this.m()*g.m());for(var v=this.g.length+g.g.length,T=[],x=0;x<2*v;x++)T[x]=0;for(x=0;x<this.g.length;x++)for(var A=0;A<g.g.length;A++){var b=this.i(x)>>>16,C=this.i(x)&65535,me=g.i(A)>>>16,Ie=g.i(A)&65535;T[2*x+2*A]+=C*Ie,y(T,2*x+2*A),T[2*x+2*A+1]+=b*Ie,y(T,2*x+2*A+1),T[2*x+2*A+1]+=C*me,y(T,2*x+2*A+1),T[2*x+2*A+2]+=b*me,y(T,2*x+2*A+2)}for(x=0;x<v;x++)T[x]=T[2*x+1]<<16|T[2*x];for(x=v;x<2*v;x++)T[x]=0;return new o(T,0)};function y(g,v){for(;(g[v]&65535)!=g[v];)g[v+1]+=g[v]>>>16,g[v]&=65535,v++}function I(g,v){this.g=g,this.h=v}function k(g,v){if(E(v))throw Error("division by zero");if(E(g))return new I(h,h);if(P(g))return v=k(N(g),v),new I(N(v.g),N(v.h));if(P(v))return v=k(g,N(v)),new I(N(v.g),v.h);if(30<g.g.length){if(P(g)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var T=p,x=v;0>=x.l(g);)T=V(T),x=V(x);var A=F(T,1),b=F(x,1);for(x=F(x,2),T=F(T,2);!E(x);){var C=b.add(x);0>=C.l(g)&&(A=A.add(T),b=C),x=F(x,1),T=F(T,1)}return v=S(g,A.j(v)),new I(A,v)}for(A=h;0<=g.l(v);){for(T=Math.max(1,Math.floor(g.m()/v.m())),x=Math.ceil(Math.log(T)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),b=c(T),C=b.j(v);P(C)||0<C.l(g);)T-=x,b=c(T),C=b.j(v);E(b)&&(b=p),A=A.add(b),g=S(g,C)}return new I(A,g)}t.A=function(g){return k(this,g).h},t.and=function(g){for(var v=Math.max(this.g.length,g.g.length),T=[],x=0;x<v;x++)T[x]=this.i(x)&g.i(x);return new o(T,this.h&g.h)},t.or=function(g){for(var v=Math.max(this.g.length,g.g.length),T=[],x=0;x<v;x++)T[x]=this.i(x)|g.i(x);return new o(T,this.h|g.h)},t.xor=function(g){for(var v=Math.max(this.g.length,g.g.length),T=[],x=0;x<v;x++)T[x]=this.i(x)^g.i(x);return new o(T,this.h^g.h)};function V(g){for(var v=g.g.length+1,T=[],x=0;x<v;x++)T[x]=g.i(x)<<1|g.i(x-1)>>>31;return new o(T,g.h)}function F(g,v){var T=v>>5;v%=32;for(var x=g.g.length-T,A=[],b=0;b<x;b++)A[b]=0<v?g.i(b+T)>>>v|g.i(b+T+1)<<32-v:g.i(b+T);return new o(A,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,EI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ps=o}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var II,TI,dl,SI,jc,rm,CI,xI,PI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var O=u[w];if(!(O in m))break e;m=m[O]}u=u[u.length-1],w=m[u],f=f(w),f!=w&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,w=!1,O={next:function(){if(!w&&m<u.length){var z=m++;return{value:f(z,u[z]),done:!1}}return w=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,m){return u.call.apply(u.bind,arguments)}function h(u,f,m){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,w),u.apply(f,O)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function _(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function E(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(w,O,z){for(var X=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)X[qe-2]=arguments[qe];return f.prototype[O].apply(w,X)}}function P(u){const f=u.length;if(0<f){const m=Array(f);for(let w=0;w<f;w++)m[w]=u[w];return m}return[]}function N(u,f){for(let m=1;m<arguments.length;m++){const w=arguments[m];if(l(w)){const O=u.length||0,z=w.length||0;u.length=O+z;for(let X=0;X<z;X++)u[O+X]=w[X]}else u.push(w)}}class S{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var V=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function F(u,f,m){for(const w in u)f.call(m,u[w],w,u)}function g(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function v(u){const f={};for(const m in u)f[m]=u[m];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,f){let m,w;for(let O=1;O<arguments.length;O++){w=arguments[O];for(m in w)u[m]=w[m];for(let z=0;z<T.length;z++)m=T[z],Object.prototype.hasOwnProperty.call(w,m)&&(u[m]=w[m])}}function A(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function b(u){a.setTimeout(()=>{throw u},0)}function C(){var u=oe;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class me{constructor(){this.h=this.g=null}add(f,m){const w=Ie.get();w.set(f,m),this.h?this.h.next=w:this.g=w,this.h=w}}var Ie=new S(()=>new $e,u=>u.reset());class $e{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,H=!1,oe=new me,ce=()=>{const u=a.Promise.resolve(void 0);Oe=()=>{u.then(Re)}};var Re=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){b(m)}var f=Ie;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}H=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Me(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Me.prototype.h=function(){this.defaultPrevented=!0};var kt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function pt(u,f){if(Me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(V){e:{try{k(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:mt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&pt.aa.h.call(this)}}E(pt,Me);var mt={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),Er=0;function Zs(u,f,m,w,O){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!w,this.ha=O,this.key=++Er,this.da=this.fa=!1}function ri(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ir(u){this.src=u,this.g={},this.h=0}Ir.prototype.add=function(u,f,m,w,O){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var X=Ln(u,f,w,O);return-1<X?(f=u[X],m||(f.fa=!1)):(f=new Zs(f,this.src,z,!!w,O),f.fa=m,u.push(f)),f};function Ct(u,f){var m=f.type;if(m in u.g){var w=u.g[m],O=Array.prototype.indexOf.call(w,f,void 0),z;(z=0<=O)&&Array.prototype.splice.call(w,O,1),z&&(ri(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Ln(u,f,m,w){for(var O=0;O<u.length;++O){var z=u[O];if(!z.da&&z.listener==f&&z.capture==!!m&&z.ha==w)return O}return-1}var Tr="closure_lm_"+(1e6*Math.random()|0),eo={};function Hn(u,f,m,w,O){if(Array.isArray(f)){for(var z=0;z<f.length;z++)Hn(u,f[z],m,w,O);return null}return m=xe(m),u&&u[_t]?u.K(f,m,c(w)?!!w.capture:!!w,O):Fu(u,f,m,!1,w,O)}function Fu(u,f,m,w,O,z){if(!f)throw Error("Invalid event type");var X=c(O)?!!O.capture:!!O,qe=W(u);if(qe||(u[Tr]=qe=new Ir(u)),m=qe.add(f,m,w,X,z),m.proxy)return m;if(w=D(),m.proxy=w,w.src=u,w.listener=m,u.addEventListener)kt||(O=X),O===void 0&&(O=!1),u.addEventListener(f.toString(),w,O);else if(u.attachEvent)u.attachEvent(ee(f.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function D(){function u(m){return f.call(u.src,u.listener,m)}const f=Y;return u}function j(u,f,m,w,O){if(Array.isArray(f))for(var z=0;z<f.length;z++)j(u,f[z],m,w,O);else w=c(w)?!!w.capture:!!w,m=xe(m),u&&u[_t]?(u=u.i,f=String(f).toString(),f in u.g&&(z=u.g[f],m=Ln(z,m,w,O),-1<m&&(ri(z[m]),Array.prototype.splice.call(z,m,1),z.length==0&&(delete u.g[f],u.h--)))):u&&(u=W(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Ln(f,m,w,O)),(m=-1<u?f[u]:null)&&$(m))}function $(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[_t])Ct(f.i,u);else{var m=u.type,w=u.proxy;f.removeEventListener?f.removeEventListener(m,w,u.capture):f.detachEvent?f.detachEvent(ee(m),w):f.addListener&&f.removeListener&&f.removeListener(w),(m=W(f))?(Ct(m,u),m.h==0&&(m.src=null,f[Tr]=null)):ri(u)}}}function ee(u){return u in eo?eo[u]:eo[u]="on"+u}function Y(u,f){if(u.da)u=!0;else{f=new pt(f,this);var m=u.listener,w=u.ha||u.src;u.fa&&$(u),u=m.call(w,f)}return u}function W(u){return u=u[Tr],u instanceof Ir?u:null}var le="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(u){return typeof u=="function"?u:(u[le]||(u[le]=function(f){return u.handleEvent(f)}),u[le])}function _e(){Te.call(this),this.i=new Ir(this),this.M=this,this.F=null}E(_e,Te),_e.prototype[_t]=!0,_e.prototype.removeEventListener=function(u,f,m,w){j(this,u,f,m,w)};function ke(u,f){var m,w=u.F;if(w)for(m=[];w;w=w.F)m.push(w);if(u=u.M,w=f.type||f,typeof f=="string")f=new Me(f,u);else if(f instanceof Me)f.target=f.target||u;else{var O=f;f=new Me(w,u),x(f,O)}if(O=!0,m)for(var z=m.length-1;0<=z;z--){var X=f.g=m[z];O=cn(X,w,!0,f)&&O}if(X=f.g=u,O=cn(X,w,!0,f)&&O,O=cn(X,w,!1,f)&&O,m)for(z=0;z<m.length;z++)X=f.g=m[z],O=cn(X,w,!1,f)&&O}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],w=0;w<m.length;w++)ri(m[w]);delete u.g[f],u.h--}}this.F=null},_e.prototype.K=function(u,f,m,w){return this.i.add(String(u),f,!1,m,w)},_e.prototype.L=function(u,f,m,w){return this.i.add(String(u),f,!0,m,w)};function cn(u,f,m,w){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,z=0;z<f.length;++z){var X=f[z];if(X&&!X.da&&X.capture==m){var qe=X.listener,Ut=X.ha||X.src;X.fa&&Ct(u.i,X),O=qe.call(Ut,w)!==!1&&O}}return O&&!w.defaultPrevented}function Sr(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function ii(u){u.g=Sr(()=>{u.g=null,u.i&&(u.i=!1,ii(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class dn extends Te{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ii(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ir(u){Te.call(this),this.h=u,this.g={}}E(ir,Te);var si=[];function os(u){F(u.g,function(f,m){this.g.hasOwnProperty(m)&&$(f)},u),u.g={}}ir.prototype.N=function(){ir.aa.N.call(this),os(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oi=a.JSON.stringify,Uu=a.JSON.parse,to=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function no(){}no.prototype.h=null;function ro(u){return u.h||(u.h=u.i())}function ju(){}var ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ka(){Me.call(this,"d")}E(ka,Me);function io(){Me.call(this,"c")}E(io,Me);var Cr={},L=null;function U(){return L=L||new _e}Cr.La="serverreachability";function q(u){Me.call(this,Cr.La,u)}E(q,Me);function J(u){const f=U();ke(f,new q(f))}Cr.STAT_EVENT="statevent";function ie(u,f){Me.call(this,Cr.STAT_EVENT,u),this.stat=f}E(ie,Me);function de(u){const f=U();ke(f,new ie(f,u))}Cr.Ma="timingevent";function he(u,f){Me.call(this,Cr.Ma,u),this.size=f}E(he,Me);function re(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function ve(){this.g=!0}ve.prototype.xa=function(){this.g=!1};function we(u,f,m,w,O,z){u.info(function(){if(u.g)if(z)for(var X="",qe=z.split("&"),Ut=0;Ut<qe.length;Ut++){var Le=qe[Ut].split("=");if(1<Le.length){var Ht=Le[0];Le=Le[1];var Kt=Ht.split("_");X=2<=Kt.length&&Kt[1]=="type"?X+(Ht+"="+Le+"&"):X+(Ht+"=redacted&")}}else X=null;else X=z;return"XMLHTTP REQ ("+w+") [attempt "+O+"]: "+f+`
`+m+`
`+X})}function xt(u,f,m,w,O,z,X){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+O+"]: "+f+`
`+m+`
`+z+" "+X})}function Xe(u,f,m,w){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ke(u,m)+(w?" "+w:"")})}function ge(u,f){u.info(function(){return"TIMEOUT: "+f})}ve.prototype.info=function(){};function Ke(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var w=m[u];if(!(2>w.length)){var O=w[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var X=1;X<O.length;X++)O[X]=""}}}}return oi(m)}catch{return f}}var tt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},li={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},On;function Kn(){}E(Kn,no),Kn.prototype.g=function(){return new XMLHttpRequest},Kn.prototype.i=function(){return{}},On=new Kn;function tn(u,f,m,w){this.j=u,this.i=f,this.l=m,this.R=w||1,this.U=new ir(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}var Tn={},ui={};function ci(u,f,m){u.L=1,u.v=$u(Rr(f)),u.m=m,u.P=!0,as(u,null)}function as(u,f){u.F=Date.now(),Ft(u),u.A=Rr(u.v);var m=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Qy(m.i,"t",w),u.C=0,m=u.j.J,u.h=new xr,u.g=f1(u.j,m?f:null,!u.m),0<u.O&&(u.M=new dn(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,w=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(si[0]=O.toString()),O=si);for(var z=0;z<O.length;z++){var X=Hn(m,O[z],w||f.handleEvent,!1,f.h||f);if(!X)break;f.g[X.key]=X}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),J(),we(u.i,u.u,u.A,u.l,u.R,u.m)}tn.prototype.ca=function(u){u=u.target;const f=this.M;f&&br(u)==3?f.j():this.Y(u)},tn.prototype.Y=function(u){try{if(u==this.g)e:{const Kt=br(this.g);var f=this.g.Ba();const ao=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||n1(this.g)))){this.J||Kt!=4||f==7||(f==8||0>=ao?J(3):J(2)),Pr(this);var m=this.g.Z();this.X=m;t:if(Pe(this)){var w=n1(this.g);u="";var O=w.length,z=br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ar(this),di(this);var X="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,u+=this.h.i.decode(w[f],{stream:!(z&&f==O-1)});w.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=m==200,xt(this.i,this.u,this.A,this.l,this.R,Kt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Ut=this.g;if((qe=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(qe)){var Le=qe;break t}}Le=null}if(m=Le)Xe(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hh(this,m);else{this.o=!1,this.s=3,de(12),Ar(this),di(this);break e}}if(this.P){m=!0;let Gn;for(;!this.J&&this.C<X.length;)if(Gn=Mt(this,X),Gn==ui){Kt==4&&(this.s=4,de(14),m=!1),Xe(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==Tn){this.s=4,de(15),Xe(this.i,this.l,X,"[Invalid Chunk]"),m=!1;break}else Xe(this.i,this.l,Gn,null),Hh(this,Gn);if(Pe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||X.length!=0||this.h.h||(this.s=1,de(16),m=!1),this.o=this.o&&m,!m)Xe(this.i,this.l,X,"[Invalid Chunked Response]"),Ar(this),di(this);else if(0<X.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Yh(Ht),Ht.M=!0,de(11))}}else Xe(this.i,this.l,X,null),Hh(this,X);Kt==4&&Ar(this),this.o&&!this.J&&(Kt==4?u1(this.j,this):(this.o=!1,Ft(this)))}else y4(this.g),m==400&&0<X.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),Ar(this),di(this)}}}catch{}finally{}};function Pe(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Mt(u,f){var m=u.C,w=f.indexOf(`
`,m);return w==-1?ui:(m=Number(f.substring(m,w)),isNaN(m)?Tn:(w+=1,w+m>f.length?ui:(f=f.slice(w,w+m),u.C=w+m,f)))}tn.prototype.cancel=function(){this.J=!0,Ar(this)};function Ft(u){u.S=Date.now()+u.I,wt(u,u.I)}function wt(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=re(p(u.ba,u),f)}function Pr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}tn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ge(this.i,this.A),this.L!=2&&(J(),de(17)),Ar(this),this.s=2,di(this)):wt(this,this.S-u)};function di(u){u.j.G==0||u.J||u1(u.j,u)}function Ar(u){Pr(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,os(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Hh(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Kh(m.h,u))){if(!u.K&&Kh(m.h,u)&&m.G==3){try{var w=m.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var O=w;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Wu(m),Ku(m);else break e;Jh(m),de(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=re(p(m.Za,m),6e3));if(1>=jy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else us(m,11)}else if((u.K||m.g==u)&&Wu(m),!y(f))for(O=m.Da.g.parse(f),f=0;f<O.length;f++){let Le=O[f];if(m.T=Le[0],Le=Le[1],m.G==2)if(Le[0]=="c"){m.K=Le[1],m.ia=Le[2];const Ht=Le[3];Ht!=null&&(m.la=Ht,m.j.info("VER="+m.la));const Kt=Le[4];Kt!=null&&(m.Aa=Kt,m.j.info("SVER="+m.Aa));const ao=Le[5];ao!=null&&typeof ao=="number"&&0<ao&&(w=1.5*ao,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const Gn=u.g;if(Gn){const Ju=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ju){var z=w.h;z.g||Ju.indexOf("spdy")==-1&&Ju.indexOf("quic")==-1&&Ju.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Gh(z,z.h),z.h=null))}if(w.D){const Xh=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xh&&(w.ya=Xh,Qe(w.I,w.D,Xh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var X=u;if(w.qa=h1(w,w.J?w.ia:null,w.W),X.K){By(w.h,X);var qe=X,Ut=w.L;Ut&&(qe.I=Ut),qe.B&&(Pr(qe),Ft(qe)),w.g=X}else a1(w);0<m.i.length&&Gu(m)}else Le[0]!="stop"&&Le[0]!="close"||us(m,7);else m.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?us(m,7):Qh(m):Le[0]!="noop"&&m.l&&m.l.ta(Le),m.v=0)}}J(4)}catch{}}var t4=class{constructor(u,f){this.g=u,this.map=f}};function Fy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Uy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function jy(u){return u.h?1:u.g?u.g.size:0}function Kh(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Gh(u,f){u.g?u.g.add(f):u.h=f}function By(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Fy.prototype.cancel=function(){if(this.i=zy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function zy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return P(u.i)}function n4(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,w=0;w<m;w++)f.push(u[w]);return f}f=[],m=0;for(w in u)f[m++]=u[w];return f}function r4(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const w in u)f[m++]=w;return f}}}function $y(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=r4(u),w=n4(u),O=w.length,z=0;z<O;z++)f.call(void 0,w[z],m&&m[z],u)}var qy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function i4(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var w=u[m].indexOf("="),O=null;if(0<=w){var z=u[m].substring(0,w);O=u[m].substring(w+1)}else z=u[m];f(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ls(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ls){this.h=u.h,Bu(this,u.j),this.o=u.o,this.g=u.g,zu(this,u.s),this.l=u.l;var f=u.i,m=new Va;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Hy(this,m),this.m=u.m}else u&&(f=String(u).match(qy))?(this.h=!1,Bu(this,f[1]||"",!0),this.o=Da(f[2]||""),this.g=Da(f[3]||"",!0),zu(this,f[4]),this.l=Da(f[5]||"",!0),Hy(this,f[6]||"",!0),this.m=Da(f[7]||"")):(this.h=!1,this.i=new Va(null,this.h))}ls.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Na(f,Ky,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Na(f,Ky,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Na(m,m.charAt(0)=="/"?a4:o4,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Na(m,u4)),u.join("")};function Rr(u){return new ls(u)}function Bu(u,f,m){u.j=m?Da(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function zu(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Hy(u,f,m){f instanceof Va?(u.i=f,c4(u.i,u.h)):(m||(f=Na(f,l4)),u.i=new Va(f,u.h))}function Qe(u,f,m){u.i.set(f,m)}function $u(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Da(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Na(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,s4),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function s4(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ky=/[#\/\?@]/g,o4=/[#\?:]/g,a4=/[#\?]/g,l4=/[#\?@]/g,u4=/#/g;function Va(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function hi(u){u.g||(u.g=new Map,u.h=0,u.i&&i4(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Va.prototype,t.add=function(u,f){hi(this),this.i=null,u=so(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Gy(u,f){hi(u),f=so(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Wy(u,f){return hi(u),f=so(u,f),u.g.has(f)}t.forEach=function(u,f){hi(this),this.g.forEach(function(m,w){m.forEach(function(O){u.call(f,O,w,this)},this)},this)},t.na=function(){hi(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let w=0;w<f.length;w++){const O=u[w];for(let z=0;z<O.length;z++)m.push(f[w])}return m},t.V=function(u){hi(this);let f=[];if(typeof u=="string")Wy(this,u)&&(f=f.concat(this.g.get(so(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return hi(this),this.i=null,u=so(this,u),Wy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Qy(u,f,m){Gy(u,f),0<m.length&&(u.i=null,u.g.set(so(u,f),P(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var w=f[m];const z=encodeURIComponent(String(w)),X=this.V(w);for(w=0;w<X.length;w++){var O=z;X[w]!==""&&(O+="="+encodeURIComponent(String(X[w]))),u.push(O)}}return this.i=u.join("&")};function so(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function c4(u,f){f&&!u.j&&(hi(u),u.i=null,u.g.forEach(function(m,w){var O=w.toLowerCase();w!=O&&(Gy(this,w),Qy(this,O,m))},u)),u.j=f}function d4(u,f){const m=new ve;if(a.Image){const w=new Image;w.onload=_(fi,m,"TestLoadImage: loaded",!0,f,w),w.onerror=_(fi,m,"TestLoadImage: error",!1,f,w),w.onabort=_(fi,m,"TestLoadImage: abort",!1,f,w),w.ontimeout=_(fi,m,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else f(!1)}function h4(u,f){const m=new ve,w=new AbortController,O=setTimeout(()=>{w.abort(),fi(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:w.signal}).then(z=>{clearTimeout(O),z.ok?fi(m,"TestPingServer: ok",!0,f):fi(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),fi(m,"TestPingServer: error",!1,f)})}function fi(u,f,m,w,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),w(m)}catch{}}function f4(){this.g=new to}function p4(u,f,m){const w=m||"";try{$y(u,function(O,z){let X=O;c(O)&&(X=oi(O)),f.push(w+z+"="+encodeURIComponent(X))})}catch(O){throw f.push(w+"type="+encodeURIComponent("_badmap")),O}}function La(u){this.l=u.Ub||null,this.j=u.eb||!1}E(La,no),La.prototype.g=function(){return new qu(this.l,this.j)},La.prototype.i=function(u){return function(){return u}}({});function qu(u,f){_e.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(qu,_e),t=qu.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ma(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ma(this)),this.g&&(this.readyState=3,Ma(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Oa(this):Ma(this),this.readyState==3&&Jy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Oa(this))},t.Qa=function(u){this.g&&(this.response=u,Oa(this))},t.ga=function(){this.g&&Oa(this)};function Oa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ma(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Ma(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Yy(u){let f="";return F(u,function(m,w){f+=w,f+=":",f+=m,f+=`\r
`}),f}function Wh(u,f,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=Yy(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Qe(u,f,m))}function lt(u){_e.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(lt,_e);var m4=/^https?$/i,g4=["POST","PUT"];t=lt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():On.g(),this.v=this.o?ro(this.o):ro(On),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(z){Xy(this,z);return}if(u=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var O in w)m.set(O,w[O]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const z of w.keys())m.set(z,w.get(z));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(z=>z.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(g4,f,void 0))||w||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,X]of m)this.g.setRequestHeader(z,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{t1(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){Xy(this,z)}};function Xy(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Zy(u),Hu(u)}function Zy(u){u.A||(u.A=!0,ke(u,"complete"),ke(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ke(this,"complete"),ke(this,"abort"),Hu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hu(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?e1(this):this.bb())},t.bb=function(){e1(this)};function e1(u){if(u.h&&typeof o<"u"&&(!u.v[1]||br(u)!=4||u.Z()!=2)){if(u.u&&br(u)==4)Sr(u.Ea,0,u);else if(ke(u,"readystatechange"),br(u)==4){u.h=!1;try{const X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var w;if(w=X===0){var O=String(u.D).match(qy)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),w=!m4.test(O?O.toLowerCase():"")}m=w}if(m)ke(u,"complete"),ke(u,"success");else{u.m=6;try{var z=2<br(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",Zy(u)}}finally{Hu(u)}}}}function Hu(u,f){if(u.g){t1(u);const m=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||ke(u,"ready");try{m.onreadystatechange=w}catch{}}}function t1(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function br(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<br(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Uu(f)}};function n1(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function y4(u){const f={};u=(u.g&&2<=br(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(y(u[w]))continue;var m=A(u[w]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const z=f[O]||[];f[O]=z,z.push(m)}g(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function r1(u){this.Aa=0,this.i=[],this.j=new ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fa("baseRetryDelayMs",5e3,u),this.cb=Fa("retryDelaySeedMs",1e4,u),this.Wa=Fa("forwardChannelMaxRetries",2,u),this.wa=Fa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Fy(u&&u.concurrentRequestLimit),this.Da=new f4,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=r1.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,w){de(0),this.W=u,this.H=f||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=h1(this,null,this.W),Gu(this)};function Qh(u){if(i1(u),u.G==3){var f=u.U++,m=Rr(u.I);if(Qe(m,"SID",u.K),Qe(m,"RID",f),Qe(m,"TYPE","terminate"),Ua(u,m),f=new tn(u,u.j,f),f.L=2,f.v=$u(Rr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=f1(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ft(f)}d1(u)}function Ku(u){u.g&&(Yh(u),u.g.cancel(),u.g=null)}function i1(u){Ku(u),u.u&&(a.clearTimeout(u.u),u.u=null),Wu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Gu(u){if(!Uy(u.h)&&!u.s){u.s=!0;var f=u.Ga;Oe||ce(),H||(Oe(),H=!0),oe.add(f,u),u.B=0}}function v4(u,f){return jy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=re(p(u.Ga,u,f),c1(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new tn(this,this.j,u);let z=this.o;if(this.S&&(z?(z=v(z),x(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=o1(this,O,f),m=Rr(this.I),Qe(m,"RID",u),Qe(m,"CVER",22),this.D&&Qe(m,"X-HTTP-Session-Id",this.D),Ua(this,m),z&&(this.O?f="headers="+encodeURIComponent(String(Yy(z)))+"&"+f:this.m&&Wh(m,this.m,z)),Gh(this.h,O),this.Ua&&Qe(m,"TYPE","init"),this.P?(Qe(m,"$req",f),Qe(m,"SID","null"),O.T=!0,ci(O,m,null)):ci(O,m,f),this.G=2}}else this.G==3&&(u?s1(this,u):this.i.length==0||Uy(this.h)||s1(this))};function s1(u,f){var m;f?m=f.l:m=u.U++;const w=Rr(u.I);Qe(w,"SID",u.K),Qe(w,"RID",m),Qe(w,"AID",u.T),Ua(u,w),u.m&&u.o&&Wh(w,u.m,u.o),m=new tn(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=o1(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Gh(u.h,m),ci(m,w,f)}function Ua(u,f){u.H&&F(u.H,function(m,w){Qe(f,w,m)}),u.l&&$y({},function(m,w){Qe(f,w,m)})}function o1(u,f,m){m=Math.min(u.i.length,m);var w=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let z=-1;for(;;){const X=["count="+m];z==-1?0<m?(z=O[0].g,X.push("ofs="+z)):z=0:X.push("ofs="+z);let qe=!0;for(let Ut=0;Ut<m;Ut++){let Le=O[Ut].g;const Ht=O[Ut].map;if(Le-=z,0>Le)z=Math.max(0,O[Ut].g-100),qe=!1;else try{p4(Ht,X,"req"+Le+"_")}catch{w&&w(Ht)}}if(qe){w=X.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,w}function a1(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Oe||ce(),H||(Oe(),H=!0),oe.add(f,u),u.v=0}}function Jh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=re(p(u.Fa,u),c1(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,l1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=re(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),Ku(this),l1(this))};function Yh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function l1(u){u.g=new tn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Rr(u.qa);Qe(f,"RID","rpc"),Qe(f,"SID",u.K),Qe(f,"AID",u.T),Qe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(f,"TO",u.ja),Qe(f,"TYPE","xmlhttp"),Ua(u,f),u.m&&u.o&&Wh(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=$u(Rr(f)),m.m=null,m.P=!0,as(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Ku(this),Jh(this),de(19))};function Wu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function u1(u,f){var m=null;if(u.g==f){Wu(u),Yh(u),u.g=null;var w=2}else if(Kh(u.h,f))m=f.D,By(u.h,f),w=1;else return;if(u.G!=0){if(f.o)if(w==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var O=u.B;w=U(),ke(w,new he(w,m)),Gu(u)}else a1(u);else if(O=f.s,O==3||O==0&&0<f.X||!(w==1&&v4(u,f)||w==2&&Jh(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),O){case 1:us(u,5);break;case 4:us(u,10);break;case 3:us(u,6);break;default:us(u,2)}}}function c1(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function us(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),w=u.Xa;const O=!w;w=new ls(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bu(w,"https"),$u(w),O?d4(w.toString(),m):h4(w.toString(),m)}else de(2);u.G=0,u.l&&u.l.sa(f),d1(u),i1(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function d1(u){if(u.G=0,u.ka=[],u.l){const f=zy(u.h);(f.length!=0||u.i.length!=0)&&(N(u.ka,f),N(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function h1(u,f,m){var w=m instanceof ls?Rr(m):new ls(m);if(w.g!="")f&&(w.g=f+"."+w.g),zu(w,w.s);else{var O=a.location;w=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var z=new ls(null);w&&Bu(z,w),f&&(z.g=f),O&&zu(z,O),m&&(z.l=m),w=z}return m=u.D,f=u.ya,m&&f&&Qe(w,m,f),Qe(w,"VER",u.la),Ua(u,w),w}function f1(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new lt(new La({eb:m})):new lt(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function p1(){}t=p1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qu(){}Qu.prototype.g=function(u,f){return new Sn(u,f)};function Sn(u,f){_e.call(this),this.g=new r1(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!y(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new oo(this)}E(Sn,_e),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){Qh(this.g)},Sn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=oi(u),u=m);f.i.push(new t4(f.Ya++,u)),f.G==3&&Gu(f)},Sn.prototype.N=function(){this.g.l=null,delete this.j,Qh(this.g),delete this.g,Sn.aa.N.call(this)};function m1(u){ka.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}E(m1,ka);function g1(){io.call(this),this.status=1}E(g1,io);function oo(u){this.g=u}E(oo,p1),oo.prototype.ua=function(){ke(this.g,"a")},oo.prototype.ta=function(u){ke(this.g,new m1(u))},oo.prototype.sa=function(u){ke(this.g,new g1)},oo.prototype.ra=function(){ke(this.g,"b")},Qu.prototype.createWebChannel=Qu.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,PI=function(){return new Qu},xI=function(){return U()},CI=Cr,rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,jc=tt,li.COMPLETE="complete",SI=li,ju.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",_e.prototype.listen=_e.prototype.K,dl=ju,TI=La,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,II=lt}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});const Dv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Dg("@firebase/firestore");function vo(){return Fs.logLevel}function G(t,...e){if(Fs.logLevel<=be.DEBUG){const n=e.map(qg);Fs.debug(`Firestore (${xa}): ${t}`,...n)}}function yt(t,...e){if(Fs.logLevel<=be.ERROR){const n=e.map(qg);Fs.error(`Firestore (${xa}): ${t}`,...n)}}function su(t,...e){if(Fs.logLevel<=be.WARN){const n=e.map(qg);Fs.warn(`Firestore (${xa}): ${t}`,...n)}}function qg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: `+t;throw yt(e),new Error(e)}function fe(t,e){t||ae()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class Xk{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new Jk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new Jt(e)}}class Zk{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class e6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Zk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class t6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new t6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=r6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function RI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pe(e)}static min(){return new pe(new ot(0,0))}static max(){return new pe(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ou.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ou?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends ou{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const i6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends ou{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return i6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new it(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Fe.fromString(e))}static fromName(e){return new te(Fe.fromString(e).popFirst(5))}static empty(){return new te(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function im(t){return t.fields.find(e=>e.kind===2)}function ps(t){return t.fields.filter(e=>e.kind!==2)}Dd.UNKNOWN_ID=-1;class Bc{constructor(e,n){this.fieldPath=e,this.kind=n}}class au{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new au(0,Dn.min())}}function bI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new Dn(i,te.empty(),e)}function kI(t){return new Dn(t.readTime,t.key,-1)}class Dn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dn(pe.min(),te.empty(),-1)}static max(){return new Dn(pe.max(),te.empty(),-1)}}function Hg(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ns(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==DI)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new yr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Al(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Kg(r.target.error);this.V.reject(new Al(e,i))}}static open(e,n,r,i){try{return new Sh(n,e.transaction(i,r))}catch(s){throw new Al(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(G("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new o6(n)}}class qi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,qi.S(St())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return G("SimpleDb","Removing database:",e),ms(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!OE())return!1;if(qi.C())return!0;const e=St(),n=qi.S(e),r=0<n&&n<10,i=VI(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(G("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Al(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ne(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ne(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Al(e,o))},i.onupgradeneeded=s=>{G("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{G("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Sh.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(G("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function VI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class s6{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ms(this.B.delete())}}class Al extends ne{constructor(e,n){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function rs(t){return t.name==="IndexedDbTransactionError"}class o6{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(G("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ms(r)}add(e){return G("SimpleDb","ADD",this.store.name,e,e),ms(this.store.add(e))}get(e){return ms(this.store.get(e)).next(n=>(n===void 0&&(n=null),G("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return G("SimpleDb","DELETE",this.store.name,e),ms(this.store.delete(e))}count(){return G("SimpleDb","COUNT",this.store.name),ms(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){G("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=Kg(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new s6(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const d=c.catch(h=>(l.done(),M.reject(h)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ms(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Kg(r.target.error);n(i)}})}let Nv=!1;function Kg(t){const e=qi.S(St());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nv||(Nv=!0,setTimeout(()=>{throw r},0)),r}}return t}class a6{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){G("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{G("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){rs(n)?G("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ns(n)}await this.X(6e4)})}}class l6{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return G("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(G("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=kI(s);Hg(o,r)>0&&(r=o)}),new Dn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}gn.oe=-1;function Ch(t){return t==null}function lu(t){return t===0&&1/t==-1/0}function LI(t){return typeof t=="number"&&Number.isInteger(t)&&!lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vv(e)),e=u6(t.get(n),e);return Vv(e)}function u6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Vv(t){return t+""}function cr(t){const e=t.length;if(fe(e>=2),e===2)return fe(t.charAt(0)===""&&t.charAt(1)===""),Fe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ae(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ae()}s=o+2}return new Fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t,e){return[t,on(e)]}function OI(t,e,n){return[t,on(e),n]}const c6={},d6=["prefixPath","collectionGroup","readTime","documentId"],h6=["prefixPath","collectionGroup","documentId"],f6=["collectionGroup","readTime","prefixPath","documentId"],p6=["canonicalId","targetId"],m6=["targetId","path"],g6=["path","targetId"],y6=["collectionId","parent"],v6=["indexId","uid"],_6=["uid","sequenceNumber"],w6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],E6=["indexId","uid","orderedDocumentKey"],I6=["userId","collectionPath","documentId"],T6=["userId","collectionPath","largestBatchId"],S6=["userId","collectionGroup","largestBatchId"],MI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],C6=[...MI,"documentOverlays"],FI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UI=FI,jI=[...UI,"indexConfiguration","indexState","indexEntries"],x6=jI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends NI{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Ot(t,e){const n=ue(t);return qi.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vc(this.root,e,this.comparator,!0)}}class vc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Bt.RED,this.left=i??Bt.EMPTY,this.right=s??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Bt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mv(this.data.getIterator())}getIteratorFrom(e){return new Mv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class Mv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new yn([])}unionWith(e){let n=new ze(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zI("Invalid base64 string: "+s):s}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const P6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(fe(!!t),typeof t=="string"){let e=0;const n=P6.exec(t);if(fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wi(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wg(t){const e=t.mapValue.fields.__previous_value__;return Gg(e)?Wg(e):e}function uu(t){const e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Us{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Us("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Us&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$c={nullValue:"NULL_VALUE"};function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gg(t)?4:$I(t)?9007199254740991:10:ae()}function vr(t,e){if(t===e)return!0;const n=js(t);if(n!==js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uu(t).isEqual(uu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yr(i.timestampValue),a=Yr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wi(i.bytesValue).isEqual(Wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dt(i.geoPointValue.latitude)===dt(s.geoPointValue.latitude)&&dt(i.geoPointValue.longitude)===dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dt(i.integerValue)===dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=dt(i.doubleValue),a=dt(s.doubleValue);return o===a?lu(o)===lu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oa(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Ov(o)!==Ov(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vr(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function cu(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function Qi(t,e){if(t===e)return 0;const n=js(t),r=js(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=dt(s.integerValue||s.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Fv(t.timestampValue,e.timestampValue);case 4:return Fv(uu(t),uu(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Wi(s),l=Wi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ee(a[c],l[c]);if(d!==0)return d}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ee(dt(s.latitude),dt(o.latitude));return a!==0?a:Ee(dt(s.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Qi(a[c],l[c]);if(d)return d}return Ee(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===bi.mapValue&&o===bi.mapValue)return 0;if(s===bi.mapValue)return 1;if(o===bi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Ee(l[h],d[h]);if(p!==0)return p;const _=Qi(a[l[h]],c[d[h]]);if(_!==0)return _}return Ee(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Fv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Yr(t),r=Yr(e),i=Ee(n.seconds,r.seconds);return i!==0?i:Ee(n.nanos,r.nanos)}function aa(t){return om(t)}function om(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=om(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${om(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function Qg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function am(t){return!!t&&"integerValue"in t}function du(t){return!!t&&"arrayValue"in t}function Uv(t){return!!t&&"nullValue"in t}function jv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qc(t){return!!t&&"mapValue"in t}function Rl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Rl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Rl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $I(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function R6(t){return"nullValue"in t?$c:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Qg(Us.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ae()}function b6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Qg(Us.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?bi:ae()}function Bv(t,e){const n=Qi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function zv(t,e){const n=Qi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rl(n)}setAll(e){let n=it.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Rl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Js(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Xt(Rl(this.value))}}function qI(t){const e=[];return Js(t.fields,(n,r)=>{const i=new it([n]);if(qc(r)){const s=qI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ht(e,0,pe.min(),pe.min(),pe.min(),Xt.empty(),0)}static newFoundDocument(e,n,r,i){return new ht(e,1,n,pe.min(),r,i,0)}static newNoDocument(e,n){return new ht(e,2,n,pe.min(),pe.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,pe.min(),pe.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.position=e,this.inclusive=n}}function $v(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Qi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n="asc"){this.field=e,this.dir=n}}function k6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{}class De extends HI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new D6(e,n,r):n==="array-contains"?new L6(e,r):n==="in"?new YI(e,r):n==="not-in"?new O6(e,r):n==="array-contains-any"?new M6(e,r):new De(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new N6(e,r):new V6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qi(n,this.value)):n!==null&&js(this.value)===js(n)&&this.matchesComparison(Qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Be extends HI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Be(e,n)}matches(e){return ua(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ua(t){return t.op==="and"}function lm(t){return t.op==="or"}function Jg(t){return KI(t)&&ua(t)}function KI(t){for(const e of t.filters)if(e instanceof Be)return!1;return!0}function um(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+aa(t.value);if(Jg(t))return t.filters.map(e=>um(e)).join(",");{const e=t.filters.map(n=>um(n)).join(",");return`${t.op}(${e})`}}function GI(t,e){return t instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)}(t,e):t instanceof Be?function(r,i){return i instanceof Be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&GI(o,i.filters[a]),!0):!1}(t,e):void ae()}function WI(t,e){const n=t.filters.concat(e);return Be.create(n,t.op)}function QI(t){return t instanceof De?function(n){return`${n.field.canonicalString()} ${n.op} ${aa(n.value)}`}(t):t instanceof Be?function(n){return n.op.toString()+" {"+n.getFilters().map(QI).join(" ,")+"}"}(t):"Filter"}class D6 extends De{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class N6 extends De{constructor(e,n){super(e,"in",n),this.keys=JI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class V6 extends De{constructor(e,n){super(e,"not-in",n),this.keys=JI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class L6 extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return du(n)&&cu(n.arrayValue,this.value)}}class YI extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cu(this.value.arrayValue,n)}}class O6 extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cu(this.value.arrayValue,n)}}class M6 extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!du(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function cm(t,e=null,n=[],r=[],i=null,s=null,o=null){return new F6(t,e,n,r,i,s,o)}function Bs(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>um(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ch(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>aa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>aa(r)).join(",")),e.ue=n}return e.ue}function xu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qv(t.startAt,e.startAt)&&qv(t.endAt,e.endAt)}function Vd(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ld(t,e){return t.filters.filter(n=>n instanceof De&&n.field.isEqual(e))}function Hv(t,e,n){let r=$c,i=!0;for(const s of Ld(t,e)){let o=$c,a=!0;switch(s.op){case"<":case"<=":o=R6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=$c}Bv({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Bv({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Kv(t,e,n){let r=bi,i=!0;for(const s of Ld(t,e)){let o=bi,a=!0;switch(s.op){case">=":case">":o=b6(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=bi}zv({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];zv({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function XI(t,e,n,r,i,s,o,a){return new xh(t,e,n,r,i,s,o,a)}function Ph(t){return new xh(t)}function Gv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function U6(t){return t.collectionGroup!==null}function bl(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(it.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Nd(s,r))}),n.has(it.keyField().canonicalString())||e.ce.push(new Nd(it.keyField(),r))}return e.ce}function bn(t){const e=ue(t);return e.le||(e.le=j6(e,bl(t))),e.le}function j6(t,e){if(t.limitType==="F")return cm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Nd(i.field,s)});const n=t.endAt?new la(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new la(t.startAt.position,t.startAt.inclusive):null;return cm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dm(t,e,n){return new xh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ah(t,e){return xu(bn(t),bn(e))&&t.limitType===e.limitType}function ZI(t){return`${Bs(bn(t))}|lt:${t.limitType}`}function _o(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>QI(i)).join(", ")}]`),Ch(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>aa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>aa(i)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function Pu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of bl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=$v(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,bl(r),i)||r.endAt&&!function(o,a,l){const c=$v(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,bl(r),i))}(t,e)}function eT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tT(t){return(e,n)=>{let r=!1;for(const i of bl(t)){const s=B6(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function B6(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Qi(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return BI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=new We(te.comparator);function An(){return z6}const nT=new We(te.comparator);function hl(...t){let e=nT;for(const n of t)e=e.insert(n.key,n);return e}function rT(t){let e=nT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function dr(){return kl()}function iT(){return kl()}function kl(){return new is(t=>t.toString(),(t,e)=>t.isEqual(e))}const $6=new We(te.comparator),q6=new ze(te.comparator);function Ce(...t){let e=q6;for(const n of t)e=e.add(n);return e}const H6=new ze(Ee);function Yg(){return H6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lu(e)?"-0":e}}function oT(t){return{integerValue:""+t}}function K6(t,e){return LI(e)?oT(e):sT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this._=void 0}}function G6(t,e,n){return t instanceof hu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Gg(s)&&(s=Wg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ca?lT(t,e):t instanceof da?uT(t,e):function(i,s){const o=aT(i,s),a=Wv(o)+Wv(i.Pe);return am(o)&&am(i.Pe)?oT(a):sT(i.serializer,a)}(t,e)}function W6(t,e,n){return t instanceof ca?lT(t,e):t instanceof da?uT(t,e):n}function aT(t,e){return t instanceof fu?function(r){return am(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class hu extends Rh{}class ca extends Rh{constructor(e){super(),this.elements=e}}function lT(t,e){const n=cT(e);for(const r of t.elements)n.some(i=>vr(i,r))||n.push(r);return{arrayValue:{values:n}}}class da extends Rh{constructor(e){super(),this.elements=e}}function uT(t,e){let n=cT(e);for(const r of t.elements)n=n.filter(i=>!vr(i,r));return{arrayValue:{values:n}}}class fu extends Rh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Wv(t){return dt(t.integerValue||t.doubleValue)}function cT(t){return du(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n){this.field=e,this.transform=n}}function J6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ca&&i instanceof ca||r instanceof da&&i instanceof da?oa(r.elements,i.elements,vr):r instanceof fu&&i instanceof fu?vr(r.Pe,i.Pe):r instanceof hu&&i instanceof hu}(t.transform,e.transform)}class Y6{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bh{}function dT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kh(t.key,Zt.none()):new Pa(t.key,t.data,Zt.none());{const n=t.data,r=Xt.empty();let i=new ze(it.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ti(t.key,r,new yn(i.toArray()),Zt.none())}}function X6(t,e,n){t instanceof Pa?function(i,s,o){const a=i.value.clone(),l=Jv(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ti?function(i,s,o){if(!Hc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Jv(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(hT(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Dl(t,e,n,r){return t instanceof Pa?function(s,o,a,l){if(!Hc(s.precondition,o))return a;const c=s.value.clone(),d=Yv(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ti?function(s,o,a,l){if(!Hc(s.precondition,o))return a;const c=Yv(s.fieldTransforms,l,o),d=o.data;return d.setAll(hT(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Hc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Z6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=aT(r.transform,i||null);s!=null&&(n===null&&(n=Xt.empty()),n.set(r.field,s))}return n||null}function Qv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oa(r,i,(s,o)=>J6(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pa extends bh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ti extends bh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Jv(t,e,n){const r=new Map;fe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,W6(o,a,n[i]))}return r}function Yv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,G6(s,o,e))}return r}class kh extends bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fT extends bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&X6(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Dl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Dl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=dT(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,(n,r)=>Qv(n,r))&&oa(this.baseMutations,e.baseMutations,(n,r)=>Qv(n,r))}}class Zg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length);let i=function(){return $6}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Zg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,Ne;function t9(t){switch(t){default:return ae();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function pT(t){if(t===void 0)return yt("GRPC error has no .code"),K.UNKNOWN;switch(t){case Et.OK:return K.OK;case Et.CANCELLED:return K.CANCELLED;case Et.UNKNOWN:return K.UNKNOWN;case Et.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Et.INTERNAL:return K.INTERNAL;case Et.UNAVAILABLE:return K.UNAVAILABLE;case Et.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Et.NOT_FOUND:return K.NOT_FOUND;case Et.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Et.ABORTED:return K.ABORTED;case Et.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Et.DATA_LOSS:return K.DATA_LOSS;default:return ae()}}(Ne=Et||(Et={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=new Ps([4294967295,4294967295],0);function Xv(t){const e=n9().encode(t),n=new EI;return n.update(e),new Uint8Array(n.digest())}function Zv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ps([n,r],0),new Ps([i,s],0)]}class ty{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fl(`Invalid padding: ${n}`);if(r<0)throw new fl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ps.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ps.fromNumber(r)));return i.compare(r9)===1&&(i=new Ps([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Xv(e),[r,i]=Zv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ty(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Xv(e),[r,i]=Zv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Au(pe.min(),i,new We(Ee),An(),Ce())}}class Ru{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ru(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class mT{constructor(e,n){this.targetId=e,this.me=n}}class gT{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class e_{constructor(){this.fe=0,this.ge=n_(),this.pe=Lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ce(),n=Ce(),r=Ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Ru(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=n_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class i9{constructor(e){this.Le=e,this.Be=new Map,this.ke=An(),this.qe=t_(),this.Qe=new We(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Vd(s))if(r===0){const o=new te(s.path);this.Ue(n,o,ht.newNoDocument(o,pe.min()))}else fe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Wi(r).toUint8Array()}catch(l){if(l instanceof zI)return su("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ty(o,i,s)}catch(l){return su(l instanceof fl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Vd(a.target)){const l=new te(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ht.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Au(e,n,this.Qe,this.ke,r);return this.ke=An(),this.qe=t_(),this.Qe=new We(Ee),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new e_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ze(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new e_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function t_(){return new We(te.comparator)}function n_(){return new We(te.comparator)}const s9={asc:"ASCENDING",desc:"DESCENDING"},o9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a9={and:"AND",or:"OR"};class l9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hm(t,e){return t.useProto3Json||Ch(e)?e:{value:e}}function ha(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u9(t,e){return ha(t,e.toTimestamp())}function an(t){return fe(!!t),pe.fromTimestamp(function(n){const r=Yr(n);return new ot(r.seconds,r.nanos)}(t))}function ny(t,e){return fm(t,e).canonicalString()}function fm(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vT(t){const e=Fe.fromString(t);return fe(PT(e)),e}function Od(t,e){return ny(t.databaseId,e.path)}function As(t,e){const n=vT(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(ET(n))}function _T(t,e){return ny(t.databaseId,e)}function wT(t){const e=vT(t);return e.length===4?Fe.emptyPath():ET(e)}function pm(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ET(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function r_(t,e,n){return{name:Od(t,e),fields:n.value.mapValue.fields}}function c9(t,e,n){const r=As(t,e.name),i=an(e.updateTime),s=e.createTime?an(e.createTime):pe.min(),o=new Xt({mapValue:{fields:e.fields}}),a=ht.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function d9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(fe(d===void 0||typeof d=="string"),Lt.fromBase64String(d||"")):(fe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?K.UNKNOWN:pT(c.code);return new ne(d,c.message||"")}(o);n=new gT(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=As(t,r.document.name),s=an(r.document.updateTime),o=r.document.createTime?an(r.document.createTime):pe.min(),a=new Xt({mapValue:{fields:r.document.fields}}),l=ht.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Kc(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=As(t,r.document),s=r.readTime?an(r.readTime):pe.min(),o=ht.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Kc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=As(t,r.document),s=r.removedTargetIds||[];n=new Kc([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new e9(i,s),a=r.targetId;n=new mT(a,o)}}return n}function Md(t,e){let n;if(e instanceof Pa)n={update:r_(t,e.key,e.value)};else if(e instanceof kh)n={delete:Od(t,e.key)};else if(e instanceof ti)n={update:r_(t,e.key,e.data),updateMask:y9(e.fieldMask)};else{if(!(e instanceof fT))return ae();n={verify:Od(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof hu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ca)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof da)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function mm(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Zt.updateTime(an(s.updateTime)):s.exists!==void 0?Zt.exists(s.exists):Zt.none()}(e.currentDocument):Zt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)fe(a.setToServerValue==="REQUEST_TIME"),l=new hu;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new ca(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new da(d)}else"increment"in a?l=new fu(o,a.increment):ae();const c=it.fromServerFormat(a.fieldPath);return new Q6(c,l)}(t,i)):[];if(e.update){e.update.name;const i=As(t,e.update.name),s=new Xt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new yn(c.map(d=>it.fromServerFormat(d)))}(e.updateMask);return new ti(i,s,o,n,r)}return new Pa(i,s,n,r)}if(e.delete){const i=As(t,e.delete);return new kh(i,n)}if(e.verify){const i=As(t,e.verify);return new fT(i,n)}return ae()}function h9(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?an(i.updateTime):an(s);return o.isEqual(pe.min())&&(o=an(s)),new Y6(o,i.transformResults||[])}(n,e))):[]}function IT(t,e){return{documents:[_T(t,e.path)]}}function TT(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_T(t,i);const s=function(c){if(c.length!==0)return xT(Be.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:wo(p.field),direction:p9(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=hm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function ST(t){let e=wT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fe(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const p=CT(h);return p instanceof Be&&Jg(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(E){return new Nd(Eo(E.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Ch(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,_=h.values||[];return new la(_,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,_=h.values||[];return new la(_,p)}(n.endAt)),XI(e,i,o,s,a,"F",l,c)}function f9(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Eo(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Eo(n.unaryFilter.field);return De.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Eo(n.unaryFilter.field);return De.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Eo(n.unaryFilter.field);return De.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return De.create(Eo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Be.create(n.compositeFilter.filters.map(r=>CT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function p9(t){return s9[t]}function m9(t){return o9[t]}function g9(t){return a9[t]}function wo(t){return{fieldPath:t.canonicalString()}}function Eo(t){return it.fromServerFormat(t.fieldPath)}function xT(t){return t instanceof De?function(n){if(n.op==="=="){if(jv(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NAN"}};if(Uv(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jv(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NAN"}};if(Uv(n.value))return{unaryFilter:{field:wo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(n.field),op:m9(n.op),value:n.value}}}(t):t instanceof Be?function(n){const r=n.getFilters().map(i=>xT(i));return r.length===1?r[0]:{compositeFilter:{op:g9(n.op),filters:r}}}(t):ae()}function y9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r,i,s=pe.min(),o=pe.min(),a=Lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.ct=e}}function v9(t,e){let n;if(e.document)n=c9(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=te.fromSegments(e.noDocument.path),i=$s(e.noDocument.readTime);n=ht.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ae();{const r=te.fromSegments(e.unknownDocument.path),i=$s(e.unknownDocument.version);n=ht.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new ot(i[0],i[1]);return pe.fromTimestamp(s)}(e.readTime)),n}function i_(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Fd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Od(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ha(s,o.version.toTimestamp()),createTime:ha(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zs(e.version)};else{if(!e.isUnknownDocument())return ae();r.unknownDocument={path:n.path.toArray(),version:zs(e.version)}}return r}function Fd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $s(t){const e=new ot(t.seconds,t.nanoseconds);return pe.fromTimestamp(e)}function gs(t,e){const n=(e.baseMutations||[]).map(s=>mm(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>mm(t.ct,s)),i=ot.fromMillis(e.localWriteTimeMs);return new Xg(e.batchId,i,n,r)}function pl(t){const e=$s(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$s(t.lastLimboFreeSnapshotVersion):pe.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return fe(s.documents.length===1),bn(Ph(wT(s.documents[0])))}(t.query):function(s){return bn(ST(s))}(t.query),new Br(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Lt.fromBase64String(t.resumeToken))}function RT(t,e){const n=zs(e.snapshotVersion),r=zs(e.lastLimboFreeSnapshotVersion);let i;i=Vd(e.target)?IT(t.ct,e.target):TT(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bT(t){const e=ST({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dm(e,e.limit,"L"):e}function Mf(t,e){return new ey(e.largestBatchId,mm(t.ct,e.overlayMutation))}function s_(t,e){const n=e.path.lastSegment();return[t,on(e.path.popLast()),n]}function o_(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:zs(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{getBundleMetadata(e,n){return a_(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:$s(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return a_(e).put(function(i){return{bundleId:i.id,createTime:zs(an(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return l_(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:bT(s.bundledQuery),readTime:$s(s.readTime)}}(r)})}saveNamedQuery(e,n){return l_(e).put(function(i){return{name:i.name,readTime:zs(an(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function a_(t){return Ot(t,"bundles")}function l_(t){return Ot(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Dh(e,r)}getOverlay(e,n){return Za(e).get(s_(this.userId,n)).next(r=>r?Mf(this.serializer,r):null)}getOverlays(e,n){const r=dr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new ey(n,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(on(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Za(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=dr(),s=on(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Za(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Mf(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=dr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Za(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const h=Mf(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return Za(e).put(function(i,s,o){const[a,l,c]=s_(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Md(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Za(t){return Ot(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(dt(e.integerValue));else if("doubleValue"in e){const r=dt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),lu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Yr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Wi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?$I(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ae()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),te.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}ys.bt=new ys;function w9(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function u_(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=w9(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class E9{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=u_(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=u_(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class I9{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class T9{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class el{constructor(){this.Gt=new E9,this.zt=new I9(this.Gt),this.jt=new T9(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new vs(this.indexId,this.documentKey,this.arrayValue,r)}}function gi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=c_(t.arrayValue,e.arrayValue),n!==0?n:(n=c_(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function c_(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this.Yt=new ze((n,r)=>it.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(fe(e.collectionGroup===this.collectionId),this.en)return!1;const n=im(e);if(n!==void 0&&!this.nn(n))return!1;const r=ps(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new ze(it.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Bc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Bc(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Bc(r.field,r.dir==="asc"?0:1)));return new Dd(Dd.UNKNOWN_ID,this.collectionId,n,au.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){var e,n;if(fe(t instanceof De||t instanceof Be),t instanceof De){if(t instanceof YI){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>De.create(t.field,"==",s)))||[];return Be.create(i,"or")}return t}const r=t.filters.map(i=>kT(i));return Be.create(r,t.op)}function S9(t){if(t.getFilters().length===0)return[];const e=vm(kT(t));return fe(DT(e)),gm(e)||ym(e)?[e]:e.getFilters()}function gm(t){return t instanceof De}function ym(t){return t instanceof Be&&Jg(t)}function DT(t){return gm(t)||ym(t)||function(n){if(n instanceof Be&&lm(n)){for(const r of n.getFilters())if(!gm(r)&&!ym(r))return!1;return!0}return!1}(t)}function vm(t){if(fe(t instanceof De||t instanceof Be),t instanceof De)return t;if(t.filters.length===1)return vm(t.filters[0]);const e=t.filters.map(r=>vm(r));let n=Be.create(e,t.op);return n=Ud(n),DT(n)?n:(fe(n instanceof Be),fe(ua(n)),fe(n.filters.length>1),n.filters.reduce((r,i)=>ry(r,i)))}function ry(t,e){let n;return fe(t instanceof De||t instanceof Be),fe(e instanceof De||e instanceof Be),n=t instanceof De?e instanceof De?function(i,s){return Be.create([i,s],"and")}(t,e):h_(t,e):e instanceof De?h_(e,t):function(i,s){if(fe(i.filters.length>0&&s.filters.length>0),ua(i)&&ua(s))return WI(i,s.getFilters());const o=lm(i)?i:s,a=lm(i)?s:i,l=o.filters.map(c=>ry(c,a));return Be.create(l,"or")}(t,e),Ud(n)}function h_(t,e){if(ua(e))return WI(e,t.getFilters());{const n=e.filters.map(r=>ry(t,r));return Be.create(n,"or")}}function Ud(t){if(fe(t instanceof De||t instanceof Be),t instanceof De)return t;const e=t.getFilters();if(e.length===1)return Ud(e[0]);if(KI(t))return t;const n=e.map(i=>Ud(i)),r=[];return n.forEach(i=>{i instanceof De?r.push(i):i instanceof Be&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(){this._n=new iy}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Dn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class iy{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ze(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Uint8Array(0);class x9{constructor(e,n){this.databaseId=n,this.an=new iy,this.un=new is(r=>Bs(r),(r,i)=>xu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:on(i)};return f_(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[RI(n),""],!1,!0);return f_(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(cr(o.parent))}return r})}addFieldIndex(e,n){const r=tl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=mo(e);return s.next(a=>{o.put(o_(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=tl(e),i=mo(e),s=po(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=tl(e),r=po(e),i=mo(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new d_(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=po(e);let i=!0;const s=new Map;return M.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ce();const a=[];return M.forEach(s,(l,c)=>{G("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${Bs(n)}`);const d=function(I,k){const V=im(k);if(V===void 0)return null;for(const F of Ld(I,V.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(c,l),h=function(I,k){const V=new Map;for(const F of ps(k))for(const g of Ld(I,F.fieldPath))switch(g.op){case"==":case"in":V.set(F.fieldPath.canonicalString(),g.value);break;case"not-in":case"!=":return V.set(F.fieldPath.canonicalString(),g.value),Array.from(V.values())}return null}(c,l),p=function(I,k){const V=[];let F=!0;for(const g of ps(k)){const v=g.kind===0?Hv(I,g.fieldPath,I.startAt):Kv(I,g.fieldPath,I.startAt);V.push(v.value),F&&(F=v.inclusive)}return new la(V,F)}(c,l),_=function(I,k){const V=[];let F=!0;for(const g of ps(k)){const v=g.kind===0?Kv(I,g.fieldPath,I.endAt):Hv(I,g.fieldPath,I.endAt);V.push(v.value),F&&(F=v.inclusive)}return new la(V,F)}(c,l),E=this.hn(l,c,p),P=this.hn(l,c,_),N=this.Pn(l,c,h),S=this.In(l.indexId,d,E,p.inclusive,P,_.inclusive,N);return M.forEach(S,y=>r.G(y,n.limit).next(I=>{I.forEach(k=>{const V=te.fromSegments(k.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return M.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=S9(Be.create(e.filters,"and")).map(r=>cm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Tn(n[h/c]):_c,_=this.En(e,p,r[h%c],i),E=this.dn(e,p,s[h%c],o),P=a.map(N=>this.En(e,p,N,!0));d.push(...this.createRange(_,E,P))}return d}En(e,n,r,i){const s=new vs(e,te.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new vs(e,te.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new d_(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return M.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new ze(it.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new el;for(const i of ps(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);ys.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new el;return ys.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new el;return ys.bt.Pt(Qg(this.databaseId,n),r.Ht(function(s){const o=ps(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new el);let s=0;for(const o of ps(e)){const a=r[s++];for(const l of i)if(this.Vn(n,o.fieldPath)&&du(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);ys.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new el;l.seed(a.Wt()),ys.bt.Pt(o,l.Ht(n.kind)),s.push(l)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof De&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=tl(e),i=mo(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new au(h.sequenceNumber,new Dn($s(h.readTime),new te(cr(h.documentKey)),h.largestBatchId)):au.empty(),_=d.fields.map(([E,P])=>new Bc(it.fromServerFormat(E),P));return new Dd(d.indexId,d.collectionGroup,_,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ee(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=tl(e),s=mo(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(o_(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.pn(e,i,l).next(c=>{const d=this.yn(s,l);return c.isEqual(d)?M.resolve():this.wn(e,s,l,c,d)}))))})}Sn(e,n,r,i){return po(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return po(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=po(e);let s=new ze(gi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new vs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new ze(gi);const i=this.An(n,e);if(i==null)return r;const s=im(n);if(s!=null){const o=e.data.field(s.fieldPath);if(du(o))for(const a of o.arrayValue.values||[])r=r.add(new vs(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new vs(n.indexId,e.key,_c,i));return r}wn(e,n,r,i,s){G("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const _=l.getIterator(),E=c.getIterator();let P=fo(_),N=fo(E);for(;P||N;){let S=!1,y=!1;if(P&&N){const I=d(P,N);I<0?y=!0:I>0&&(S=!0)}else P!=null?y=!0:S=!0;S?(h(N),N=fo(E)):y?(p(P),P=fo(_)):(P=fo(_),N=fo(E))}}(i,s,gi,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),M.waitFor(o)}gn(e){let n=1;return mo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>gi(o,a)).filter((o,a,l)=>!a||gi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=gi(o,e),l=gi(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,_c,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,_c,[]];s.push(IDBKeyRange.bound(a,l))}return s}Dn(e,n){return gi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(p_)}getMinOffset(e,n){return M.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||ae())).next(p_)}}function f_(t){return Ot(t,"collectionParents")}function po(t){return Ot(t,"indexEntries")}function tl(t){return Ot(t,"indexConfiguration")}function mo(t){return Ot(t,"indexState")}function p_(t){fe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Hg(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Dn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{fe(a===1)}));const c=[];for(const d of n.mutations){const h=OI(e,d.key.path,n.batchId);s.push(i.delete(h)),c.push(d.key)}return M.waitFor(s).next(()=>c)}function jd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ae();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);class Nh{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){fe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Nh(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yi(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Io(e),o=yi(e);return o.add({}).next(a=>{fe(typeof a=="number");const l=new Xg(a,n,r,i),c=function(_,E,P){const N=P.baseMutations.map(y=>Md(_.ct,y)),S=P.mutations.map(y=>Md(_.ct,y));return{userId:E,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:N,mutations:S}}(this.serializer,this.userId,l),d=[];let h=new ze((p,_)=>Ee(p.canonicalString(),_.canonicalString()));for(const p of i){const _=OI(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(_,c6))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),M.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return yi(e).get(n).next(r=>r?(fe(r.userId===this.userId),gs(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?M.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return yi(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(fe(a.batchId>=r),s=gs(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yi(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yi(e).U("userMutationsIndex",n).next(r=>r.map(i=>gs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=zc(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Io(e).J({range:i},(o,a,l)=>{const[c,d,h]=o,p=cr(d);if(c===this.userId&&n.path.isEqual(p))return yi(e).get(h).next(_=>{if(!_)throw ae();fe(_.userId===this.userId),s.push(gs(this.serializer,_))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(Ee);const i=[];return n.forEach(s=>{const o=zc(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Io(e).J({range:a},(c,d,h)=>{const[p,_,E]=c,P=cr(_);p===this.userId&&s.path.isEqual(P)?r=r.add(E):h.done()});i.push(l)}),M.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=zc(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ze(Ee);return Io(e).J({range:o},(l,c,d)=>{const[h,p,_]=l,E=cr(p);h===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(_)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(yi(e).get(s).next(o=>{if(o===null)throw ae();fe(o.userId===this.userId),r.push(gs(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return NT(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Io(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=cr(s[1]);i.push(l)}else a.done()}).next(()=>{fe(i.length===0)})})}containsKey(e,n){return VT(e,this.userId,n)}xn(e){return LT(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function VT(t,e,n){const r=zc(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Io(t).J({range:s,H:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function yi(t){return Ot(t,"mutations")}function Io(t){return Ot(t,"documentMutations")}function LT(t){return Ot(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new qs(0)}static Ln(){return new qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new qs(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>pe.fromTimestamp(new ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>go(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(fe(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return go(e).J((o,a)=>{const l=pl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return go(e).J((r,i)=>{const s=pl(i);n(s)})}Bn(e){return g_(e).get("targetGlobalKey").next(n=>(fe(n!==null),n))}kn(e,n){return g_(e).put("targetGlobalKey",n)}qn(e,n){return go(e).put(RT(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Bs(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return go(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=pl(a);xu(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Pi(e);return n.forEach(o=>{const a=on(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=Pi(e);return M.forEach(n,s=>{const o=on(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Pi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Pi(e);let s=Ce();return i.J({range:r,H:!0},(o,a,l)=>{const c=cr(o[1]),d=new te(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=on(n.path),i=IDBKeyRange.bound([r],[RI(r)],!1,!0);let s=0;return Pi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return go(e).get(n).next(r=>r?pl(r):null)}}function go(t){return Ot(t,"targets")}function g_(t){return Ot(t,"targetGlobal")}function Pi(t){return Ot(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_([t,e],[n,r]){const i=Ee(t,n);return i===0?Ee(e,r):i}class A9{constructor(e){this.Kn=e,this.buffer=new ze(y_),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();y_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class R9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rs(n)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ns(n)}await this.zn(3e5)})}}class b9{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(gn.oe);const r=new A9(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(m_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m_):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),vo()<=be.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function k9(t,e){return new b9(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,n){this.db=e,this.garbageCollector=k9(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return wc(e,r)}removeReference(e,n,r){return wc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return wc(e,n)}er(e,n){return function(i,s){let o=!1;return LT(i).Y(a=>VT(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,pe.min()),Pi(e).delete(function(h){return[0,on(h.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return wc(e,n)}Xn(e,n){const r=Pi(e);let i,s=gn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==gn.oe&&n(new te(cr(i)),s),s=c,i=l):s=gn.oe}).next(()=>{s!==gn.oe&&n(new te(cr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wc(t,e){return Pi(t).put(function(r,i){return{targetId:0,path:on(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.changes=new is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return cs(e).put(r)}removeEntry(e,n,r){return cs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Fd(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=ht.newInvalidDocument(n);return cs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(nl(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:ht.newInvalidDocument(n)};return cs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(nl(n))},(i,s)=>{r={document:this.nr(n,s),size:jd(s)}}).next(()=>r)}getEntries(e,n){let r=An();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=An(),i=new We(te.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,jd(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return M.resolve();let i=new ze(w_);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(nl(i.first()),nl(i.last())),o=i.getIterator();let a=o.getNext();return cs(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{const h=te.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&w_(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(nl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Fd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cs(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=An();for(const h of c){const p=this.nr(te.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Pu(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=An();const o=__(n,r),a=__(n,Dn.max());return cs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.nr(te.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new V9(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return v_(e).get("remoteDocumentGlobalKey").next(n=>(fe(!!n),n))}tr(e,n){return v_(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=v9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(pe.min())))return r}return ht.newInvalidDocument(e)}}function MT(t){return new N9(t)}class V9 extends OT{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new is(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new ze((s,o)=>Ee(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=i_(this.ar.serializer,o);i=i.add(s.path.popLast());const c=jd(l);r+=c-a.size,n.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=i_(this.ar.serializer,o.convertToNoDocument(pe.min()));n.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function v_(t){return Ot(t,"remoteDocumentGlobal")}function cs(t){return Ot(t,"remoteDocumentsV14")}function nl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function __(t,e){const n=e.documentKey.path.toArray();return[t,Fd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function w_(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ee(n[s],r[s]),i)return i;return i=Ee(n.length,r.length),i||(i=Ee(n[n.length-2],r[r.length-2]),i||Ee(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Dl(r.mutation,i,yn.empty(),ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){const i=dr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=hl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=dr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=An();const o=kl(),a=function(){return kl()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ti)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Dl(d.mutation,c,d.mutation.getFieldMask(),ot.now())):o.set(c.key,yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new L9(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=kl();let i=new We((o,a)=>o-a),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||yn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||Ce()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=iT();d.forEach(p=>{if(!s.has(p)){const _=dT(n.get(p),r.get(p));_!==null&&h.set(p,_),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):U6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(dr());let a=-1,l=s;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ce())).next(d=>({batchId:a,changes:rT(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=hl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=hl();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const c=function(h,p){return new xh(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,ht.newInvalidDocument(d)))});let a=hl();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Dl(d.mutation,c,yn.empty(),ot.now()),Pu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:an(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:bT(i.bundledQuery),readTime:an(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(){this.overlays=new We(te.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=dr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=dr(),s=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new We((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=dr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=dr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ey(n,r));let s=this.hr.get(n);s===void 0&&(s=Ce(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.Pr=new ze(Dt.Ir),this.Tr=new ze(Dt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Dt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Dt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new te(new Fe([])),r=new Dt(n,e),i=new Dt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new te(new Fe([])),r=new Dt(n,e),i=new Dt(n,e+1);let s=Ce();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Dt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||Ee(e.pr,n.pr)}static Er(e,n){return Ee(e.pr,n.pr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ze(Dt.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Xg(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dt(n,0),i=new Dt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(Ee);return n.forEach(i=>{const s=new Dt(i,0),o=new Dt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const o=new Dt(new te(s),0);let a=new ze(Ee);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),M.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(n.mutations,i=>{const s=new Dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Dt(n,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e){this.vr=e,this.docs=function(){return new We(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=An();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ht.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=An();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Hg(kI(d),r)<=0||(i.has(d.key)||Pu(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Fr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new j9(this)}getSize(e){return M.resolve(this.size)}}class j9 extends OT{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e){this.persistence=e,this.Mr=new is(n=>Bs(n),xu),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new sy,this.targetCount=0,this.Lr=qs.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new qs(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n){this.Br={},this.overlays={},this.kr=new gn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new B9(this),this.indexManager=new C9,this.remoteDocumentCache=function(i){return new U9(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new AT(n),this.$r=new O9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new M9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new F9(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new z9(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return M.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class z9 extends NI{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.zr=new sy,this.jr=null}static Hr(e){return new Vh(e)}get Jr(){if(this.jr)return this.jr;throw ae()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{const i=te.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,pe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Sh("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lv,{unique:!0}),l.createObjectStore("documentMutations")}(e),E_(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),E_(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lv,{unique:!0});const h=c.store("mutations"),p=d.map(_=>h.put(_));return M.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:I6});c.createIndex("collectionPathOverlayIndex",T6,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",S6,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:d6});c.createIndex("documentKeyIndex",h6),c.createIndex("collectionGroupIndex",f6)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:v6}).createIndex("sequenceNumberIndex",_6,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:w6}).createIndex("documentKeyIndex",E6,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=jd(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{fe(l.userId===s.userId);const c=gs(this.serializer,l);return NT(e,s.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Fe(o),c=function(h){return[0,on(h)]}(l);s.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:on(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:y6});const r=n.store("collectionParents"),i=new iy,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:on(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Fe(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=cr(a);return s(d.popLast())}))}ri(e){const n=e.store("targets");return n.J((r,i)=>{const s=pl(i),o=RT(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new te(Fe.fromString(h.document.name).popFirst(5)):h.noDocument?te.fromSegments(h.noDocument.path):h.unknownDocument?te.fromSegments(h.unknownDocument.path):ae()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>M.waitFor(i))}si(e,n){const r=n.store("mutations"),i=MT(this.serializer),s=new UT(Vh.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:Ce();gs(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),M.forEach(a,(l,c)=>{const d=new Jt(c),h=Dh.lt(this.serializer,d),p=s.getIndexManager(d),_=Nh.lt(d,this.serializer,p,s.referenceDelegate);return new FT(i,_,h,p).recalculateAndSaveOverlaysForDocumentKeys(new sm(n,gn.oe),l).next()})})}}function E_(t){t.createObjectStore("targetDocuments",{keyPath:m6}).createIndex("documentTargetsIndex",g6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",p6,{unique:!0}),t.createObjectStore("targetGlobal")}const Ff="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class oy{constructor(e,n,r,i,s,o,a,l,c,d,h=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=d,this.ui=h,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=p=>Promise.resolve(),!oy.D())throw new ne(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new D9(this,i),this.Ti=n+"main",this.serializer=new AT(l),this.Ei=new qi(this.Ti,this.ui,new $9(this.serializer)),this.Qr=new P9(this.referenceDelegate,this.serializer),this.remoteDocumentCache=MT(this.serializer),this.$r=new _9,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&yt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(K.FAILED_PRECONDITION,Ff);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new gn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ec(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(rs(e))return G("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return rl(e).get("owner").next(n=>M.resolve(this.Si(n)))}bi(e){return Ec(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Ot(n,"clientMetadata");return r.U().next(i=>{const s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?M.resolve(!0):rl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new ne(K.FAILED_PRECONDITION,Ff);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ec(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&G("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new sm(e,gn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Ec(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Nh.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new x9(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Dh.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){G("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===16?x6:l===15?jI:l===14?UI:l===13?FI:l===12?C6:l===11?MI:void ae()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new sm(a,this.kr?this.kr.next():gn.oe),n==="readwrite-primary"?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new ne(K.FAILED_PRECONDITION,DI);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return rl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ne(K.FAILED_PRECONDITION,Ff)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rl(e).put("owner",n)}static D(){return qi.D()}yi(e){const n=rl(e);return n.get("owner").next(r=>this.Si(r)?(G("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(yt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;LE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return G("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return yt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){yt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rl(t){return Ot(t,"owner")}function Ec(t){return Ot(t,"clientMetadata")}function jT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ce(),i=Ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ay(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return LE()?8:VI(St())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new q9;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(vo()<=be.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(vo()<=be.DEBUG&&G("QueryEngine","Query:",_o(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(vo()<=be.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):M.resolve())}ji(e,n){if(Gv(n))return M.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dm(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ce(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,dm(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return Gv(n)||i.isEqual(pe.min())?M.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?M.resolve(null):(vo()<=be.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_o(n)),this.es(e,o,n,bI(i,-1)).next(a=>a))})}Zi(e,n){let r=new ze(tT(e));return n.forEach((i,s)=>{Pu(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return vo()<=be.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",_o(n)),this.zi.getDocumentsMatchingQuery(e,n,Dn.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new We(Ee),this.rs=new is(s=>Bs(s),xu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FT(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function zT(t,e,n,r){return new H9(t,e,n,r)}async function $T(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ce();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function K9(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let _=M.resolve();return p.forEach(E=>{_=_.next(()=>d.getEntry(l,E)).next(P=>{const N=c.docVersions.get(E);fe(N!==null),P.version.compareTo(N)<0&&(h.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),d.addEntry(P)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qT(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function G9(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,h)));let _=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?_=_.withResumeToken(Lt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(h,_),function(P,N,S){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,_,d)&&a.push(n.Qr.updateTargetData(s,_))});let l=An(),c=Ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(W9(s,o,e.documentUpdates).next(d=>{l=d.cs,c=d.ls})),!r.isEqual(pe.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function W9(t,e,n){let r=Ce(),i=Ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=An();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(pe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function Q9(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bd(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function fa(t,e,n){const r=ue(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!rs(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function _m(t,e,n){const r=ue(t);let i=pe.min(),s=Ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=ue(l),p=h.rs.get(d);return p!==void 0?M.resolve(h.ns.get(p)):h.Qr.getTargetData(c,d)}(r,o,bn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:pe.min(),n?s:Ce())).next(a=>(GT(r,eT(e),a),{documents:a,hs:s})))}function HT(t,e){const n=ue(t),r=ue(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function KT(t,e){const n=ue(t),r=n.ss.get(e)||pe.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,bI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(GT(n,e,i),i))}function GT(t,e,n){let r=t.ss.get(e)||pe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function I_(t,e){return`firestore_clients_${t}_${e}`}function T_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Uf(t,e){return`firestore_targets_${t}_${e}`}class zd{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ne(i.error.code,i.error.message))),o?new zd(e,n,i.state,s):(yt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ne(r.error.code,r.error.message))),s?new Nl(e,r.state,i):(yt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $d{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Yg();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=LI(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new $d(e,s):(yt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class ly{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new ly(n.clientId,n.onlineState):(yt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wm{constructor(){this.activeTargetIds=Yg()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jf{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new We(Ee),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=I_(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new wm),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(I_(this.persistenceKey,r));if(i){const s=$d.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Uf(this.persistenceKey,e));if(r){const i=Nl.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uf(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G("SharedClientState","READ",e,n),n}setItem(e,n){G("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){G("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(G("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(s){let o=gn.oe;if(s!=null)try{const a=JSON.parse(s);fe(typeof a=="number"),o=a}catch(a){yt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==gn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new zd(this.currentUser,e,n,r),s=T_(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const n=T_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const i=Uf(this.persistenceKey,e),s=new Nl(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return $d.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return zd.Es(new Jt(s),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Nl.Es(i,n)}xs(e){return ly.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);G("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Yg();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class WT{constructor(){this.no=new wm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new wm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function Bf(){return Ic===null?Ic=function(){return 268435456+Math.round(2147483648*Math.random())}():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class Z9 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Bf(),l=this.vo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(d=>(G("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw su("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=Y9[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Bf();return new Promise((o,a)=>{const l=new II;l.setWithCredentials(!0),l.listenOnce(SI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case jc.NO_ERROR:const d=l.getResponseJson();G(Qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case jc.TIMEOUT:G(Qt,`RPC '${e}' ${s} timed out`),a(new ne(K.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:const h=l.getStatus();if(G(Qt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const E=function(N){const S=N.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(S)>=0?S:K.UNKNOWN}(_.status);a(new ne(E,_.message))}else a(new ne(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(K.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{G(Qt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);G(Qt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Bf(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PI(),a=xI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new TI({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");G(Qt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,_=!1;const E=new X9({lo:N=>{_?G(Qt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(p||(G(Qt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),G(Qt,`RPC '${e}' stream ${i} sending:`,N),h.send(N))},ho:()=>h.close()}),P=(N,S,y)=>{N.listen(S,I=>{try{y(I)}catch(k){setTimeout(()=>{throw k},0)}})};return P(h,dl.EventType.OPEN,()=>{_||(G(Qt,`RPC '${e}' stream ${i} transport opened.`),E.mo())}),P(h,dl.EventType.CLOSE,()=>{_||(_=!0,G(Qt,`RPC '${e}' stream ${i} transport closed`),E.po())}),P(h,dl.EventType.ERROR,N=>{_||(_=!0,su(Qt,`RPC '${e}' stream ${i} transport errored:`,N),E.po(new ne(K.UNAVAILABLE,"The operation could not be completed")))}),P(h,dl.EventType.MESSAGE,N=>{var S;if(!_){const y=N.data[0];fe(!!y);const I=y,k=I.error||((S=I[0])===null||S===void 0?void 0:S.error);if(k){G(Qt,`RPC '${e}' stream ${i} received error:`,k);const V=k.status;let F=function(T){const x=Et[T];if(x!==void 0)return pT(x)}(V),g=k.message;F===void 0&&(F=K.INTERNAL,g="Unknown error status: "+V+" with message "+k.message),_=!0,E.po(new ne(F,g)),h.close()}else G(Qt,`RPC '${e}' stream ${i} received:`,y),E.yo(y)}}),P(a,CI.STAT_EVENT,N=>{N.stat===rm.PROXY?G(Qt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===rm.NOPROXY&&G(Qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){return typeof window<"u"?window:null}function Gc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){return new l9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new JT(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(yt(n.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new ne(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e5 extends YT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=d9(this.serializer,e),r=function(s){if(!("targetChange"in s))return pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?an(o.readTime):pe.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=pm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Vd(l)?{documents:IT(s,l)}:{query:TT(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yT(s,o.resumeToken);const c=hm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(pe.min())>0){a.readTime=ha(s,o.snapshotVersion.toTimestamp());const c=hm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=f9(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=pm(this.serializer),n.removeTarget=e,this.i_(n)}}class t5 extends YT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=h9(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.A_(r,n)}return fe(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=pm(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Md(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,fm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(K.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,fm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(K.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class r5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(yt(n),this.y_=!1):G("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Ys(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.M_.add(4),await bu(c),c.N_.set("Unknown"),c.M_.delete(4),await Oh(c)}(this))})}),this.N_=new r5(r,i)}}async function Oh(t){if(Ys(t))for(const e of t.x_)await e(!0)}async function bu(t){for(const e of t.x_)await e(!1)}function Mh(t,e){const n=ue(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),dy(n)?cy(n):Ra(n).Xo()&&uy(n,e))}function pa(t,e){const n=ue(t),r=Ra(n);n.F_.delete(e),r.Xo()&&XT(n,e),n.F_.size===0&&(r.Xo()?r.n_():Ys(n)&&n.N_.set("Unknown"))}function uy(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ra(t).P_(e)}function XT(t,e){t.L_.xe(e),Ra(t).I_(e)}function cy(t){t.L_=new i9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ra(t).start(),t.N_.w_()}function dy(t){return Ys(t)&&!Ra(t).Zo()&&t.F_.size>0}function Ys(t){return ue(t).M_.size===0}function ZT(t){t.L_=void 0}async function s5(t){t.N_.set("Online")}async function o5(t){t.F_.forEach((e,n)=>{uy(t,e)})}async function a5(t,e){ZT(t),dy(t)?(t.N_.D_(e),cy(t)):t.N_.set("Unknown")}async function l5(t,e,n){if(t.N_.set("Online"),e instanceof gT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qd(t,r)}else if(e instanceof Kc?t.L_.Ke(e):e instanceof mT?t.L_.He(e):t.L_.We(e),!n.isEqual(pe.min()))try{const r=await qT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.F_.get(c);d&&s.F_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.F_.get(l);if(!d)return;s.F_.set(l,d.withResumeToken(Lt.EMPTY_BYTE_STRING,d.snapshotVersion)),XT(s,l);const h=new Br(d.target,l,c,d.sequenceNumber);uy(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await qd(t,r)}}async function qd(t,e,n){if(!rs(e))throw e;t.M_.add(1),await bu(t),t.N_.set("Offline"),n||(n=()=>qT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Oh(t)})}function eS(t,e){return e().catch(n=>qd(t,n,e))}async function Aa(t){const e=ue(t),n=Ji(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;u5(e);)try{const i=await Q9(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,c5(e,i)}catch(i){await qd(e,i)}tS(e)&&nS(e)}function u5(t){return Ys(t)&&t.v_.length<10}function c5(t,e){t.v_.push(e);const n=Ji(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function tS(t){return Ys(t)&&!Ji(t).Zo()&&t.v_.length>0}function nS(t){Ji(t).start()}async function d5(t){Ji(t).V_()}async function h5(t){const e=Ji(t);for(const n of t.v_)e.d_(n.mutations)}async function f5(t,e,n){const r=t.v_.shift(),i=Zg.from(r,e,n);await eS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Aa(t)}async function p5(t,e){e&&Ji(t).E_&&await async function(r,i){if(function(o){return t9(o)&&o!==K.ABORTED}(i.code)){const s=r.v_.shift();Ji(r).t_(),await eS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Aa(r)}}(t,e),tS(t)&&nS(t)}async function C_(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Ys(n);n.M_.add(3),await bu(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Oh(n)}async function Em(t,e){const n=ue(t);e?(n.M_.delete(2),await Oh(n)):e||(n.M_.add(2),await bu(n),n.N_.set("Unknown"))}function Ra(t){return t.B_||(t.B_=function(n,r,i){const s=ue(n);return s.f_(),new e5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:s5.bind(null,t),To:o5.bind(null,t),Ao:a5.bind(null,t),h_:l5.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),dy(t)?cy(t):t.N_.set("Unknown")):(await t.B_.stop(),ZT(t))})),t.B_}function Ji(t){return t.k_||(t.k_=function(n,r,i){const s=ue(n);return s.f_(),new t5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:d5.bind(null,t),Ao:p5.bind(null,t),R_:h5.bind(null,t),A_:f5.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Aa(t)):(await t.k_.stop(),t.v_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new hy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(t,e){if(yt("AsyncQueue",`${e}: ${t}`),rs(t))return new ne(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=hl(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new Go(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Go;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(){this.q_=new We(te.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ae():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ma{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ma(e,n,Go.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class g5{constructor(){this.queries=new is(e=>ZI(e),Ah),this.onlineState="Unknown",this.z_=new Set}}async function rS(t,e){const n=ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new m5,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=fy(o,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&py(n)}async function iS(t,e){const n=ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function y5(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&py(n)}function v5(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function py(t){t.z_.forEach(e=>{e.next()})}var Im,P_;(P_=Im||(Im={})).J_="default",P_.Cache="cache";class sS{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ma(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Im.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.key=e}}class aS{constructor(e){this.key=e}}class _5{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ce(),this.mutatedKeys=Ce(),this.Ia=tT(e),this.Ta=new Go(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new x_,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),_=Pu(this.query,h)?h:null,E=!!p&&this.mutatedKeys.has(p.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let N=!1;p&&_?p.data.isEqual(_.data)?E!==P&&(r.track({type:3,doc:_}),N=!0):this.Ra(p,_)||(r.track({type:2,doc:_}),N=!0,(l&&this.Ia(_,l)>0||c&&this.Ia(_,c)<0)&&(a=!0)):!p&&_?(r.track({type:0,doc:_}),N=!0):p&&!_&&(r.track({type:1,doc:p}),N=!0,(l||c)&&(a=!0)),N&&(_?(o=o.add(_),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((d,h)=>function(_,E){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return P(_)-P(E)}(d.type,h.type)||this.Ia(d.doc,h.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new ma(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new x_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ce(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new aS(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new oS(r))}),n}pa(e){this.la=e.hs,this.Pa=Ce();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return ma.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class w5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class E5{constructor(e){this.key=e,this.wa=!1}}class I5{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new is(a=>ZI(a),Ah),this.Da=new Map,this.Ca=new Set,this.va=new We(te.comparator),this.Fa=new Map,this.Ma=new sy,this.xa={},this.Oa=new Map,this.Na=qs.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function T5(t,e,n=!0){const r=Fh(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await lS(r,e,n,!0),i}async function S5(t,e){const n=Fh(t);await lS(n,e,!0,!1)}async function lS(t,e,n,r){const i=await Bd(t.localStore,bn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await my(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Mh(t.remoteStore,i),a}async function my(t,e,n,r,i){t.Ba=(h,p,_)=>async function(P,N,S,y){let I=N.view.da(S);I.Xi&&(I=await _m(P.localStore,N.query,!1).then(({documents:g})=>N.view.da(g,I)));const k=y&&y.targetChanges.get(N.targetId),V=y&&y.targetMismatches.get(N.targetId)!=null,F=N.view.applyChanges(I,P.isPrimaryClient,k,V);return Tm(P,N.targetId,F.fa),F.snapshot}(t,h,p,_);const s=await _m(t.localStore,e,!0),o=new _5(e,s.hs),a=o.da(s.documents),l=Ru.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Tm(t,n,c.fa);const d=new w5(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function C5(t,e,n){const r=ue(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Ah(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pa(r.remoteStore,i.targetId),ga(r,i.targetId)}).catch(ns)):(ga(r,i.targetId),await fa(r.localStore,i.targetId,!0))}async function x5(t,e){const n=ue(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pa(n.remoteStore,r.targetId))}async function P5(t,e,n){const r=_y(t);try{const i=await function(o,a){const l=ue(o),c=ot.now(),d=a.reduce((_,E)=>_.add(E.key),Ce());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=An(),P=Ce();return l.os.getEntries(_,d).next(N=>{E=N,E.forEach((S,y)=>{y.isValidDocument()||(P=P.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,E)).next(N=>{h=N;const S=[];for(const y of a){const I=Z6(y,h.get(y.key).overlayedDocument);I!=null&&S.push(new ti(y.key,I,qI(I.value.mapValue),Zt.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,S,a)}).next(N=>{p=N;const S=N.applyToLocalDocumentSet(h,P);return l.documentOverlayCache.saveOverlays(_,N.batchId,S)})}).then(()=>({batchId:p.batchId,changes:rT(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new We(Ee)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await ss(r,i.changes),await Aa(r.remoteStore)}catch(i){const s=fy(i,"Failed to persist write");n.reject(s)}}async function uS(t,e){const n=ue(t);try{const r=await G9(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?fe(o.wa):i.removedDocuments.size>0&&(fe(o.wa),o.wa=!1))}),await ss(n,r,e)}catch(r){await ns(r)}}function A_(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.U_)p.j_(a)&&(c=!0)}),c&&py(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function A5(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new We(te.comparator);o=o.insert(s,ht.newNoDocument(s,pe.min()));const a=Ce().add(s),l=new Au(pe.min(),new Map,new We(Ee),o,a);await uS(r,l),r.va=r.va.remove(s),r.Fa.delete(e),vy(r)}else await fa(r.localStore,e,!1).then(()=>ga(r,e,n)).catch(ns)}async function R5(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await K9(n.localStore,e);yy(n,r,null),gy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ss(n,i)}catch(i){await ns(i)}}async function b5(t,e,n){const r=ue(t);try{const i=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(fe(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);yy(r,e,n),gy(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ss(r,i)}catch(i){await ns(i)}}function gy(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function yy(t,e,n){const r=ue(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function ga(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||cS(t,r)})}function cS(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(pa(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),vy(t))}function Tm(t,e,n){for(const r of n)r instanceof oS?(t.Ma.addReference(r.key,e),k5(t,r)):r instanceof aS?(G("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||cS(t,r.key)):ae()}function k5(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(G("SyncEngine","New document in limbo: "+n),t.Ca.add(r),vy(t))}function vy(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new te(Fe.fromString(e)),r=t.Na.next();t.Fa.set(r,new E5(n)),t.va=t.va.insert(n,r),Mh(t.remoteStore,new Br(bn(Ph(n.path)),r,"TargetPurposeLimboResolution",gn.oe))}}async function ss(t,e,n){const r=ue(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient){const d=c&&!c.fromCache;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=ay.Ki(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const d=ue(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,p=>M.forEach(p.qi,_=>d.persistence.referenceDelegate.addReference(h,p.targetId,_)).next(()=>M.forEach(p.Qi,_=>d.persistence.referenceDelegate.removeReference(h,p.targetId,_)))))}catch(h){if(!rs(h))throw h;G("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const _=d.ns.get(p),E=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(E);d.ns=d.ns.insert(p,P)}}}(r.localStore,s))}async function D5(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await $T(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new ne(K.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ss(n,r.us)}}function N5(t,e){const n=ue(t),r=n.Fa.get(e);if(r&&r.wa)return Ce().add(r.key);{let i=Ce();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}async function V5(t,e){const n=ue(t),r=await _m(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&Tm(n,e.targetId,i.fa),i}async function L5(t,e){const n=ue(t);return KT(n.localStore,e).then(r=>ss(n,r))}async function O5(t,e,n,r){const i=ue(t),s=await function(a,l){const c=ue(a),d=ue(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.vn(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Aa(i.remoteStore):n==="acknowledged"||n==="rejected"?(yy(i,e,r||null),gy(i,e),function(a,l){ue(ue(a).mutationQueue).Mn(l)}(i.localStore,e)):ae(),await ss(i,s)):G("SyncEngine","Cannot apply mutation batch with id: "+e)}async function M5(t,e){const n=ue(t);if(Fh(n),_y(n),e===!0&&n.La!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await R_(n,r.toArray());n.La=!0,await Em(n.remoteStore,!0);for(const s of i)Mh(n.remoteStore,s)}else if(e===!1&&n.La!==!1){const r=[];let i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ga(n,o),fa(n.localStore,o,!0))),pa(n.remoteStore,o)}),await i,await R_(n,r),function(o){const a=ue(o);a.Fa.forEach((l,c)=>{pa(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new We(te.comparator)}(n),n.La=!1,await Em(n.remoteStore,!1)}}async function R_(t,e,n){const r=ue(t),i=[],s=[];for(const o of e){let a;const l=r.Da.get(o);if(l&&l.length!==0){a=await Bd(r.localStore,bn(l[0]));for(const c of l){const d=r.ba.get(c),h=await V5(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await HT(r.localStore,o);a=await Bd(r.localStore,c),await my(r,dS(c),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i}function dS(t){return XI(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function F5(t){return function(n){return ue(ue(n).persistence).Bi()}(ue(t).localStore)}async function U5(t,e,n,r){const i=ue(t);if(i.La)return void G("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await KT(i.localStore,eT(s[0])),a=Au.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Lt.EMPTY_BYTE_STRING);await ss(i,o,a);break}case"rejected":await fa(i.localStore,e,!0),ga(i,e,r);break;default:ae()}}async function j5(t,e,n){const r=Fh(t);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){G("SyncEngine","Adding an already active target "+i);continue}const s=await HT(r.localStore,i),o=await Bd(r.localStore,s);await my(r,dS(s),o.targetId,!1,o.resumeToken),Mh(r.remoteStore,o)}for(const i of n)r.Da.has(i)&&await fa(r.localStore,i,!1).then(()=>{pa(r.remoteStore,i),ga(r,i)}).catch(ns)}}function Fh(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A5.bind(null,e),e.Sa.h_=y5.bind(null,e.eventManager),e.Sa.ka=v5.bind(null,e.eventManager),e}function _y(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b5.bind(null,e),e}class Sm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return zT(this.persistence,new BT,e.initialUser,this.serializer)}createPersistence(e){return new UT(Vh.Hr,this.serializer)}createSharedClientState(e){return new WT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class hS extends Sm{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await _y(this.Qa.syncEngine),await Aa(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return zT(this.persistence,new BT,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new R9(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new l6(n,this.persistence);return new a6(e.asyncQueue,r)}createPersistence(e){const n=jT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new oy(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,QT(),Gc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new WT}}class B5 extends hS{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Qa.syncEngine;this.sharedClientState instanceof jf&&(this.sharedClientState.syncEngine={Zs:O5.bind(null,n),Xs:U5.bind(null,n),eo:j5.bind(null,n),Bi:F5.bind(null,n),Ys:L5.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await M5(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=QT();if(!jf.D(n))throw new ne(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jf(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class wy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>A_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=D5.bind(null,this.syncEngine),await Em(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g5}()}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),r=function(s){return new Z9(s)}(e.databaseInfo);return function(s,o,a,l){return new n5(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new i5(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>A_(this.syncEngine,n,0),function(){return S_.D()?new S_:new J9}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new I5(i,s,o,a,l,c);return d&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=ue(r);G("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await bu(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=AI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{G("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(G("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zf(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await $T(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function b_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await q5(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>C_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>C_(e.remoteStore,i)),t._onlineComponents=e}function $5(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function q5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await zf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!$5(n))throw n;su("Error using user provided cache. Falling back to memory cache: "+n),await zf(t,new Sm)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await zf(t,new Sm);return t._offlineComponents}async function pS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await b_(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await b_(t,new wy))),t._onlineComponents}function H5(t){return pS(t).then(e=>e.syncEngine)}async function mS(t){const e=await pS(t),n=e.eventManager;return n.onListen=T5.bind(null,e.syncEngine),n.onUnlisten=C5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x5.bind(null,e.syncEngine),n}function K5(t,e,n={}){const r=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new fS({next:p=>{o.enqueueAndForget(()=>iS(s,h));const _=p.docs.has(a);!_&&p.fromCache?c.reject(new ne(K.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&l&&l.source==="server"?c.reject(new ne(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new sS(Ph(a.path),d,{includeMetadataChanges:!0,ra:!0});return rS(s,h)}(await mS(t),t.asyncQueue,e,n,r)),r.promise}function G5(t,e,n={}){const r=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new fS({next:p=>{o.enqueueAndForget(()=>iS(s,h)),p.fromCache&&l.source==="server"?c.reject(new ne(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new sS(a,d,{includeMetadataChanges:!0,ra:!0});return rS(s,h)}(await mS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t,e,n){if(!n)throw new ne(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W5(t,e,n,r){if(e===!0&&r===!0)throw new ne(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function D_(t){if(!te.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function N_(t){if(te.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ey(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function _r(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ey(t);throw new ne(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ne(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yk;switch(r.type){case"firstParty":return new e6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=k_.get(n);r&&(G("ComponentProvider","Removing Datastore"),k_.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Uh(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Hi extends Uh{constructor(e,n,r){super(e,n,Ph(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new te(e))}withConverter(e){return new Hi(this.firestore,e,this._path)}}function Q5(t,e,...n){if(t=qt(t),yS("collection","path",e),t instanceof Iy){const r=Fe.fromString(e,...n);return N_(r),new Hi(t,null,r)}{if(!(t instanceof En||t instanceof Hi))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return N_(r),new Hi(t.firestore,null,r)}}function Wc(t,e,...n){if(t=qt(t),arguments.length===1&&(e=AI.newId()),yS("doc","path",e),t instanceof Iy){const r=Fe.fromString(e,...n);return D_(r),new En(t,null,new te(r))}{if(!(t instanceof En||t instanceof Hi))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return D_(r),new En(t.firestore,t instanceof Hi?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new JT(this,"async_queue_retry"),this.hu=()=>{const n=Gc();n&&G("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Gc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Gc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new yr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!rs(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=hy.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ae()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}class Xs extends Iy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new J5}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vS(this),this._firestoreClient.terminate()}}function Y5(t,e,n){n||(n="(default)");const r=Vg(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(tu(s,e))return i;throw new ne(K.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ne(K.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Ty(t){return t._firestoreClient||vS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function vS(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new A6(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,gS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new z5(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ya(Lt.fromBase64String(e))}catch(n){throw new ne(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ya(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=/^__.*__$/;class Z5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pa(e,this.data,n,this.fieldTransforms)}}class _S{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class xy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new xy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Hd(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(wS(this.fu)&&X5.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class eD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lh(e)}Fu(e,n,r,i=!1){return new xy({fu:e,methodName:n,vu:r,path:it.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Py(t){const e=t._freezeSettings(),n=Lh(t._databaseId);return new eD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ES(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Ay("Data must be an object, but it was:",o,r);const a=IS(r,o);let l,c;if(s.merge)l=new yn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=Cm(e,h,n);if(!o.contains(p))throw new ne(K.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);SS(d,p)||d.push(p)}l=new yn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new Z5(new Xt(a),l,c)}class Bh extends Sy{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}function tD(t,e,n,r){const i=t.Fu(1,e,n);Ay("Data must be an object, but it was:",i,r);const s=[],o=Xt.empty();Js(r,(l,c)=>{const d=Ry(e,l,n);c=qt(c);const h=i.Su(d);if(c instanceof Bh)s.push(d);else{const p=zh(c,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new yn(s);return new _S(o,a,i.fieldTransforms)}function nD(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[Cm(e,r,n)],l=[i];if(s.length%2!=0)throw new ne(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Cm(e,s[p])),l.push(s[p+1]);const c=[],d=Xt.empty();for(let p=a.length-1;p>=0;--p)if(!SS(c,a[p])){const _=a[p];let E=l[p];E=qt(E);const P=o.Su(_);if(E instanceof Bh)c.push(_);else{const N=zh(E,P);N!=null&&(c.push(_),d.set(_,N))}}const h=new yn(c);return new _S(d,h,o.fieldTransforms)}function zh(t,e){if(TS(t=qt(t)))return Ay("Unsupported field value:",e,t),IS(t,e);if(t instanceof Sy)return function(r,i){if(!wS(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=zh(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return K6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ot.fromDate(r);return{timestampValue:ha(i.serializer,s)}}if(r instanceof ot){const s=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ha(i.serializer,s)}}if(r instanceof Cy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ya)return{bytesValue:yT(i.serializer,r._byteString)};if(r instanceof En){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ny(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Ey(r)}`)}(t,e)}function IS(t,e){const n={};return BI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,(r,i)=>{const s=zh(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Cy||t instanceof ya||t instanceof En||t instanceof Sy)}function Ay(t,e,n){if(!TS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ey(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Cm(t,e,n){if((e=qt(e))instanceof jh)return e._internalPath;if(typeof e=="string")return Ry(t,e);throw Hd("Field path arguments must be of type string or ",t,!1,void 0,n)}const rD=new RegExp("[~\\*/\\[\\]]");function Ry(t,e,n){if(e.search(rD)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jh(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(K.INVALID_ARGUMENT,a+t+l)}function SS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iD extends CS{data(){return super.data()}}function xS(t,e){return typeof e=="string"?Ry(t,e):e instanceof jh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oD{convertValue(e,n="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Js(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Cy(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);fe(PT(r));const i=new Us(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||yt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class AS extends CS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Qc extends AS{data(e={}){return super.data(e)}}class aD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ml(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qc(this._firestore,this._userDataWriter,r.key,r,new ml(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Qc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ml(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Qc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ml(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:lD(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){t=_r(t,En);const e=_r(t.firestore,Xs);return K5(Ty(e),t._key).then(n=>dD(e,t,n))}class RS extends oD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function L_(t){t=_r(t,Uh);const e=_r(t.firestore,Xs),n=Ty(e),r=new RS(e);return sD(t._query),G5(n,t._query).then(i=>new aD(e,r,t,i))}function cD(t,e,n){t=_r(t,En);const r=_r(t.firestore,Xs),i=PS(t.converter,e);return $h(r,[ES(Py(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zt.none())])}function O_(t,e,n,...r){t=_r(t,En);const i=_r(t.firestore,Xs),s=Py(i);let o;return o=typeof(e=qt(e))=="string"||e instanceof jh?nD(s,"updateDoc",t._key,e,n,r):tD(s,"updateDoc",t._key,e),$h(i,[o.toMutation(t._key,Zt.exists(!0))])}function M_(t){return $h(_r(t.firestore,Xs),[new kh(t._key,Zt.none())])}function $f(t,e){const n=_r(t.firestore,Xs),r=Wc(t),i=PS(t.converter,e);return $h(n,[ES(Py(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then(()=>r)}function $h(t,e){return function(r,i){const s=new yr;return r.asyncQueue.enqueueAndForget(async()=>P5(await H5(r),i,s)),s.promise}(Ty(t),e)}function dD(t,e,n){const r=n.docs.get(e._key),i=new RS(t);return new AS(t,i,e._key,r,new ml(n.hasPendingWrites,n.fromCache),e.converter)}class hD{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=gD(),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function fD(t){return new hD(t)}class pD{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new wy,this._offlineComponentProvider=new hS(this._onlineComponentProvider,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}class mD{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new wy,this._offlineComponentProvider=new B5(this._onlineComponentProvider,e==null?void 0:e.cacheSizeBytes)}}function gD(t){return new pD(void 0)}function yD(){return new mD}(function(e,n=!0){(function(i){xa=i})(Ta),ia(new Ls("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Xs(new Xk(r.getProvider("auth-internal")),new n6(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ne(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Us(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),zi(Dv,"4.6.3",e),zi(Dv,"4.6.3","esm2017")})();const vD={apiKey:"AIzaSyDwYnGSvvairHkZc6-BegzoO6oLquuV4Y8",authDomain:"geekstore-novcmbro.firebaseapp.com",projectId:"geekstore-novcmbro",storageBucket:"geekstore-novcmbro.appspot.com",messagingSenderId:"599363394738",appId:"1:599363394738:web:1b9b11c8b4b78a5710fdab",measurementId:"G-1T6W8VLLWG"},bS=()=>UE(vD),_D=bS(),F_=Y5(_D,{localCache:fD({tabManager:yD()})}),kS=B.createContext({}),wD=({children:t})=>{const[e,n]=B.useState({}),[r,i]=B.useState(!1),s=B.useRef(null),o=l=>{n(l),i(!0)},a=()=>{i(!1),n({})};return B.useEffect(()=>{const l=s.current;if(l&&r){const c=l.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])"),d=c[0],h=c[c.length-1];d.focus();const p=E=>{(E.key==="Tab"||E.keyCode===9)&&(E.shiftKey&&document.activeElement===d?(E.preventDefault(),h.focus()):!E.shiftKey&&document.activeElement===h&&(E.preventDefault(),d.focus()))},_=E=>{(E.key==="Escape"||E.keyCode===27)&&a()};return l.addEventListener("keydown",p),l.addEventListener("keydown",_),()=>{l.removeEventListener("keydown",p),l.removeEventListener("keydown",_)}}},[r]),R.jsx(kS.Provider,{value:{...e,popupRef:s,isPopupOpen:r,openPopup:o,closePopup:a},children:t})},qh=()=>B.useContext(kS);function ED(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const U_={};function xm(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&U_[e[0]]||(typeof e[0]=="string"&&(U_[e[0]]=new Date),ED(...e))}const DS=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function j_(t,e,n){t.loadNamespaces(e,DS(t,n))}function B_(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,DS(t,r))}function ID(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=e.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!i||o(s,t)))}function TD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(xm("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,t))return!1}}):ID(t,e,n)}const SD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,CD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},xD=t=>CD[t],PD=t=>t.replace(SD,xD);let Pm={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:PD};function AD(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Pm={...Pm,...t}}function RD(){return Pm}let NS;function bD(t){NS=t}function kD(){return NS}const DD={type:"3rdParty",init(t){AD(t.options.react),bD(t)}},ND=B.createContext();class VD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const LD=(t,e)=>{const n=B.useRef();return B.useEffect(()=>{n.current=t},[t,e]),n.current};function VS(t,e,n,r){return t.getFixedT(e,n,r)}function OD(t,e,n,r){return B.useCallback(VS(t,e,n,r),[t,e,n,r])}function In(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:i}=B.useContext(ND)||{},s=n||r||kD();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new VD),!s){xm("You will need to pass in an i18next instance by using initReactI18next");const k=(F,g)=>typeof g=="string"?g:g&&typeof g=="object"&&typeof g.defaultValue=="string"?g.defaultValue:Array.isArray(F)?F[F.length-1]:F,V=[k,{},!1];return V.t=k,V.i18n={},V.ready=!1,V}s.options.react&&s.options.react.wait!==void 0&&xm("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...RD(),...s.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let c=i||s.options&&s.options.defaultNS;c=typeof c=="string"?[c]:c||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(c);const d=(s.isInitialized||s.initializedStoreOnce)&&c.every(k=>TD(k,s,o)),h=OD(s,e.lng||null,o.nsMode==="fallback"?c:c[0],l),p=()=>h,_=()=>VS(s,e.lng||null,o.nsMode==="fallback"?c:c[0],l),[E,P]=B.useState(p);let N=c.join();e.lng&&(N=`${e.lng}${N}`);const S=LD(N),y=B.useRef(!0);B.useEffect(()=>{const{bindI18n:k,bindI18nStore:V}=o;y.current=!0,!d&&!a&&(e.lng?B_(s,e.lng,c,()=>{y.current&&P(_)}):j_(s,c,()=>{y.current&&P(_)})),d&&S&&S!==N&&y.current&&P(_);function F(){y.current&&P(_)}return k&&s&&s.on(k,F),V&&s&&s.store.on(V,F),()=>{y.current=!1,k&&s&&k.split(" ").forEach(g=>s.off(g,F)),V&&s&&V.split(" ").forEach(g=>s.store.off(g,F))}},[s,N]),B.useEffect(()=>{y.current&&d&&P(p)},[s,l,d]);const I=[E,s,d];if(I.t=E,I.i18n=s,I.ready=d,d||!d&&!a)return I;throw new Promise(k=>{e.lng?B_(s,e.lng,c,()=>k()):j_(s,c,()=>k())})}const LS=B.createContext({}),MD=({children:t})=>{const e=Ia(),{t:n}=In(),r=Th(),{openPopup:i}=qh(),[s,o]=B.useState(!0),[a,l]=B.useState([]),c={image:"",category:"",name:"",price:"0.00",description:""},d=()=>{var I;if((I=r.currentUser)==null?void 0:I.uid)return!0;i({type:"error",message:n("products.no-permission")})},h=()=>{var I;const y=(I=r.currentUser)==null?void 0:I.uid;return Q5(F_,`users/${y}/products`)},p=y=>{l(y),o(!1)},_=y=>{const I=()=>{o(!1),i({type:"error",message:n("products.get-error")})};L_(h()).then(k=>{const V=k.docs.map(F=>({docId:F.id,...F.data()}));if(y){const F=Xa.map(g=>$f(h(),g));Promise.all(F).then(()=>_()).catch(I);return}p(V)}).catch(I)};B.useEffect(()=>{const y=cI(r,I=>{if(I){const k=Wc(F_,`users/${I.uid}`),V=F=>({"is-first-access":F});uD(k).then(F=>{const g=F.get("is-first-access");if(g===void 0){_(!0),cD(k,V(!0));return}if(g){O_(k,V(!1));return}_()}).catch(d);return}p(Xa)});return()=>y()},[r]);const E=y=>{if(d()){const I=a.length?Math.max(...a.map(V=>V.id))+1:1;y.price=Number(y.price);const k={id:I,...y};$f(h(),k).then(V=>{l(F=>[{docId:V.id,...k},...F]),i({type:"success",message:n("products.add-success"),okButton:{action:()=>e(`${vt}/admin-menu`)},cancelButton:!1})}).catch(()=>i({type:"error",message:n("products.add-error")}))}},P=(y,I)=>{if(d()){let k=!1;for(const V of Object.keys(I))if(y[V]!=I[V]){k=!0;break}if(!k){i({type:"warning",message:n("products.edit-no-changes",{productName:y.name})});return}I.price=Number(I.price),O_(Wc(h(),y.docId),I).then(()=>{i({type:"success",message:n("products.edit-success"),okButton:{action:()=>e(`${vt}/admin-menu`)},cancelButton:!1});const V=a.map(F=>F.docId===y.docId?{...F,...I}:F);l(V)}).catch(()=>i({type:"error",message:n("products.edit-error")}))}},N=(y,I)=>{d()&&i({type:"danger",message:n("products.delete-confirmation",{productName:I}),okButton:{action:()=>M_(Wc(h(),y)).then(()=>{l(a.filter(k=>k.docId!==y)),i({type:"success",message:n("products.delete-success")})}).catch(()=>i({type:"error",message:n("products.delete-error")})),text:n("products.delete")}})},S=()=>{if(d()){let y=a.length!==Xa.length;if(!y)for(const k of a){for(const[V,F]of Object.entries(k)){if(V==="docId")continue;const g=Xa.find(T=>k.id===T.id);if(!g||F!==g[V]){y=!0;break}}if(y)break}if(!y){i({type:"warning",message:n("products.restore-no-changes")});return}i({type:"danger",message:n("products.restore-confirmation"),okButton:{action:()=>L_(h()).then(k=>{o(!0);const V=k.docs.map(F=>M_(F.ref));return Promise.all(V)}).then(()=>{const k=Xa.map(V=>$f(h(),V));return Promise.all(k)}).then(()=>{i({type:"success",message:n("products.restore-success")}),_()}).catch(()=>{s&&o(!1),i({type:"error",message:n("products.restore-error")})}),text:n("products.restore")}})}};return a.sort((y,I)=>I.id-y.id),R.jsx(LS.Provider,{value:{initialProductFormValues:c,isLoading:s,productsList:a,addProduct:E,editProduct:P,deleteProduct:N,restoreDefaultProducts:S},children:t})},ni=()=>B.useContext(LS),FD=({children:t})=>R.jsx(wD,{children:R.jsx(MD,{children:t})}),ku=()=>{const{pathname:t}=Ws(),e=e4.routes[0].children,[n,r]=B.useState({});return B.useEffect(()=>{if(t&&e){let i={...n};i.isHomeRoute=t===vt||t===`${vt}/`;for(const{id:s,path:o}of e)if(s&&o&&o!=="*"){const a=`${vt}/${o.split("/")[0]}`;i[`is${s}Route`]=t.includes(a)}r(i)}},[t,e]),n};var Du=t=>t.type==="checkbox",Mo=t=>t instanceof Date,rn=t=>t==null;const OS=t=>typeof t=="object";var bt=t=>!rn(t)&&!Array.isArray(t)&&OS(t)&&!Mo(t),MS=t=>bt(t)&&t.target?Du(t.target)?t.target.checked:t.target.value:t,UD=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,FS=(t,e)=>t.has(UD(e)),jD=t=>{const e=t.constructor&&t.constructor.prototype;return bt(e)&&e.hasOwnProperty("isPrototypeOf")},by=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function hn(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(by&&(t instanceof Blob||t instanceof FileList))&&(n||bt(t)))if(e=n?[]:{},!n&&!jD(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=hn(t[r]));else return t;return e}var Nu=t=>Array.isArray(t)?t.filter(Boolean):[],ct=t=>t===void 0,Z=(t,e,n)=>{if(!e||!bt(t))return n;const r=Nu(e.split(/[,[\].]+?/)).reduce((i,s)=>rn(i)?i:i[s],t);return ct(r)||r===t?ct(t[e])?n:t[e]:r},lr=t=>typeof t=="boolean",ky=t=>/^\w*$/.test(t),US=t=>Nu(t.replace(/["|']|\]/g,"").split(/\.|\[/)),He=(t,e,n)=>{let r=-1;const i=ky(e)?[e]:US(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const c=t[a];l=bt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__")return;t[a]=l,t=t[a]}return t};const Kd={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Zn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},kr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},BD=je.createContext(null),Dy=()=>je.useContext(BD);var jS=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Zn.all&&(e._proxyFormState[o]=!r||Zn.all),n&&(n[o]=!0),t[o]}});return i},Cn=t=>bt(t)&&!Object.keys(t).length,BS=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Cn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Zn.all))},Jc=t=>Array.isArray(t)?t:[t],zS=(t,e,n)=>!t||!e||t===e||Jc(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function Ny(t){const e=je.useRef(t);e.current=t,je.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function zD(t){const e=Dy(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=je.useState(n._formState),l=je.useRef(!0),c=je.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=je.useRef(i);return d.current=i,Ny({disabled:r,next:h=>l.current&&zS(d.current,h.name,s)&&BS(h,c.current,n._updateFormState)&&a({...n._formState,...h}),subject:n._subjects.state}),je.useEffect(()=>(l.current=!0,c.current.isValid&&n._updateValid(!0),()=>{l.current=!1}),[n]),jS(o,n,c.current,!1)}var hr=t=>typeof t=="string",$S=(t,e,n,r,i)=>hr(t)?(r&&e.watch.add(t),Z(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Z(n,s))):(r&&(e.watchAll=!0),n);function $D(t){const e=Dy(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t||{},a=je.useRef(r);a.current=r,Ny({disabled:s,subject:n._subjects.values,next:d=>{zS(a.current,d.name,o)&&c(hn($S(a.current,n._names,d.values||n._formValues,!1,i)))}});const[l,c]=je.useState(n._getWatch(r,i));return je.useEffect(()=>n._removeUnmounted()),l}function qD(t){const e=Dy(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=FS(i._names.array,n),a=$D({control:i,name:n,defaultValue:Z(i._formValues,n,Z(i._defaultValues,n,t.defaultValue)),exact:!0}),l=zD({control:i,name:n}),c=je.useRef(i.register(n,{...t.rules,value:a,...lr(t.disabled)?{disabled:t.disabled}:{}}));return je.useEffect(()=>{const d=i._options.shouldUnregister||s,h=(p,_)=>{const E=Z(i._fields,p);E&&E._f&&(E._f.mount=_)};if(h(n,!0),d){const p=hn(Z(i._options.defaultValues,n));He(i._defaultValues,n,p),ct(Z(i._formValues,n))&&He(i._formValues,n,p)}return()=>{(o?d&&!i._state.action:d)?i.unregister(n):h(n,!1)}},[n,i,o,s]),je.useEffect(()=>{Z(i._fields,n)&&i._updateDisabledField({disabled:r,fields:i._fields,name:n,value:Z(i._fields,n)._f.value})},[r,n,i]),{field:{name:n,value:a,...lr(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:je.useCallback(d=>c.current.onChange({target:{value:MS(d),name:n},type:Kd.CHANGE}),[n]),onBlur:je.useCallback(()=>c.current.onBlur({target:{value:Z(i._formValues,n),name:n},type:Kd.BLUR}),[n,i]),ref:d=>{const h=Z(i._fields,n);h&&d&&(h._f.ref={focus:()=>d.focus(),select:()=>d.select(),setCustomValidity:p=>d.setCustomValidity(p),reportValidity:()=>d.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Z(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!Z(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Z(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Z(l.validatingFields,n)},error:{enumerable:!0,get:()=>Z(l.errors,n)}})}}var HD=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},z_=t=>({isOnSubmit:!t||t===Zn.onSubmit,isOnBlur:t===Zn.onBlur,isOnChange:t===Zn.onChange,isOnAll:t===Zn.all,isOnTouch:t===Zn.onTouched}),$_=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Vl=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Z(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)break;if(o.ref&&e(o.ref,o.name)&&!r)break;Vl(a,e)}else bt(a)&&Vl(a,e)}}};var KD=(t,e,n)=>{const r=Nu(Z(t,n));return He(r,"root",e[n]),He(t,n,r),t},Vy=t=>t.type==="file",ki=t=>typeof t=="function",Gd=t=>{if(!by)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Yc=t=>hr(t),Ly=t=>t.type==="radio",Wd=t=>t instanceof RegExp;const q_={value:!1,isValid:!1},H_={value:!0,isValid:!0};var qS=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ct(t[0].attributes.value)?ct(t[0].value)||t[0].value===""?H_:{value:t[0].value,isValid:!0}:H_:q_}return q_};const K_={isValid:!1,value:null};var HS=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,K_):K_;function G_(t,e,n="validate"){if(Yc(t)||Array.isArray(t)&&t.every(Yc)||lr(t)&&!t)return{type:n,message:Yc(t)?t:"",ref:e}}var yo=t=>bt(t)&&!Wd(t)?t:{value:t,message:""},W_=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:c,min:d,max:h,pattern:p,validate:_,name:E,valueAsNumber:P,mount:N,disabled:S}=t._f,y=Z(e,E);if(!N||S)return{};const I=o?o[0]:s,k=b=>{r&&I.reportValidity&&(I.setCustomValidity(lr(b)?"":b||""),I.reportValidity())},V={},F=Ly(s),g=Du(s),v=F||g,T=(P||Vy(s))&&ct(s.value)&&ct(y)||Gd(s)&&s.value===""||y===""||Array.isArray(y)&&!y.length,x=HD.bind(null,E,n,V),A=(b,C,me,Ie=kr.maxLength,$e=kr.minLength)=>{const Oe=b?C:me;V[E]={type:b?Ie:$e,message:Oe,ref:s,...x(b?Ie:$e,Oe)}};if(i?!Array.isArray(y)||!y.length:a&&(!v&&(T||rn(y))||lr(y)&&!y||g&&!qS(o).isValid||F&&!HS(o).isValid)){const{value:b,message:C}=Yc(a)?{value:!!a,message:a}:yo(a);if(b&&(V[E]={type:kr.required,message:C,ref:I,...x(kr.required,C)},!n))return k(C),V}if(!T&&(!rn(d)||!rn(h))){let b,C;const me=yo(h),Ie=yo(d);if(!rn(y)&&!isNaN(y)){const $e=s.valueAsNumber||y&&+y;rn(me.value)||(b=$e>me.value),rn(Ie.value)||(C=$e<Ie.value)}else{const $e=s.valueAsDate||new Date(y),Oe=ce=>new Date(new Date().toDateString()+" "+ce),H=s.type=="time",oe=s.type=="week";hr(me.value)&&y&&(b=H?Oe(y)>Oe(me.value):oe?y>me.value:$e>new Date(me.value)),hr(Ie.value)&&y&&(C=H?Oe(y)<Oe(Ie.value):oe?y<Ie.value:$e<new Date(Ie.value))}if((b||C)&&(A(!!b,me.message,Ie.message,kr.max,kr.min),!n))return k(V[E].message),V}if((l||c)&&!T&&(hr(y)||i&&Array.isArray(y))){const b=yo(l),C=yo(c),me=!rn(b.value)&&y.length>+b.value,Ie=!rn(C.value)&&y.length<+C.value;if((me||Ie)&&(A(me,b.message,C.message),!n))return k(V[E].message),V}if(p&&!T&&hr(y)){const{value:b,message:C}=yo(p);if(Wd(b)&&!y.match(b)&&(V[E]={type:kr.pattern,message:C,ref:s,...x(kr.pattern,C)},!n))return k(C),V}if(_){if(ki(_)){const b=await _(y,e),C=G_(b,I);if(C&&(V[E]={...C,...x(kr.validate,C.message)},!n))return k(C.message),V}else if(bt(_)){let b={};for(const C in _){if(!Cn(b)&&!n)break;const me=G_(await _[C](y,e),I,C);me&&(b={...me,...x(C,me.message)},k(me.message),n&&(V[E]=b))}if(!Cn(b)&&(V[E]={ref:I,...b},!n))return V}}return k(!0),V};function GD(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ct(t)?r++:t[e[r++]];return t}function WD(t){for(const e in t)if(t.hasOwnProperty(e)&&!ct(t[e]))return!1;return!0}function Pt(t,e){const n=Array.isArray(e)?e:ky(e)?[e]:US(e),r=n.length===1?t:GD(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(bt(r)&&Cn(r)||Array.isArray(r)&&WD(r))&&Pt(t,n.slice(0,-1)),t}var qf=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},Qd=t=>rn(t)||!OS(t);function Ss(t,e){if(Qd(t)||Qd(e))return t===e;if(Mo(t)&&Mo(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Mo(s)&&Mo(o)||bt(s)&&bt(o)||Array.isArray(s)&&Array.isArray(o)?!Ss(s,o):s!==o)return!1}}return!0}var KS=t=>t.type==="select-multiple",QD=t=>Ly(t)||Du(t),Hf=t=>Gd(t)&&t.isConnected,GS=t=>{for(const e in t)if(ki(t[e]))return!0;return!1};function Jd(t,e={}){const n=Array.isArray(t);if(bt(t)||n)for(const r in t)Array.isArray(t[r])||bt(t[r])&&!GS(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Jd(t[r],e[r])):rn(t[r])||(e[r]=!0);return e}function WS(t,e,n){const r=Array.isArray(t);if(bt(t)||r)for(const i in t)Array.isArray(t[i])||bt(t[i])&&!GS(t[i])?ct(e)||Qd(n[i])?n[i]=Array.isArray(t[i])?Jd(t[i],[]):{...Jd(t[i])}:WS(t[i],rn(e)?{}:e[i],n[i]):n[i]=!Ss(t[i],e[i]);return n}var Tc=(t,e)=>WS(t,e,Jd(e)),QS=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ct(t)?t:e?t===""?NaN:t&&+t:n&&hr(t)?new Date(t):r?r(t):t;function Kf(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return Vy(e)?e.files:Ly(e)?HS(t.refs).value:KS(e)?[...e.selectedOptions].map(({value:n})=>n):Du(e)?qS(t.refs).value:QS(ct(e.value)?t.ref.value:e.value,t)}var JD=(t,e,n,r)=>{const i={};for(const s of t){const o=Z(e,s);o&&He(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},il=t=>ct(t)?t:Wd(t)?t.source:bt(t)?Wd(t.value)?t.value.source:t.value:t,YD=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function Q_(t,e,n){const r=Z(t,n);if(r||ky(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Z(e,s),a=Z(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var XD=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,ZD=(t,e)=>!Nu(Z(t,e)).length&&Pt(t,e);const eN={mode:Zn.onSubmit,reValidateMode:Zn.onChange,shouldFocusError:!0};function tN(t={}){let e={...eN,...t},n={submitCount:0,isDirty:!1,isLoading:ki(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=bt(e.defaultValues)||bt(e.values)?hn(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:hn(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:qf(),array:qf(),state:qf()},p=z_(e.mode),_=z_(e.reValidateMode),E=e.criteriaMode===Zn.all,P=D=>j=>{clearTimeout(c),c=setTimeout(D,j)},N=async D=>{if(d.isValid||D){const j=e.resolver?Cn((await v()).errors):await x(r,!0);j!==n.isValid&&h.state.next({isValid:j})}},S=(D,j)=>{(d.isValidating||d.validatingFields)&&((D||Array.from(a.mount)).forEach($=>{$&&(j?He(n.validatingFields,$,j):Pt(n.validatingFields,$))}),h.state.next({validatingFields:n.validatingFields,isValidating:!Cn(n.validatingFields)}))},y=(D,j=[],$,ee,Y=!0,W=!0)=>{if(ee&&$){if(o.action=!0,W&&Array.isArray(Z(r,D))){const le=$(Z(r,D),ee.argA,ee.argB);Y&&He(r,D,le)}if(W&&Array.isArray(Z(n.errors,D))){const le=$(Z(n.errors,D),ee.argA,ee.argB);Y&&He(n.errors,D,le),ZD(n.errors,D)}if(d.touchedFields&&W&&Array.isArray(Z(n.touchedFields,D))){const le=$(Z(n.touchedFields,D),ee.argA,ee.argB);Y&&He(n.touchedFields,D,le)}d.dirtyFields&&(n.dirtyFields=Tc(i,s)),h.state.next({name:D,isDirty:b(D,j),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else He(s,D,j)},I=(D,j)=>{He(n.errors,D,j),h.state.next({errors:n.errors})},k=D=>{n.errors=D,h.state.next({errors:n.errors,isValid:!1})},V=(D,j,$,ee)=>{const Y=Z(r,D);if(Y){const W=Z(s,D,ct($)?Z(i,D):$);ct(W)||ee&&ee.defaultChecked||j?He(s,D,j?W:Kf(Y._f)):Ie(D,W),o.mount&&N()}},F=(D,j,$,ee,Y)=>{let W=!1,le=!1;const xe={name:D},_e=!!(Z(r,D)&&Z(r,D)._f&&Z(r,D)._f.disabled);if(!$||ee){d.isDirty&&(le=n.isDirty,n.isDirty=xe.isDirty=b(),W=le!==xe.isDirty);const ke=_e||Ss(Z(i,D),j);le=!!(!_e&&Z(n.dirtyFields,D)),ke||_e?Pt(n.dirtyFields,D):He(n.dirtyFields,D,!0),xe.dirtyFields=n.dirtyFields,W=W||d.dirtyFields&&le!==!ke}if($){const ke=Z(n.touchedFields,D);ke||(He(n.touchedFields,D,$),xe.touchedFields=n.touchedFields,W=W||d.touchedFields&&ke!==$)}return W&&Y&&h.state.next(xe),W?xe:{}},g=(D,j,$,ee)=>{const Y=Z(n.errors,D),W=d.isValid&&lr(j)&&n.isValid!==j;if(t.delayError&&$?(l=P(()=>I(D,$)),l(t.delayError)):(clearTimeout(c),l=null,$?He(n.errors,D,$):Pt(n.errors,D)),($?!Ss(Y,$):Y)||!Cn(ee)||W){const le={...ee,...W&&lr(j)?{isValid:j}:{},errors:n.errors,name:D};n={...n,...le},h.state.next(le)}},v=async D=>{S(D,!0);const j=await e.resolver(s,e.context,JD(D||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return S(D),j},T=async D=>{const{errors:j}=await v(D);if(D)for(const $ of D){const ee=Z(j,$);ee?He(n.errors,$,ee):Pt(n.errors,$)}else n.errors=j;return j},x=async(D,j,$={valid:!0})=>{for(const ee in D){const Y=D[ee];if(Y){const{_f:W,...le}=Y;if(W){const xe=a.array.has(W.name);S([ee],!0);const _e=await W_(Y,s,E,e.shouldUseNativeValidation&&!j,xe);if(S([ee]),_e[W.name]&&($.valid=!1,j))break;!j&&(Z(_e,W.name)?xe?KD(n.errors,_e,W.name):He(n.errors,W.name,_e[W.name]):Pt(n.errors,W.name))}le&&await x(le,j,$)}}return $.valid},A=()=>{for(const D of a.unMount){const j=Z(r,D);j&&(j._f.refs?j._f.refs.every($=>!Hf($)):!Hf(j._f.ref))&&mt(D)}a.unMount=new Set},b=(D,j)=>(D&&j&&He(s,D,j),!Ss(Re(),i)),C=(D,j,$)=>$S(D,a,{...o.mount?s:ct(j)?i:hr(D)?{[D]:j}:j},$,j),me=D=>Nu(Z(o.mount?s:i,D,t.shouldUnregister?Z(i,D,[]):[])),Ie=(D,j,$={})=>{const ee=Z(r,D);let Y=j;if(ee){const W=ee._f;W&&(!W.disabled&&He(s,D,QS(j,W)),Y=Gd(W.ref)&&rn(j)?"":j,KS(W.ref)?[...W.ref.options].forEach(le=>le.selected=Y.includes(le.value)):W.refs?Du(W.ref)?W.refs.length>1?W.refs.forEach(le=>(!le.defaultChecked||!le.disabled)&&(le.checked=Array.isArray(Y)?!!Y.find(xe=>xe===le.value):Y===le.value)):W.refs[0]&&(W.refs[0].checked=!!Y):W.refs.forEach(le=>le.checked=le.value===Y):Vy(W.ref)?W.ref.value="":(W.ref.value=Y,W.ref.type||h.values.next({name:D,values:{...s}})))}($.shouldDirty||$.shouldTouch)&&F(D,Y,$.shouldTouch,$.shouldDirty,!0),$.shouldValidate&&ce(D)},$e=(D,j,$)=>{for(const ee in j){const Y=j[ee],W=`${D}.${ee}`,le=Z(r,W);(a.array.has(D)||!Qd(Y)||le&&!le._f)&&!Mo(Y)?$e(W,Y,$):Ie(W,Y,$)}},Oe=(D,j,$={})=>{const ee=Z(r,D),Y=a.array.has(D),W=hn(j);He(s,D,W),Y?(h.array.next({name:D,values:{...s}}),(d.isDirty||d.dirtyFields)&&$.shouldDirty&&h.state.next({name:D,dirtyFields:Tc(i,s),isDirty:b(D,W)})):ee&&!ee._f&&!rn(W)?$e(D,W,$):Ie(D,W,$),$_(D,a)&&h.state.next({...n}),h.values.next({name:o.mount?D:void 0,values:{...s}})},H=async D=>{o.mount=!0;const j=D.target;let $=j.name,ee=!0;const Y=Z(r,$),W=()=>j.type?Kf(Y._f):MS(D),le=xe=>{ee=Number.isNaN(xe)||xe===Z(s,$,xe)};if(Y){let xe,_e;const ke=W(),cn=D.type===Kd.BLUR||D.type===Kd.FOCUS_OUT,Sr=!YD(Y._f)&&!e.resolver&&!Z(n.errors,$)&&!Y._f.deps||XD(cn,Z(n.touchedFields,$),n.isSubmitted,_,p),ii=$_($,a,cn);He(s,$,ke),cn?(Y._f.onBlur&&Y._f.onBlur(D),l&&l(0)):Y._f.onChange&&Y._f.onChange(D);const dn=F($,ke,cn,!1),ir=!Cn(dn)||ii;if(!cn&&h.values.next({name:$,type:D.type,values:{...s}}),Sr)return d.isValid&&N(),ir&&h.state.next({name:$,...ii?{}:dn});if(!cn&&ii&&h.state.next({...n}),e.resolver){const{errors:si}=await v([$]);if(le(ke),ee){const os=Q_(n.errors,r,$),oi=Q_(si,r,os.name||$);xe=oi.error,$=oi.name,_e=Cn(si)}}else S([$],!0),xe=(await W_(Y,s,E,e.shouldUseNativeValidation))[$],S([$]),le(ke),ee&&(xe?_e=!1:d.isValid&&(_e=await x(r,!0)));ee&&(Y._f.deps&&ce(Y._f.deps),g($,_e,xe,dn))}},oe=(D,j)=>{if(Z(n.errors,j)&&D.focus)return D.focus(),1},ce=async(D,j={})=>{let $,ee;const Y=Jc(D);if(e.resolver){const W=await T(ct(D)?D:Y);$=Cn(W),ee=D?!Y.some(le=>Z(W,le)):$}else D?(ee=(await Promise.all(Y.map(async W=>{const le=Z(r,W);return await x(le&&le._f?{[W]:le}:le)}))).every(Boolean),!(!ee&&!n.isValid)&&N()):ee=$=await x(r);return h.state.next({...!hr(D)||d.isValid&&$!==n.isValid?{}:{name:D},...e.resolver||!D?{isValid:$}:{},errors:n.errors}),j.shouldFocus&&!ee&&Vl(r,oe,D?Y:a.mount),ee},Re=D=>{const j={...o.mount?s:i};return ct(D)?j:hr(D)?Z(j,D):D.map($=>Z(j,$))},Te=(D,j)=>({invalid:!!Z((j||n).errors,D),isDirty:!!Z((j||n).dirtyFields,D),error:Z((j||n).errors,D),isValidating:!!Z(n.validatingFields,D),isTouched:!!Z((j||n).touchedFields,D)}),Me=D=>{D&&Jc(D).forEach(j=>Pt(n.errors,j)),h.state.next({errors:D?n.errors:{}})},kt=(D,j,$)=>{const ee=(Z(r,D,{_f:{}})._f||{}).ref,Y=Z(n.errors,D)||{},{ref:W,message:le,type:xe,..._e}=Y;He(n.errors,D,{..._e,...j,ref:ee}),h.state.next({name:D,errors:n.errors,isValid:!1}),$&&$.shouldFocus&&ee&&ee.focus&&ee.focus()},pt=(D,j)=>ki(D)?h.values.subscribe({next:$=>D(C(void 0,j),$)}):C(D,j,!0),mt=(D,j={})=>{for(const $ of D?Jc(D):a.mount)a.mount.delete($),a.array.delete($),j.keepValue||(Pt(r,$),Pt(s,$)),!j.keepError&&Pt(n.errors,$),!j.keepDirty&&Pt(n.dirtyFields,$),!j.keepTouched&&Pt(n.touchedFields,$),!j.keepIsValidating&&Pt(n.validatingFields,$),!e.shouldUnregister&&!j.keepDefaultValue&&Pt(i,$);h.values.next({values:{...s}}),h.state.next({...n,...j.keepDirty?{isDirty:b()}:{}}),!j.keepIsValid&&N()},_t=({disabled:D,name:j,field:$,fields:ee,value:Y})=>{if(lr(D)&&o.mount||D){const W=D?void 0:ct(Y)?Kf($?$._f:Z(ee,j)._f):Y;He(s,j,W),F(j,W,!1,!1,!0)}},Er=(D,j={})=>{let $=Z(r,D);const ee=lr(j.disabled);return He(r,D,{...$||{},_f:{...$&&$._f?$._f:{ref:{name:D}},name:D,mount:!0,...j}}),a.mount.add(D),$?_t({field:$,disabled:j.disabled,name:D,value:j.value}):V(D,!0,j.value),{...ee?{disabled:j.disabled}:{},...e.progressive?{required:!!j.required,min:il(j.min),max:il(j.max),minLength:il(j.minLength),maxLength:il(j.maxLength),pattern:il(j.pattern)}:{},name:D,onChange:H,onBlur:H,ref:Y=>{if(Y){Er(D,j),$=Z(r,D);const W=ct(Y.value)&&Y.querySelectorAll&&Y.querySelectorAll("input,select,textarea")[0]||Y,le=QD(W),xe=$._f.refs||[];if(le?xe.find(_e=>_e===W):W===$._f.ref)return;He(r,D,{_f:{...$._f,...le?{refs:[...xe.filter(Hf),W,...Array.isArray(Z(i,D))?[{}]:[]],ref:{type:W.type,name:D}}:{ref:W}}}),V(D,!1,void 0,W)}else $=Z(r,D,{}),$._f&&($._f.mount=!1),(e.shouldUnregister||j.shouldUnregister)&&!(FS(a.array,D)&&o.action)&&a.unMount.add(D)}}},Zs=()=>e.shouldFocusError&&Vl(r,oe,a.mount),ri=D=>{lr(D)&&(h.state.next({disabled:D}),Vl(r,(j,$)=>{const ee=Z(r,$);ee&&(j.disabled=ee._f.disabled||D,Array.isArray(ee._f.refs)&&ee._f.refs.forEach(Y=>{Y.disabled=ee._f.disabled||D}))},0,!1))},Ir=(D,j)=>async $=>{let ee;$&&($.preventDefault&&$.preventDefault(),$.persist&&$.persist());let Y=hn(s);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:W,values:le}=await v();n.errors=W,Y=le}else await x(r);if(Pt(n.errors,"root"),Cn(n.errors)){h.state.next({errors:{}});try{await D(Y,$)}catch(W){ee=W}}else j&&await j({...n.errors},$),Zs(),setTimeout(Zs);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cn(n.errors)&&!ee,submitCount:n.submitCount+1,errors:n.errors}),ee)throw ee},Ct=(D,j={})=>{Z(r,D)&&(ct(j.defaultValue)?Oe(D,hn(Z(i,D))):(Oe(D,j.defaultValue),He(i,D,hn(j.defaultValue))),j.keepTouched||Pt(n.touchedFields,D),j.keepDirty||(Pt(n.dirtyFields,D),n.isDirty=j.defaultValue?b(D,hn(Z(i,D))):b()),j.keepError||(Pt(n.errors,D),d.isValid&&N()),h.state.next({...n}))},Ln=(D,j={})=>{const $=D?hn(D):i,ee=hn($),Y=Cn(D),W=Y?i:ee;if(j.keepDefaultValues||(i=$),!j.keepValues){if(j.keepDirtyValues)for(const le of a.mount)Z(n.dirtyFields,le)?He(W,le,Z(s,le)):Oe(le,Z(W,le));else{if(by&&ct(D))for(const le of a.mount){const xe=Z(r,le);if(xe&&xe._f){const _e=Array.isArray(xe._f.refs)?xe._f.refs[0]:xe._f.ref;if(Gd(_e)){const ke=_e.closest("form");if(ke){ke.reset();break}}}}r={}}s=t.shouldUnregister?j.keepDefaultValues?hn(i):{}:hn(W),h.array.next({values:{...W}}),h.values.next({values:{...W}})}a={mount:j.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!j.keepIsValid||!!j.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:j.keepSubmitCount?n.submitCount:0,isDirty:Y?!1:j.keepDirty?n.isDirty:!!(j.keepDefaultValues&&!Ss(D,i)),isSubmitted:j.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Y?[]:j.keepDirtyValues?j.keepDefaultValues&&s?Tc(i,s):n.dirtyFields:j.keepDefaultValues&&D?Tc(i,D):j.keepDirty?n.dirtyFields:{},touchedFields:j.keepTouched?n.touchedFields:{},errors:j.keepErrors?n.errors:{},isSubmitSuccessful:j.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Tr=(D,j)=>Ln(ki(D)?D(s):D,j);return{control:{register:Er,unregister:mt,getFieldState:Te,handleSubmit:Ir,setError:kt,_executeSchema:v,_getWatch:C,_getDirty:b,_updateValid:N,_removeUnmounted:A,_updateFieldArray:y,_updateDisabledField:_t,_getFieldArray:me,_reset:Ln,_resetDefaultValues:()=>ki(e.defaultValues)&&e.defaultValues().then(D=>{Tr(D,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:D=>{n={...n,...D}},_disableForm:ri,_subjects:h,_proxyFormState:d,_setErrors:k,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(D){o=D},get _defaultValues(){return i},get _names(){return a},set _names(D){a=D},get _formState(){return n},set _formState(D){n=D},get _options(){return e},set _options(D){e={...e,...D}}},trigger:ce,register:Er,handleSubmit:Ir,watch:pt,setValue:Oe,getValues:Re,reset:Tr,resetField:Ct,clearErrors:Me,unregister:mt,setError:kt,setFocus:(D,j={})=>{const $=Z(r,D),ee=$&&$._f;if(ee){const Y=ee.refs?ee.refs[0]:ee.ref;Y.focus&&(Y.focus(),j.shouldSelect&&Y.select())}},getFieldState:Te}}function Vu(t={}){const e=je.useRef(),n=je.useRef(),[r,i]=je.useState({isDirty:!1,isValidating:!1,isLoading:ki(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:ki(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...tN(t),formState:r});const s=e.current.control;return s._options=t,Ny({subject:s._subjects.state,next:o=>{BS(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),je.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),je.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),je.useEffect(()=>{t.values&&!Ss(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),je.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),je.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),je.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=jS(r,s),e.current}const JS=()=>{const{t}=In();return R.jsx(Qr,{to:vt,className:"logo","aria-label":t("routes.home"),children:R.jsxs("svg",{width:"176",height:"50",viewBox:"0 0 176 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"logo-image","aria-label":t("logo"),role:"img",children:[R.jsx("path",{d:"M44.9557 33.5209L42.685 17.5625C42.1017 13.4584 38.5811 10.4167 34.4355 10.4167H15.5615C11.4159 10.4167 7.8953 13.4584 7.312 17.5625L5.04129 33.5209C4.58298 36.7292 7.06201 39.5834 10.291 39.5834C11.7076 39.5834 13.0408 39.0209 14.0408 38.0209L18.7488 33.3334H31.2481L35.9354 38.0209C36.9353 39.0209 38.2894 39.5834 39.6852 39.5834C42.935 39.5834 45.414 36.7292 44.9557 33.5209ZM22.9153 22.9167H18.7488V27.0834H16.6656V22.9167H12.4992V20.8334H16.6656V16.6667H18.7488V20.8334H22.9153V22.9167ZM31.2481 20.8334C30.1024 20.8334 29.1649 19.8959 29.1649 18.75C29.1649 17.6042 30.1024 16.6667 31.2481 16.6667C32.3939 16.6667 33.3314 17.6042 33.3314 18.75C33.3314 19.8959 32.3939 20.8334 31.2481 20.8334ZM35.4146 27.0834C34.2688 27.0834 33.3314 26.1459 33.3314 25C33.3314 23.8542 34.2688 22.9167 35.4146 22.9167C36.5603 22.9167 37.4978 23.8542 37.4978 25C37.4978 26.1459 36.5603 27.0834 35.4146 27.0834Z",className:"logo-text-highlight"}),R.jsx("path",{d:"M60.8561 33.12C59.7521 33.12 58.7041 32.896 57.7121 32.448C56.7361 32 55.8721 31.384 55.1201 30.6C54.3841 29.8 53.8081 28.872 53.3921 27.816C52.9761 26.76 52.7681 25.616 52.7681 24.384C52.7681 23.216 52.9761 22.12 53.3921 21.096C53.8081 20.056 54.3921 19.144 55.1441 18.36C55.8961 17.576 56.7761 16.96 57.7841 16.512C58.7921 16.064 59.8881 15.84 61.0721 15.84C62.6721 15.84 64.0401 16.184 65.1761 16.872C66.3281 17.544 67.1921 18.44 67.7681 19.56L65.2961 21.384C64.8641 20.536 64.2561 19.888 63.4721 19.44C62.7041 18.992 61.8641 18.768 60.9521 18.768C60.2321 18.768 59.5761 18.92 58.9841 19.224C58.3921 19.528 57.8801 19.944 57.4481 20.472C57.0161 21 56.6801 21.608 56.4401 22.296C56.2161 22.984 56.1041 23.712 56.1041 24.48C56.1041 25.296 56.2241 26.048 56.4641 26.736C56.7201 27.424 57.0721 28.024 57.5201 28.536C57.9841 29.048 58.5201 29.456 59.1281 29.76C59.7361 30.048 60.4081 30.192 61.1441 30.192C62.0081 30.192 62.8321 29.968 63.6161 29.52C64.4161 29.072 65.1601 28.416 65.8481 27.552V30.816C64.4241 32.352 62.7601 33.12 60.8561 33.12ZM65.6081 26.664H62.1761V24.24H68.3441V33H65.6081V26.664Z",className:"logo-text-highlight"}),R.jsx("path",{d:"M76.6867 33.24C75.6787 33.24 74.7667 33.072 73.9507 32.736C73.1347 32.384 72.4387 31.912 71.8627 31.32C71.2867 30.712 70.8387 30.024 70.5187 29.256C70.2147 28.472 70.0627 27.648 70.0627 26.784C70.0627 25.584 70.3267 24.488 70.8547 23.496C71.3987 22.504 72.1667 21.712 73.1587 21.12C74.1667 20.512 75.3507 20.208 76.7107 20.208C78.0867 20.208 79.2627 20.512 80.2387 21.12C81.2147 21.712 81.9587 22.504 82.4707 23.496C82.9987 24.472 83.2627 25.528 83.2627 26.664C83.2627 26.856 83.2547 27.056 83.2387 27.264C83.2227 27.456 83.2067 27.616 83.1907 27.744H73.4707C73.5347 28.384 73.7187 28.944 74.0227 29.424C74.3427 29.904 74.7427 30.272 75.2227 30.528C75.7187 30.768 76.2467 30.888 76.8067 30.888C77.4467 30.888 78.0467 30.736 78.6067 30.432C79.1827 30.112 79.5747 29.696 79.7827 29.184L82.5427 29.952C82.2387 30.592 81.7987 31.16 81.2227 31.656C80.6627 32.152 79.9987 32.544 79.2307 32.832C78.4627 33.104 77.6147 33.24 76.6867 33.24ZM73.3987 25.704H79.9747C79.9107 25.064 79.7267 24.512 79.4227 24.048C79.1347 23.568 78.7507 23.2 78.2707 22.944C77.7907 22.672 77.2547 22.536 76.6627 22.536C76.0867 22.536 75.5587 22.672 75.0787 22.944C74.6147 23.2 74.2307 23.568 73.9267 24.048C73.6387 24.512 73.4627 25.064 73.3987 25.704Z",className:"logo-text-highlight"}),R.jsx("path",{d:"M91.0539 33.24C90.0459 33.24 89.1339 33.072 88.3179 32.736C87.5019 32.384 86.8059 31.912 86.2299 31.32C85.6539 30.712 85.2059 30.024 84.8859 29.256C84.5819 28.472 84.4299 27.648 84.4299 26.784C84.4299 25.584 84.6939 24.488 85.2219 23.496C85.7659 22.504 86.5339 21.712 87.5259 21.12C88.5339 20.512 89.7179 20.208 91.0779 20.208C92.4539 20.208 93.6299 20.512 94.6059 21.12C95.5819 21.712 96.3259 22.504 96.8379 23.496C97.3659 24.472 97.6299 25.528 97.6299 26.664C97.6299 26.856 97.6219 27.056 97.6059 27.264C97.5899 27.456 97.5739 27.616 97.5579 27.744H87.8379C87.9019 28.384 88.0859 28.944 88.3899 29.424C88.7099 29.904 89.1099 30.272 89.5899 30.528C90.0859 30.768 90.6139 30.888 91.1739 30.888C91.8139 30.888 92.4139 30.736 92.9739 30.432C93.5499 30.112 93.9419 29.696 94.1499 29.184L96.9099 29.952C96.6059 30.592 96.1659 31.16 95.5899 31.656C95.0299 32.152 94.3659 32.544 93.5979 32.832C92.8299 33.104 91.9819 33.24 91.0539 33.24ZM87.7659 25.704H94.3419C94.2779 25.064 94.0939 24.512 93.7899 24.048C93.5019 23.568 93.1179 23.2 92.6379 22.944C92.1579 22.672 91.6219 22.536 91.0299 22.536C90.4539 22.536 89.9259 22.672 89.4459 22.944C88.9819 23.2 88.5979 23.568 88.2939 24.048C88.0059 24.512 87.8299 25.064 87.7659 25.704Z",className:"logo-text-highlight"}),R.jsx("path",{d:"M108.181 33L104.509 27.576L102.805 29.256V33H99.5891V15.48H102.805V26.088L107.869 20.448H111.277L106.597 25.776L111.613 33H108.181Z",className:"logo-text-highlight"}),R.jsx("path",{d:"M123.928 20.424C123.816 20.312 123.608 20.16 123.304 19.968C123.016 19.776 122.656 19.592 122.224 19.416C121.808 19.24 121.352 19.088 120.856 18.96C120.36 18.816 119.856 18.744 119.344 18.744C118.448 18.744 117.768 18.912 117.304 19.248C116.856 19.584 116.632 20.056 116.632 20.664C116.632 21.128 116.776 21.496 117.064 21.768C117.352 22.04 117.784 22.272 118.36 22.464C118.936 22.656 119.656 22.864 120.52 23.088C121.64 23.36 122.608 23.696 123.424 24.096C124.256 24.48 124.888 24.992 125.32 25.632C125.768 26.256 125.992 27.088 125.992 28.128C125.992 29.04 125.824 29.824 125.488 30.48C125.152 31.12 124.688 31.64 124.096 32.04C123.504 32.44 122.832 32.736 122.08 32.928C121.328 33.104 120.528 33.192 119.68 33.192C118.832 33.192 117.984 33.104 117.136 32.928C116.288 32.752 115.472 32.504 114.688 32.184C113.904 31.848 113.184 31.448 112.528 30.984L113.992 28.128C114.136 28.272 114.392 28.464 114.76 28.704C115.128 28.928 115.576 29.16 116.104 29.4C116.632 29.624 117.208 29.816 117.832 29.976C118.456 30.136 119.088 30.216 119.728 30.216C120.624 30.216 121.304 30.064 121.768 29.76C122.232 29.456 122.464 29.024 122.464 28.464C122.464 27.952 122.28 27.552 121.912 27.264C121.544 26.976 121.032 26.728 120.376 26.52C119.72 26.296 118.944 26.056 118.048 25.8C116.976 25.496 116.08 25.16 115.36 24.792C114.64 24.408 114.104 23.928 113.752 23.352C113.4 22.776 113.224 22.056 113.224 21.192C113.224 20.024 113.496 19.048 114.04 18.264C114.6 17.464 115.352 16.864 116.296 16.464C117.24 16.048 118.288 15.84 119.44 15.84C120.24 15.84 120.992 15.928 121.696 16.104C122.416 16.28 123.088 16.512 123.712 16.8C124.336 17.088 124.896 17.4 125.392 17.736L123.928 20.424Z",className:"logo-text"}),R.jsx("path",{d:"M135.438 32.352C135.166 32.464 134.838 32.592 134.454 32.736C134.07 32.88 133.654 32.992 133.206 33.072C132.774 33.168 132.334 33.216 131.886 33.216C131.294 33.216 130.75 33.112 130.254 32.904C129.758 32.696 129.358 32.368 129.054 31.92C128.766 31.456 128.622 30.856 128.622 30.12V22.896H126.966V20.424H128.622V16.344H131.838V20.424H134.478V22.896H131.838V29.04C131.854 29.472 131.974 29.784 132.198 29.976C132.422 30.168 132.702 30.264 133.038 30.264C133.374 30.264 133.702 30.208 134.022 30.096C134.342 29.984 134.598 29.888 134.79 29.808L135.438 32.352Z",className:"logo-text"}),R.jsx("path",{d:"M142.78 33.24C141.756 33.24 140.836 33.072 140.02 32.736C139.204 32.384 138.508 31.904 137.932 31.296C137.372 30.688 136.94 29.992 136.636 29.208C136.332 28.424 136.18 27.6 136.18 26.736C136.18 25.856 136.332 25.024 136.636 24.24C136.94 23.456 137.372 22.76 137.932 22.152C138.508 21.544 139.204 21.072 140.02 20.736C140.836 20.384 141.756 20.208 142.78 20.208C143.804 20.208 144.716 20.384 145.516 20.736C146.332 21.072 147.028 21.544 147.604 22.152C148.18 22.76 148.612 23.456 148.9 24.24C149.204 25.024 149.356 25.856 149.356 26.736C149.356 27.6 149.204 28.424 148.9 29.208C148.612 29.992 148.18 30.688 147.604 31.296C147.044 31.904 146.356 32.384 145.54 32.736C144.724 33.072 143.804 33.24 142.78 33.24ZM139.492 26.736C139.492 27.472 139.636 28.128 139.924 28.704C140.212 29.264 140.604 29.704 141.1 30.024C141.596 30.344 142.156 30.504 142.78 30.504C143.388 30.504 143.94 30.344 144.436 30.024C144.932 29.688 145.324 29.24 145.612 28.68C145.916 28.104 146.068 27.448 146.068 26.712C146.068 25.992 145.916 25.344 145.612 24.768C145.324 24.192 144.932 23.744 144.436 23.424C143.94 23.104 143.388 22.944 142.78 22.944C142.156 22.944 141.596 23.112 141.1 23.448C140.604 23.768 140.212 24.216 139.924 24.792C139.636 25.352 139.492 26 139.492 26.736Z",className:"logo-text"}),R.jsx("path",{d:"M159.015 23.208C158.039 23.208 157.167 23.4 156.399 23.784C155.631 24.152 155.079 24.688 154.743 25.392V33H151.527V20.424H154.479V23.112C154.927 22.248 155.495 21.568 156.183 21.072C156.871 20.576 157.599 20.304 158.367 20.256C158.543 20.256 158.679 20.256 158.775 20.256C158.871 20.256 158.951 20.264 159.015 20.28V23.208Z",className:"logo-text"}),R.jsx("path",{d:"M166.476 33.24C165.468 33.24 164.556 33.072 163.74 32.736C162.924 32.384 162.228 31.912 161.652 31.32C161.076 30.712 160.628 30.024 160.308 29.256C160.004 28.472 159.852 27.648 159.852 26.784C159.852 25.584 160.116 24.488 160.644 23.496C161.188 22.504 161.956 21.712 162.948 21.12C163.956 20.512 165.14 20.208 166.5 20.208C167.876 20.208 169.052 20.512 170.028 21.12C171.004 21.712 171.748 22.504 172.26 23.496C172.788 24.472 173.052 25.528 173.052 26.664C173.052 26.856 173.044 27.056 173.028 27.264C173.012 27.456 172.996 27.616 172.98 27.744H163.26C163.324 28.384 163.508 28.944 163.812 29.424C164.132 29.904 164.532 30.272 165.012 30.528C165.508 30.768 166.036 30.888 166.596 30.888C167.236 30.888 167.836 30.736 168.396 30.432C168.972 30.112 169.364 29.696 169.572 29.184L172.332 29.952C172.028 30.592 171.588 31.16 171.012 31.656C170.452 32.152 169.788 32.544 169.02 32.832C168.252 33.104 167.404 33.24 166.476 33.24ZM163.188 25.704H169.764C169.7 25.064 169.516 24.512 169.212 24.048C168.924 23.568 168.54 23.2 168.06 22.944C167.58 22.672 167.044 22.536 166.452 22.536C165.876 22.536 165.348 22.672 164.868 22.944C164.404 23.2 164.02 23.568 163.716 24.048C163.428 24.512 163.252 25.064 163.188 25.704Z",className:"logo-text"})]})})},nN=()=>{const t=Ia(),{t:e,i18n:n}=In(),{handleSubmit:r,register:i,setValue:s}=Vu(),{openPopup:o}=qh(),a=ku(),[l,c]=B.useState({}),[d,h]=B.useState(!1),[p,_]=B.useState(!1);B.useEffect(()=>{const P=()=>{if(a.isHomeRoute&&!localStorage.getItem(qr)){c({name:e("routes.login"),to:`${vt}/login`});return}if(a.isAdminMenuRoute){c({name:e("logout.title"),action:()=>o({type:"warning",message:e("logout.confirmation"),okButton:{action:()=>qk(t,o)}})});return}if(a.isHomeRoute&&localStorage.getItem(qr)||a.isAddProductRoute||a.isEditProductRoute){c({name:e("routes.admin-menu"),to:`${vt}/admin-menu`});return}c({})};return P(),n.on("languageChanged",P),()=>n.off("languageChanged",()=>P)},[a]),B.useEffect(()=>{p&&AE(_)},[p]);const E=()=>{h(!d),_(!0)};return R.jsx("header",{...d?{className:"search-bar-is-open"}:null,children:R.jsxs("nav",{className:"container",children:[R.jsx(JS,{}),R.jsxs("form",{onSubmit:r(P=>Kk(P,o,t,s)),className:"search-form","aria-labelledby":"search-field-label",children:[R.jsx("label",{id:"search-field-label",htmlFor:"search-field",className:"sr-only",children:e("search.form.label")}),R.jsx("input",{...i("search"),id:"search-field",type:"text",className:"search-field",placeholder:e("search.form.placeholder"),autoComplete:"off","aria-autocomplete":"none"}),R.jsx("button",{type:"submit",className:"search-submit-button","aria-label":e("search.form.button"),children:R.jsx("svg",{width:"24",height:"25",viewBox:"0 0 24 25",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"magnifying-glass-icon","aria-label":e("search.icon"),role:"presentation",children:R.jsx("path",{d:"M15.5001 14.5H14.7101L14.4301 14.23C15.6301 12.83 16.2501 10.92 15.9101 8.89002C15.4401 6.11002 13.1201 3.89002 10.3201 3.55002C6.09014 3.03002 2.53014 6.59001 3.05014 10.82C3.39014 13.62 5.61014 15.94 8.39014 16.41C10.4201 16.75 12.3301 16.13 13.7301 14.93L14.0001 15.21V16L18.2501 20.25C18.6601 20.66 19.3301 20.66 19.7401 20.25C20.1501 19.84 20.1501 19.17 19.7401 18.76L15.5001 14.5ZM9.50014 14.5C7.01014 14.5 5.00014 12.49 5.00014 10C5.00014 7.51002 7.01014 5.50002 9.50014 5.50002C11.9901 5.50002 14.0001 7.51002 14.0001 10C14.0001 12.49 11.9901 14.5 9.50014 14.5Z"})})})]}),Object.keys(l).length?l.to?R.jsx(Qr,{to:l.to,className:"button-outlined",role:"button",children:l.name}):R.jsx("button",{onClick:l.action,className:"button-outlined button-danger","aria-haspopup":"dialog","aria-controls":"popup-container",children:l.name}):null,R.jsx("button",{type:"button",onClick:E,className:"search-bar-toggler-button","aria-label":e(`search.${d?"close":"open"}.action`),children:d?R.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor","aria-label":e("search.close.icon"),role:"presentation",children:R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.207 6.207a1 1 0 0 0-1.414-1.414L12 10.586 6.207 4.793a1 1 0 0 0-1.414 1.414L10.586 12l-5.793 5.793a1 1 0 1 0 1.414 1.414L12 13.414l5.793 5.793a1 1 0 0 0 1.414-1.414L13.414 12l5.793-5.793z"})}):R.jsx("svg",{width:"24",height:"25",viewBox:"0 0 24 25",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor","aria-label":e("search.icon"),role:"presentation",children:R.jsx("path",{d:"M15.5001 14.5H14.7101L14.4301 14.23C15.6301 12.83 16.2501 10.92 15.9101 8.89002C15.4401 6.11002 13.1201 3.89002 10.3201 3.55002C6.09014 3.03002 2.53014 6.59001 3.05014 10.82C3.39014 13.62 5.61014 15.94 8.39014 16.41C10.4201 16.75 12.3301 16.13 13.7301 14.93L14.0001 15.21V16L18.2501 20.25C18.6601 20.66 19.3301 20.66 19.7401 20.25C20.1501 19.84 20.1501 19.17 19.7401 18.76L15.5001 14.5ZM9.50014 14.5C7.01014 14.5 5.00014 12.49 5.00014 10C5.00014 7.51002 7.01014 5.50002 9.50014 5.50002C11.9901 5.50002 14.0001 7.51002 14.0001 10C14.0001 12.49 11.9901 14.5 9.50014 14.5Z"})})}),p?R.jsx("p",{className:"sr-only",role:"alert",children:e(`search.${d?"open":"close"}.alert`)}):null]})})};var YS={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(YS);var rN=YS.exports;const pu=Rm(rN),Vr=({type:t,textarea:e,label:n,price:r,...i})=>{var l;const{field:s,fieldState:o}=qD(i),a=`${s.name}-error-message`;return R.jsxs("div",{className:pu("field-container",{price:r}),children:[!e||t||r?R.jsx("input",{...s,id:s.name,type:t||"text",className:"field",placeholder:"",autoComplete:"off","aria-autocomplete":"none","aria-describedby":a,"aria-invalid":o.invalid}):R.jsx("textarea",{...s,id:s.name,cols:30,rows:2,className:"field",placeholder:"",autoComplete:"off","aria-autocomplete":"none","aria-describedby":a,"aria-invalid":o.invalid}),R.jsx("label",{htmlFor:s.name,className:"field-label",children:n}),o.invalid?R.jsx("p",{id:a,className:"field-error-message",role:"alert","aria-live":"assertive",children:(l=o.error)==null?void 0:l.message}):null]})},iN=()=>{const{t,i18n:{language:e}}=In(),{handleSubmit:n,control:r,getValues:i}=Vu({defaultValues:Gk,mode:"onBlur"}),{openPopup:s}=qh(),[o,a]=B.useState(!1),l=["about-us","privacy-policy","loyalty-program","our-stores","franchise-opportunities","advertise-here"];return R.jsxs("footer",{children:[R.jsxs("div",{className:"container nav-container",children:[R.jsxs("nav",{className:"nav-links",children:[R.jsx(JS,{}),R.jsx("ul",{className:"nav-links-list",children:l.map((c,d)=>R.jsx("li",{className:"nav-links-list-item",children:R.jsx(Qr,{to:`${vt}/${c}`,className:"nav-links-link",children:t(`routes.${c}`)})},d))})]}),R.jsxs("form",{onSubmit:n(()=>s({type:"success",message:t("contact-us.success",{name:i("contact-name")})})),className:"contact-us-form","aria-labelledby":"contact-us-title","aria-haspopup":"dialog","aria-controls":"popup-container",children:[R.jsx("h2",{id:"contact-us-title",className:"typography-title",children:t("contact-us.title")}),R.jsx(Vr,{control:r,name:"contact-name",rules:{required:t("form-errors.required",{fieldName:t("contact-us.name")}),minLength:{value:3,message:t("form-errors.too-short",{fieldName:t("contact-us.name"),charNumber:3})},maxLength:{value:100,message:t("form-errors.too-long",{fieldName:t("contact-us.name"),charNumber:100})}},label:t("contact-us.name")}),R.jsx(Vr,{control:r,name:"contact-message",rules:{required:t("form-errors.required",{fieldName:t("contact-us.message")}),minLength:{value:10,message:t("form-errors.too-short",{fieldName:t("contact-us.message"),charNumber:10})},maxLength:{value:1e3,message:t("form-errors.too-long",{fieldName:t("contact-us.message"),charNumber:1e3})}},label:t("contact-us.write-your-message"),textarea:!0}),R.jsx("button",{type:"submit",className:"button-filled",children:t("contact-us.submit")})]})]}),R.jsx("ul",{className:"container language-list",children:Object.entries(ev).map(([c,d],h)=>R.jsx("li",{className:"language-list-item",children:R.jsx("button",{type:"button",onClick:()=>eR(c,a),className:pu("language-button",{"current-language-button":e===c}),"aria-label":t("language.change",{languageName:d}),children:d})},h))}),o?R.jsx("p",{className:"sr-only",role:"alert",children:t("language.change-success",{languageName:ev[e]})}):null,R.jsx("div",{className:"credits",children:R.jsxs("p",{className:"container",children:[t("credits")+" ",R.jsx("a",{href:"https://github.com/novcmbro",target:"_blank",rel:"noopener noreferrer",className:"external-link","aria-label":"GitHub",children:"Novcmbro"}),R.jsx("span",{className:"credits-year",children:"2024"})]})})]})},sN=()=>{const{t}=In(),{type:e,message:n,okButton:r,cancelButton:i,popupRef:s,isPopupOpen:o,closePopup:a}=qh(),l=c=>{c&&c.action&&c.action(),a()};return o?R.jsx("div",{ref:s,className:"container popup-container",role:"dialog","aria-labelledby":"popup-title","aria-describedby":"popup-message","aria-modal":"true",tabIndex:-1,children:R.jsxs("div",{className:"popup",children:[R.jsx("h2",{id:"popup-title",className:"typography-title-md",children:t(e!=="danger"?`popup.${e}`:"popup.warning")}),R.jsx("p",{id:"popup-message",children:n}),R.jsxs("div",{className:"button-container",children:[r!=null&&r.action&&i!==!1?R.jsx("button",{type:"button",onClick:()=>l(i),className:"button-outlined",children:(i==null?void 0:i.text)||t("popup.cancel")}):null,R.jsx("button",{type:"button",onClick:()=>l(r),className:pu("button-filled",{"button-danger":e==="danger"}),children:(r==null?void 0:r.text)||"OK"})]})]})}):null},oN={description:"GeekStore is a fictional online store with a variety of merchandise inspired by pop culture, including sci-fi, fantasy, gaming, and much more.",logo:"GeekStore logo",search:{form:{label:"Search product",placeholder:"What you want to find?",button:"Search"},icon:"Magnifying glass icon",open:{action:"Open search bar",alert:"Search bar is open"},close:{action:"Close search bar",alert:"Search bar is closed",icon:"X icon"},empty:"There is no search value. Please insert any information of the product(s) you wish to find.",results:"Search results for '{{ search }}'"},routes:{home:"Home","product-details":"Product","see-product":"See product","see-all":"See all","search-products":"Search products",login:"Login","admin-menu":"Admin menu","add-product":"Add product","edit-product":"Edit product","not-found":"Page not found","not-found-description":"The page you are trying to access does not exist or is unavailable at the moment.","not-found-image":"404 number with a person emerging from the middle of the number 0, hand raised to their eyes as if searching for something in the distance.","back-home":"Back home","about-us":"About us","privacy-policy":"Privacy policy","loyalty-program":"Loyalty program","our-stores":"Our stores","franchise-opportunities":"Franchise opportunities","advertise-here":"Advertise here"},"form-errors":{required:"{{ fieldName }} cannot be empty.","too-short":"{{ fieldName }} must have min of {{ charNumber }} characters.","too-long":"{{ fieldName }} must have max of {{ charNumber }} characters.",pattern:"{{ fieldName }} is invalid. Please insert a valid format."},"home-banner":{title:"Promotional {{ month }}",description:"Selected products with 33% off",button:"See {{ category }}",months:["January","February","March","April","May","June","July","August","September","October","November","December"]},login:{title:"Start session","write-your-email":"Write your email",password:"Password","write-your-password":"Write your password",submit:"Login","invalid-credential":"Email and/or password is wrong. Please try again.","user-not-found":"User not found. Please check email and password and try again.","user-disabled":"This account has been disabled. Please contact support for assistance.","too-many-requests":"Too many unsuccessful login attempts. Please try again later.","network-request-failed":"Unable to connect to the server. Please check your internet connection and try again."},logout:{title:"Logout",confirmation:"Are you sure you want to logout? Please press ok to confirm or press cancel.",success:"You were logged out successfully.",error:"Something went wrong while trying to logout. Please try again."},products:{"similar-products":"Similar products","all-products":"All products",loading:"Loading","get-error":"Something went wrong while getting products list. Please try again later.",empty:"There are no products to show.","not-found":"Product not found.","no-permission":"You have no permission to do this action. Please, login and try again.",product:"Product","add-success":"Product added successfully!","add-error":"Failed to add product. Please try again.",edit:"Edit","edit-no-changes":"There are no changes made to '{{ productName }}' product, so nothing to edit.","edit-success":"Product edited successfully!","edit-error":"Failed to edit product. Please try again.",delete:"Delete","delete-confirmation":"Are you sure you want to delete '{{ productName }}' product? This action cannot be undone.","delete-success":"Product deleted successfully!","delete-error":"Failed to delete product. Please try again.",restore:"Restore","restore-products":"Restore products","restore-confirmation":"Are you sure you want to restore products list? All the default products will be added back and the ones you added will be deleted. This action cannot be undone.","restore-no-changes":"There are no changes made to products list, so nothing to restore.","restore-success":"Products restored successfully!","restore-error":"Failed to restore products. Please try again.",form:{"image-url":"Product image URL",category:"Product category","category-error":"Category is invalid. It must have only letters (a-z), numbers (0-9), hyphens (-) and apostrophes (').",name:"Product name",price:"Product price","price-is-zero":"Product price is invalid. It cannot be zero.","price-too-high":"Product price is too high. It must be lower than $99,999.99",description:"Product description"}},language:{change:"Change language to {{ languageName }}","change-success":"Language changed to {{ languageName }}"},"contact-us":{title:"Contact us",name:"Name",message:"Message","write-your-message":"Write your message",submit:"Send message",success:"Your message was sent successfully! Thank you, {{ name }}, for contacting us. We will respond you soon."},popup:{success:"Success",error:"Error",warning:"Warning",cancel:"Cancel"},credits:"Developed by"},aN={translation:oN},lN={description:"GeekStore  uma loja online fictcia com uma variedade de produtos inspirados na cultura pop, incluindo fico cientfica, fantasia, jogos e muito mais.",logo:"Logotipo GeekStore",search:{form:{label:"Pesquisar produto",placeholder:"O que deseja encontrar?",button:"Pesquisar"},icon:"cone de lupa",open:{action:"Abrir barra de busca",alert:"Barra de busca est aberta"},close:{action:"Fechar barra de busca",alert:"Barra de busca est fechada",icon:"cone de X"},empty:"No h valor de pesquisa. Por favor, insira qualquer informao do(s) produto(s) que deseja encontrar.",results:"Resultados da pesquisa para '{{ search }}'"},routes:{home:"Incio","product-details":"Produto","see-product":"Ver produto","see-all":"Ver tudo","search-products":"Pesquisar produtos",login:"Entrar","admin-menu":"Menu administrador","add-product":"Adicionar produto","edit-product":"Editar produto","not-found":"Pgina no encontrada","not-found-description":"A pgina que voc est tentando acessar no existe ou est indisponvel no momento.","not-found-image":"Nmero 404 com uma pessoa emergindo do meio do nmero 0, mo erguida at os olhos como se procurasse por algo distante.","back-home":"Voltar para incio","about-us":"Quem somos ns","privacy-policy":"Poltica de privacidade","loyalty-program":"Programa fidelidade","our-stores":"Nossas lojas","franchise-opportunities":"Quero ser franqueado","advertise-here":"Anuncie aqui"},"form-errors":{required:"{{ fieldName }} no pode estar vazio.","too-short":"{{ fieldName }} deve ter no mnimo {{ charNumber }} caracteres.","too-long":"{{ fieldName }} deve ter no mximo {{ charNumber }} caracteres.",pattern:"{{ fieldName }} invlido. Por favor, insira um formato vlido."},"home-banner":{title:"{{ month }} Promocional",description:"Produtos selecionados com 33% de desconto",button:"Ver {{ category }}",months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},login:{title:"Iniciar sesso","write-your-email":"Escreva seu email",password:"Senha","write-your-password":"Escreva sua senha",submit:"Entrar","invalid-credential":"Email e/ou senha incorretos. Por favor, tente novamente.","user-not-found":"Usurio no encontrado. Por favor, verifique email e senha e tente novamente.","user-disabled":"Esta conta foi desativada. Por favor, entre em contato com o suporte para obter assistncia.","too-many-requests":"Muitas tentativas de login malsucedidas. Por favor, tente novamente mais tarde.","network-request-failed":"No  possvel conectar-se ao servidor. Por favor, verifique sua conexo com a internet e tente novamente."},logout:{title:"Sair",confirmation:"Tem certeza que deseja sair? Por favor, pressione ok para confirmar ou pressione cancelar.",success:"Voc foi desconectado com sucesso.",error:"Algo deu errado ao tentar sair. Por favor, tente novamente."},products:{"similar-products":"Produtos similares","all-products":"Todos os produtos",loading:"Carregando","get-error":"Algo deu errado ao obter a lista de produtos. Por favor, tente novamente mais tarde.",empty:"No h produtos para mostrar.","not-found":"Produto no encontrado.","no-permission":"Voc no tem permisso para realizar esta ao. Por favor, faa login e tente novamente.",product:"Produto","add-success":"Produto adicionado com sucesso!","add-error":"Falha ao adicionar produto. Por favor, tente novamente.",edit:"Editar","edit-no-changes":"No foram feitas alteraes no produto '{{ productName }}', portanto, no h nada para editar.","edit-success":"Produto editado com sucesso!","edit-error":"Falha ao editar produto. Por favor, tente novamente.",delete:"Deletar","delete-confirmation":"Voc tem certeza que deseja deletar o produto '{{ productName }}'? Esta ao no pode ser desfeita.","delete-success":"Produto deletado com sucesso!","delete-error":"Falha ao deletar produto. Por favor, tente novamente.",restore:"Restaurar","restore-products":"Restaurar produtos","restore-confirmation":"Voc tem certeza que deseja restaurar a lista de produtos? Todos os produtos padro sero adicionados de volta e aqueles que voc adicionou sero excludos. Esta ao no pode ser desfeita.","restore-no-changes":"No foram feitas alteraes na lista de produtos, portanto, no h nada para restaurar.","restore-success":"Produtos restaurados com sucesso!","restore-error":"Falha ao restaurar produtos. Por favor, tente novamente.",form:{"image-url":"URL da imagem do produto",category:"Categoria do produto","category-error":"Categoria invlida. Esta deve conter apenas letras (a-z), nmeros (0-9), hfens (-) e apstrofos (').",name:"Nome do produto",price:"Preo do produto","price-is-zero":"Preo do produto invlido. No pode ser zero.","price-too-high":"O preo do produto  muito alto. Deve ser inferior a $99.999,99",description:"Descrio do produto"}},language:{change:"Alterar idioma para {{ languageName }}","change-success":"Idioma alterado para {{ languageName }}"},"contact-us":{title:"Fale conosco",name:"Nome",message:"Mensagem","write-your-message":"Escreva sua mensagem",submit:"Enviar mensagem",success:"Sua mensagem foi enviada com sucesso! Agradecemos a voc, {{ name }}, por nos contatar. Ns iremos lhe responder em breve."},popup:{success:"Sucesso",error:"Erro",warning:"Aviso",cancel:"Cancelar"},credits:"Desenvolvido por"},uN={translation:lN},Oy="novcmbro_geekstore_language",Am=localStorage.getItem(Oy),XS=navigator.language.split("-")[0];!Am&&localStorage.setItem(Oy,XS);ft.use(DD).init({resources:{en:aN,pt:uN},lng:Am||XS,fallbackLng:"en",interpolation:{escapeValue:!1}}).then(()=>{const t=e=>{document.documentElement.lang=e,document.querySelectorAll("[name='description']").forEach(n=>n.content=eu("description"))};t(Am),ft.on("languageChanged",e=>{localStorage.setItem(Oy,e),t(e)})});const cN=()=>{const t=Ia(),e=Th(),n=ku();return bS(),B.useEffect(()=>PE(n),[n]),B.useEffect(()=>Hk(e,n.isLoginRoute,t),[e,n]),R.jsx(FD,{children:R.jsxs(R.Fragment,{children:[R.jsx(nN,{}),R.jsx("main",{className:"container",children:R.jsx(rA,{})}),R.jsx(iN,{}),R.jsx(sN,{}),R.jsx(SA,{})]})})},ba=({isProductNotFound:t,areProductsNotFound:e,children:n})=>{const{t:r}=In(),{isLoading:i,productsList:s}=ni(),{isHomeRoute:o}=ku();return i?R.jsx("p",{className:pu("product-alert-message",{container:o}),role:"alert",children:r("products.loading")}):t?R.jsx("p",{className:"product-alert-message",role:"alert",children:r("products.not-found")}):!s.length||e?R.jsx("p",{className:pu("product-alert-message",{container:o}),role:"alert",children:r("products.empty")}):n},Lu=t=>R.jsx("ol",{className:"products-list",...t}),Ou=({title:t,children:e})=>R.jsxs("div",{className:"products-list-header",children:[R.jsx("h2",{className:"typography-title-md",children:t}),e]}),My="data:image/svg+xml,%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%20120%20120'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='120'%20height='120'%20fill='%23A2A2A2'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M33.2503%2038.4816C33.2603%2037.0472%2034.4199%2035.8864%2035.8543%2035.875H83.1463C84.5848%2035.875%2085.7503%2037.0431%2085.7503%2038.4816V80.5184C85.7403%2081.9528%2084.5807%2083.1136%2083.1463%2083.125H35.8543C34.4158%2083.1236%2033.2503%2081.957%2033.2503%2080.5184V38.4816ZM80.5006%2041.1251H38.5006V77.8751L62.8921%2053.4783C63.9172%2052.4536%2065.5788%2052.4536%2066.6039%2053.4783L80.5006%2067.4013V41.1251ZM43.75%2051.6249C43.75%2054.5244%2046.1005%2056.8749%2049%2056.8749C51.8995%2056.8749%2054.25%2054.5244%2054.25%2051.6249C54.25%2048.7254%2051.8995%2046.3749%2049%2046.3749C46.1005%2046.3749%2043.75%2048.7254%2043.75%2051.6249Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",Mu=({product:t})=>{const{t:e}=In(),{deleteProduct:n}=ni(),{isAdminMenuRoute:r}=ku();return R.jsxs("li",{className:"product-list-item","aria-label":t.name,children:[r?R.jsxs("div",{className:"button-container",children:[R.jsx("button",{type:"button",onClick:()=>n(t.docId,t.name),"aria-label":`${e("products.delete")} ${t.name}`,"aria-haspopup":"dialog","aria-controls":"popup-container",children:R.jsx("svg",{width:"18",height:"18",viewBox:"0 0 14 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"button-icon",role:"presentation",children:R.jsx("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z"})})}),R.jsx(Qr,{to:`${vt}/edit-product/${t.id}`,"aria-label":`${e("products.edit")} ${t.name}`,children:R.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"button-icon",role:"presentation",children:R.jsx("path",{d:"M0 14.25V18H3.75L14.81 6.94L11.06 3.19L0 14.25ZM17.71 4.04C18.1 3.65 18.1 3.02 17.71 2.63L15.37 0.289998C14.98 -0.100002 14.35 -0.100002 13.96 0.289998L12.13 2.12L15.88 5.87L17.71 4.04Z"})})})]}):null,R.jsx("img",{src:t.image,onError:i=>i.currentTarget.src=My,alt:t.name,className:"product-image",role:"img",loading:"lazy"}),R.jsx("span",{className:"product-name",children:t.name}),R.jsx("span",{className:"product-price",children:t.price.toLocaleString("en-US",{style:"currency",currency:"USD"})}),r?R.jsx("span",{className:"product-id",children:`#${t.id.toLocaleString("en-US",{minimumIntegerDigits:7,useGrouping:!1})}`}):R.jsx(Qr,{to:`${vt}/product/${t.id}`,className:"route-link see-product-link",children:e("routes.see-product")})]})},ZS=({onSubmit:t,control:e,watch:n,setValue:r})=>{const{isAddProductRoute:i}=ku(),{t:s}=In(),o=s(`routes.${i?"add":"edit"}-product`),a=n("image");return R.jsxs("form",{onSubmit:t,className:"product-form","aria-labelledby":"product-form-title","aria-haspopup":"dialog","aria-controls":"popup-container",children:[R.jsx("h2",{id:"product-form-title",className:"typography-title-md",children:o}),a?R.jsx("img",{src:a,onError:l=>l.currentTarget.src=My,alt:n("name")||s("products.product"),className:"product-image-preview",role:"img"}):null,R.jsx(Vr,{control:e,name:"image",type:"url",rules:{required:s("form-errors.required",{fieldName:s("products.form.image-url")}),pattern:{value:/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#= ]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//= ]*)/,message:s("form-errors.pattern",{fieldName:s("products.form.image-url")})}},label:s("products.form.image-url")}),R.jsx(Vr,{control:e,name:"category",rules:{required:s("form-errors.required",{fieldName:s("products.form.category")}),pattern:{value:/^[a-zA-Z--'\s\d]+$/,message:s("products.form.category-error")},minLength:{value:3,message:s("form-errors.too-short",{fieldName:s("products.form.category"),charNumber:3})},maxLength:{value:30,message:s("form-errors.too-long",{fieldName:s("products.form.category"),charNumber:30})}},label:s("products.form.category")}),R.jsx(Vr,{control:e,name:"name",rules:{required:s("form-errors.required",{fieldName:s("products.form.name")}),minLength:{value:3,message:s("form-errors.too-short",{fieldName:s("products.form.name"),charNumber:3})},maxLength:{value:120,message:s("form-errors.too-long",{fieldName:s("products.form.name"),charNumber:120})}},label:s("products.form.name")}),R.jsx(Vr,{control:e,name:"price",rules:{required:s("form-errors.required",{fieldName:s("products.form.price")}),validate:{hasPrice:l=>parseFloat(l)!=0||s("products.form.price-is-zero"),priceTooHigh:l=>l.toString().replace(/[,.]/g,"")<1e7||s("products.form.price-too-high")},onChange:l=>{const{name:c,value:d}=l.target,h=d.trim(),p=E=>E.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).replace("$","");if(!h){r(c,p(0));return}const _=h.replace(/[^\d]/g,"");r(c,p(parseInt(_,10)/100))}},label:s("products.form.price"),price:!0}),R.jsx(Vr,{control:e,name:"description",rules:{maxLength:{value:430,message:s("form-errors.too-long",{fieldName:s("products.form.category"),charNumber:430})}},label:s("products.form.description"),textarea:!0}),R.jsx("button",{type:"submit",className:"button-filled button-full-width",children:o})]})},dN=()=>{const{t}=In(),{productsList:e}=ni(),[n,r]=B.useState({}),[i,s]=B.useState("");return B.useEffect(()=>{e.length&&r(e.reduce((o,a)=>{const{category:l}=a;return o[l]=[...o[l]||[],a],o},{}))},[e]),B.useEffect(()=>{const o=Object.keys(n);if(o.length){const a="Consoles",l=n[a]?a:o[o.length-1];s(l)}},[n]),R.jsx(ba,{children:R.jsxs(R.Fragment,{children:[i?R.jsx("div",{className:"banner",children:R.jsxs("div",{className:"container",children:[R.jsx("h2",{className:"typography-title-lg",children:t("home-banner.title",{month:t(`home-banner.months.${new Date().getMonth()}`)})}),R.jsx("p",{children:t("home-banner.description")}),R.jsx(Qr,{to:`#${i}`,className:"button-filled",children:t("home-banner.button",{category:i})})]})}):null,R.jsx("div",{className:"container home-container",children:Object.entries(n).map(([o,a],l)=>R.jsxs("section",{id:o,className:"products-row","aria-label":o,children:[R.jsx(Ou,{title:o,children:R.jsx(Qr,{to:`${vt}/see-all/${o}`,className:"route-link",children:`${t("routes.see-all")} `})}),R.jsx(Lu,{"aria-label":o,children:a.map((c,d)=>d<=5?R.jsx(Mu,{product:c},d):null)})]},l))})]})})},hN=()=>{var a;const{id:t}=mh(),{t:e}=In(),{productsList:n}=ni(),[r,i]=B.useState({}),[s,o]=B.useState([]);return B.useEffect(()=>{if(t&&n.length){const l=[],d=n.length>1&&l.length<6;for(const h of n)h.id===parseInt(t)?i(h):d&&h.category===r.category&&l.push(h);if(d)for(const h of n){if(l.length>=6)break;h.category!==r.category&&l.push(h)}l.length&&o(l)}},[t,n,r]),R.jsxs(R.Fragment,{children:[R.jsx(ba,{isProductNotFound:!Object.keys(r).length,children:R.jsxs("section",{className:"product-details","aria-label":r.name,children:[R.jsx("img",{src:r.image,onError:l=>l.currentTarget.src=My,alt:r.name,className:"product-details-image",role:"img",loading:"lazy"}),R.jsxs("div",{className:"product-details-info",children:[R.jsx("h2",{className:"typography-title-lg",children:r.name}),R.jsx("span",{className:"product-price",children:(a=r.price)==null?void 0:a.toLocaleString("en-US",{style:"currency",currency:"USD"})}),R.jsx("p",{children:r.description})]})]})}),s.length?R.jsxs("section",{className:"products-row","aria-label":e("products.similar-products"),children:[R.jsx(Ou,{title:e("products.similar-products")}),R.jsx(Lu,{"aria-label":e("products.similar-products"),children:s.map((l,c)=>R.jsx(Mu,{product:l},c))})]}):null]})},fN=()=>{const{category:t}=mh(),{productsList:e}=ni(),[n,r]=B.useState([]);return B.useEffect(()=>{if(t&&e.length){const i=[];for(const s of e)s.category===t&&i.push(s);i.length&&r(i)}},[t,e]),R.jsxs(R.Fragment,{children:[R.jsx(Ou,{title:t}),R.jsx(ba,{areProductsNotFound:!n.length,children:R.jsx(Lu,{children:n.map((i,s)=>R.jsx(Mu,{product:i},s))})})]})},pN=()=>{const{search:t}=mh(),{t:e}=In(),{productsList:n}=ni(),[r,i]=B.useState([]);return B.useEffect(()=>{if(t&&n.length){const s=[],o=["docId","image"];for(const a of n)for(const[l,c]of Object.entries(a)){const d=c.toString().toLowerCase().includes(t.toLowerCase());!o.includes(l)&&d&&!s.includes(a)&&s.push(a)}i(s.length?s:[])}},[t,n]),R.jsxs(R.Fragment,{children:[R.jsx(Ou,{title:e("search.results",{search:t})}),R.jsx(ba,{areProductsNotFound:!r.length,children:R.jsx(Lu,{"aria-label":e("search.results",{search:t}),children:r.map((s,o)=>R.jsx(Mu,{product:s},o))})})]})},mN=()=>{const t=Ia(),{t:e}=In(),{handleSubmit:n,control:r,setError:i}=Vu({defaultValues:zk,mode:"onBlur"});return R.jsxs("form",{onSubmit:n(s=>$k(s,t,i)),className:"login-form","aria-labelledby":"login-title",children:[R.jsx("h2",{id:"login-title",className:"typography-title-md",children:e("login.title")}),R.jsx(Vr,{control:r,name:"email",rules:{required:e("form-errors.required",{fieldName:"Email"}),pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,message:e("form-errors.pattern",{fieldName:"Email"}).replace(/./g,s=>s.toLowerCase()).replace(/^\w/,s=>s.toUpperCase())},maxLength:{value:120,message:e("form-errors.too-long",{fieldName:"Email",charNumber:120})}},label:e("login.write-your-email")}),R.jsx(Vr,{control:r,name:"password",type:"password",rules:{required:e("form-errors.required",{fieldName:e("login.password")}),minLength:{value:6,message:e("form-errors.too-short",{fieldName:e("login.password"),charNumber:6})},maxLength:{value:15,message:e("form-errors.too-long",{fieldName:e("login.password"),charNumber:15})}},label:e("login.write-your-password")}),R.jsx("button",{type:"submit",className:"button-filled button-full-width",children:e("login.submit")})]})},gN=()=>{const{t}=In(),{productsList:e,restoreDefaultProducts:n}=ni();return R.jsxs(R.Fragment,{children:[R.jsx(Ou,{title:t("products.all-products"),children:R.jsx(Qr,{to:`${vt}/add-product`,className:"button-filled",children:t("routes.add-product")})}),R.jsx(ba,{children:R.jsx(Lu,{"aria-label":t("products.all-products"),children:e.map((r,i)=>R.jsx(Mu,{product:r},i))})}),R.jsx("button",{onClick:n,className:"button-filled button-danger restore-products-button","aria-haspopup":"dialog","aria-controls":"popup-container",children:t("products.restore-products")})]})},yN=()=>{const{initialProductFormValues:t,addProduct:e}=ni(),{handleSubmit:n,control:r,watch:i,setValue:s}=Vu({defaultValues:t,mode:"onBlur"});return R.jsx(ZS,{onSubmit:n(e),control:r,watch:i,setValue:s})},vN=()=>{const{id:t}=mh(),{initialProductFormValues:e,productsList:n,editProduct:r}=ni(),{handleSubmit:i,control:s,watch:o,setValue:a}=Vu({defaultValues:e,mode:"onBlur"}),[l,c]=B.useState({});return B.useEffect(()=>{if(t&&n.length){for(const d of n)if(d.id===parseInt(t)){const{docId:h,id:p,..._}=d;c(d);for(const[E,P]of Object.entries(_))a(E,P);break}}},[t,n,a]),R.jsx(ba,{isProductNotFound:!Object.keys(l).length,children:R.jsx(ZS,{onSubmit:i(d=>r(l,d)),control:s,watch:o,setValue:a})})},_N=()=>{const{t}=In();return R.jsxs("div",{className:"route-not-found",children:[R.jsxs("svg",{width:"228",height:"126",viewBox:"16.12 126.97 467.78 228.08",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:"not-found-image",role:"img","aria-label":t("routes.not-found-image"),children:[R.jsxs("defs",{children:[R.jsxs("linearGradient",{id:"linear-gradient-404-page-not-found-9",x1:"-25.26",y1:"3765.17",x2:"339.85",y2:"3560.87",gradientTransform:"translate(-31.27 3901.49) scale(1 -1)",gradientUnits:"userSpaceOnUse",children:[R.jsx("stop",{offset:"0",stopColor:"#000",stopOpacity:"0"}),R.jsx("stop",{offset:".99",stopColor:"#000"})]}),R.jsx("linearGradient",{id:"linear-gradient-2-404-page-not-found-9",x1:"520.69",y1:"3568.03",x2:"200.03",y2:"3841.39",xlinkHref:"#linear-gradient-404-page-not-found-9"}),R.jsx("linearGradient",{id:"linear-gradient-3-404-page-not-found-9",x1:"376.54",y1:"3659.32",x2:"26.88",y2:"3673.5",xlinkHref:"#linear-gradient-404-page-not-found-9"}),R.jsx("linearGradient",{id:"linear-gradient-4-404-page-not-found-9",x1:"278.61",y1:"277.82",x2:"102.31",y2:"169.33",gradientTransform:"matrix(1,0,0,1,0,0)",xlinkHref:"#linear-gradient-404-page-not-found-9"}),R.jsx("linearGradient",{id:"linear-gradient-5-404-page-not-found-9",x1:"335.73",y1:"3728.17",x2:"235.31",y2:"3620.67",xlinkHref:"#linear-gradient-404-page-not-found-9"}),R.jsx("linearGradient",{id:"linear-gradient-6-404-page-not-found-9",x1:"321.45",y1:"3644.72",x2:"306.73",y2:"3714.15",xlinkHref:"#linear-gradient-404-page-not-found-9"}),R.jsx("linearGradient",{id:"linear-gradient-7-404-page-not-found-9",x1:"277.18",y1:"3702.54",x2:"280.06",y2:"3703.54",xlinkHref:"#linear-gradient-404-page-not-found-9"}),R.jsx("linearGradient",{id:"linear-gradient-8-404-page-not-found-9",x1:"277.93",y1:"3691.43",x2:"294.95",y2:"3677.48",xlinkHref:"#linear-gradient-404-page-not-found-9"})]}),R.jsx("path",{className:"accent-color",d:"M42.9,314.3c-30.11-23.27-35.65-66.55-12.38-96.66,1.66-2.15,3.45-4.2,5.35-6.14,10.2-10.29,23.38-16.9,34.69-25.81,19.56-15.31,34.05-37.42,55.87-49.11,26.28-14.08,58.12-10.37,86.98-3.34,28.86,7.03,57.85,17.09,87.45,14.55,17.62-1.53,34.59-7.49,52.05-10.4,17.46-2.91,36.61-2.38,51.22,7.79,21.27,14.91,26.32,45.04,43.77,64.47,8.45,9.42,19.67,16.12,27.16,26.37,12.04,16.47,11.72,41.2-.72,57.35-15.94,20.65-44.71,23.93-67.92,35.28-12.92,6.32-24.49,15.44-37.86,20.74-28.08,11.13-59.67,3.89-88.46-5.11-28.79-9-58.45-19.82-88.26-15.41-27.83,4.14-52.92,21.32-80.99,23.93-13.03,1.21-27.9-1.11-35.86-12.36-8.56-12.06-20.5-17.24-32.09-26.14Z",opacity:.18}),R.jsxs("g",{children:[R.jsx("path",{className:"accent-color",d:"M50.45,250.49q7.56-8.41,16.13-18.49l36.49-42.7c8.07-9.25,11.27-13.45,15.59-20.04h34.52c-.99,9.27-1.44,18.58-1.35,27.9v54.68h4.88c5.59-.05,11.17-.5,16.7-1.35v30.6c-5.47-.67-10.97-1.01-16.48-1h-5.04v8.41c-.16,6.92.29,13.84,1.35,20.68h-34.69c.95-6.96,1.4-13.98,1.35-21.01v-8.24h-47.58c-10.93,0-15.59.17-21.86.67v-30.09ZM120.04,232.68c0-7.57.33-16.81,1.01-24.22-3.34,4.71-5.89,8.07-10.42,13.78l-24.55,29.93h33.96v-19.5Z"}),R.jsx("path",{d:"M50.45,250.49q7.56-8.41,16.13-18.49l36.49-42.7c8.07-9.25,11.27-13.45,15.59-20.04h34.52c-.99,9.27-1.44,18.58-1.35,27.9v54.68h4.88c5.59-.05,11.17-.5,16.7-1.35v30.6c-5.47-.67-10.97-1.01-16.48-1h-5.04v8.41c-.16,6.92.29,13.84,1.35,20.68h-34.69c.95-6.96,1.4-13.98,1.35-21.01v-8.24h-47.58c-10.93,0-15.59.17-21.86.67v-30.09ZM120.04,232.68c0-7.57.33-16.81,1.01-24.22-3.34,4.71-5.89,8.07-10.42,13.78l-24.55,29.93h33.96v-19.5Z",fill:"url(#linear-gradient)"}),R.jsx("path",{className:"accent-color",d:"M310.03,249.87q7.56-8.41,16.13-18.49l36.49-42.71c5.69-6.28,10.91-12.98,15.59-20.04h34.52c-.99,9.27-1.44,18.59-1.35,27.91v54.65h4.88c5.57-.06,11.13-.51,16.65-1.35v30.6c-5.47-.68-10.97-1.02-16.48-1.01h-5.04v8.41c-.16,6.92.29,13.84,1.35,20.68h-34.64c.95-6.93,1.4-13.92,1.35-20.92v-8.24h-47.58c-10.93,0-15.64.17-21.86.68v-30.15ZM379.63,232.05c0-7.57.33-16.81,1-24.21-3.34,4.7-5.88,8.06-10.42,13.78l-24.49,29.93h33.96l-.04-19.51Z"}),R.jsx("path",{d:"M310.03,249.87q7.56-8.41,16.13-18.49l36.49-42.71c5.69-6.28,10.91-12.98,15.59-20.04h34.52c-.99,9.27-1.44,18.59-1.35,27.91v54.65h4.88c5.57-.06,11.13-.51,16.65-1.35v30.6c-5.47-.68-10.97-1.02-16.48-1.01h-5.04v8.41c-.16,6.92.29,13.84,1.35,20.68h-34.64c.95-6.93,1.4-13.92,1.35-20.92v-8.24h-47.58c-10.93,0-15.64.17-21.86.68v-30.15ZM379.63,232.05c0-7.57.33-16.81,1-24.21-3.34,4.7-5.88,8.06-10.42,13.78l-24.49,29.93h33.96l-.04-19.51Z",fill:"url(#linear-gradient-2-404-page-not-found-9)"}),R.jsx("path",{className:"accent-color",d:"M201.24,295.3c-5.36-5.28-9.54-11.65-12.25-18.67-4.43-12.35-6.65-25.38-6.56-38.5,0-17.65,4.21-35.97,10.6-46.56,10.25-17.16,27.73-26.57,48.92-26.57,16.31,0,30.6,5.57,40.85,15.59,5.36,5.28,9.54,11.64,12.25,18.66,4.44,12.4,6.66,25.49,6.55,38.67,0,17.66-4.2,36.15-10.59,46.76-10.09,16.83-27.73,26.28-49.09,26.28-16.48,0-30.43-5.41-40.68-15.65ZM216.83,236.8c0,30.06,8.57,45.56,25.22,45.56s24.88-15.13,24.88-45.06-8.74-43.88-25.05-43.88c-15.75,0-25.01,15.97-25.01,43.38h-.04Z"}),R.jsx("path",{d:"M201.24,295.3c-5.36-5.28-9.54-11.65-12.25-18.67-4.43-12.35-6.65-25.38-6.56-38.5,0-17.65,4.21-35.97,10.6-46.56,10.25-17.16,27.73-26.57,48.92-26.57,16.31,0,30.6,5.57,40.85,15.59,5.36,5.28,9.54,11.64,12.25,18.66,4.44,12.4,6.66,25.49,6.55,38.67,0,17.66-4.2,36.15-10.59,46.76-10.09,16.83-27.73,26.28-49.09,26.28-16.48,0-30.43-5.41-40.68-15.65ZM216.83,236.8c0,30.06,8.57,45.56,25.22,45.56s24.88-15.13,24.88-45.06-8.74-43.88-25.05-43.88c-15.75,0-25.01,15.97-25.01,43.38h-.04Z",fill:"url(#linear-gradient-3-404-page-not-found-9)"}),R.jsx("path",{className:"accent-color",d:"M54.22,249.87q7.57-8.41,16.14-18.49l36.49-42.71c5.69-6.28,10.91-12.98,15.59-20.04h34.52c-.99,9.27-1.44,18.59-1.35,27.91v54.65h4.88c5.59-.06,11.17-.51,16.7-1.35v30.6c-5.47-.68-10.97-1.02-16.48-1.01h-5.04v8.41c-.16,6.92.29,13.84,1.35,20.68h-34.69c.95-6.93,1.4-13.92,1.35-20.92v-8.24h-47.59c-10.92,0-15.59.17-21.86.68v-30.15ZM123.83,232.05c0-7.57.33-16.81,1-24.21-3.34,4.7-5.88,8.06-10.42,13.78l-24.49,29.93h33.91v-19.51Z"}),R.jsx("path",{className:"accent-color",d:"M298.8,199.89c-2.71-7.03-6.89-13.39-12.25-18.67-10.26-10.02-24.55-15.58-40.85-15.58-21.19,0-38.67,9.41-48.92,26.55-6.39,10.6-10.6,28.93-10.6,46.57-.08,13.13,2.15,26.16,6.59,38.51,2.71,7.01,6.89,13.38,12.25,18.66,10.26,10.25,24.21,15.63,40.69,15.64,21.34,0,39-9.41,49.09-26.22,6.39-10.61,10.59-29.12,10.59-46.76.1-13.19-2.13-26.29-6.59-38.7ZM251.33,282.4c-.56.15-1.14.26-1.73.35-1.18.19-2.41.28-3.69.28-16.65,0-25.22-15.5-25.22-45.56,0-7.58.7-14.29,2.06-20.02.14-.58.28-1.15.43-1.71,3.72-13.95,11.53-21.68,22.56-21.64,16.3,0,25.05,15.13,25.05,43.89,0,26.43-6.56,41.32-19.46,44.41Z"}),R.jsx("path",{className:"accent-color",d:"M314.13,249.87q7.56-8.41,16.13-18.49l36.49-42.71c8.07-9.24,11.27-13.45,15.59-20.04h34.52c-.98,9.28-1.42,18.61-1.31,27.95v54.65h4.88c5.57-.06,11.13-.51,16.65-1.35v30.6c-5.47-.68-10.97-1.02-16.48-1.01h-5.04v8.41c-.16,6.92.29,13.84,1.35,20.68h-34.67c.95-6.94,1.4-13.95,1.35-20.95v-8.24h-47.58c-10.93,0-15.64.17-21.86.68v-30.15ZM383.73,232.05c0-7.57.33-16.81,1.01-24.21-3.34,4.7-5.89,8.06-10.42,13.78l-24.55,29.93h33.96v-19.51Z"})]}),R.jsxs("g",{children:[R.jsx("path",{className:"accent-color",d:"M263.76,247.47c-2.98,12.17-6.75,24.33-12.43,34.93-.56.15-1.14.26-1.73.35-1.18.19-2.41.28-3.69.28-16.65,0-25.22-15.5-25.22-45.56,0-7.58.7-14.29,2.06-20.02.14-.58.28-1.15.43-1.71,3.53-5.15,8.32-8.41,14.36-7.42,3.34.56,6.44,2.61,9.8,3.34,2.92.67,6.01.33,8.9,1.35,5.4,1.92,8.91,8.43,9.68,14.97.77,6.53-.6,13.14-2.16,19.49Z"}),R.jsx("path",{d:"M249.6,282.75c-1.18.19-2.41.28-3.69.28-16.65,0-25.22-15.5-25.22-45.56,0-7.58.7-14.29,2.06-20.02,1.21-.7,2.63-.93,4.01-.69,2.18.51-2.12,12.4,6.4,36.67,6.4,18.24,14.77,17.29,15.88,22.69.34,1.69.62,4.23.56,6.63Z",fill:"url(#linear-gradient-4-404-page-not-found-9)"}),R.jsx("path",{d:"M273.14,178.97c2.56,1.87,3.75,5.09,3.02,8.17,4.24.41,8.15,2.49,10.84,5.79,2.39,3.16,3.84,6.93,4.18,10.88.32,3.92.24,7.87-.26,11.78-.06,1.35-.33,2.68-.82,3.94-1.17,2.21-3.26,3.78-5.71,4.29-2.42.48-4.9.6-7.35.35l-5.85-.31c-.19,0-.38-.04-.56-.12-.24-.2-.38-.49-.39-.8-.4-2.39-1.01-3.44-1.45-5.83-1.08-5.05-3.21-9.83-6.23-14.02-.54-.63-.92-1.37-1.11-2.17-.07-1.11.18-2.21.71-3.18.79-1.91,1.45-3.88,1.96-5.89.47-2.4,1.09-4.77,1.84-7.1.77-2.35,2.34-4.36,4.45-5.66",fill:"url(#linear-gradient-5-404-page-not-found-9)"}),R.jsx("path",{d:"M270.41,248.9s21.4,1.89,31.17-11.13c3.9-5.17-4.79-29.5-4.79-29.5l-9.88,17.68-15.59,3.54-.92,19.42Z",fill:"url(#linear-gradient-6-404-page-not-found-9)"}),R.jsx("path",{className:"skin-color",d:"M220.19,210.82c-.58.21-1.14.47-1.67.77-.5.25-.94.62-1.29,1.06-.35.46-.43,1.06-.22,1.59.46.71,1.32,1.07,2.15.9,1.37-.13,2.64-.81,4.01-1.05s2.66-1.18,1.69-2.64-3.3-1.15-4.67-.63Z"}),R.jsx("path",{className:"skin-color",d:"M224.56,214.09c-2-.52-4.1.36-5.9,1.37-.43.21-.8.5-1.11.86-.48.38-.56,1.08-.18,1.56.23.29.58.44.95.42.41.04.82.01,1.22-.08l2.77-.48c.64-.08,1.27-.26,1.86-.53,1.26-.73,2.33-2.64.39-3.12Z"}),R.jsx("path",{className:"skin-color",d:"M220.69,217.78c-.57.22-1.13.48-1.67.78-.51.27-.95.65-1.29,1.11-.34.45-.42,1.05-.22,1.58.46.71,1.32,1.07,2.15.9,1.37-.13,2.64-.81,4.01-1.05s2.66-1.17,1.69-2.64c-.97-1.47-3.32-1.2-4.67-.69Z"}),R.jsx("path",{className:"skin-color",d:"M225.01,220.58c-2.06-.17-3.96,1.11-5.57,2.38-.39.29-.72.64-.97,1.06-.4.47-.34,1.17.12,1.57.27.23.64.32.99.23.41-.03.81-.13,1.18-.29l2.64-.97c.63-.19,1.22-.48,1.75-.86,1.1-.91,1.85-2.94-.14-3.13Z"}),R.jsx("path",{className:"skin-color",d:"M284.02,189.15c-3.25-1.55-6.82-2.29-10.41-2.17-.61-.03-1.21.07-1.78.29-.57.25-.93.81-.94,1.43.11.53.41,1,.85,1.31,1.31,1.2,2.79,2.2,4.39,2.98.48.19.92.47,1.29.84.37.38.45.95.19,1.41-.37.51-1.21.53-1.49,1.11-.37.72.56,1.44,1.36,1.57.85.15,1.73.07,2.54-.23.57-.29,1.19-.47,1.83-.51.63.13,1.22.4,1.74.79,1.76,1,7.23,1.04,6.88-2.02-.32-2.83-4.19-5.63-6.44-6.8Z"}),R.jsx("path",{className:"accent-color",d:"M257.12,213.7s24.62,10.14,27.43,9.62c2.82-.52-1.74-24.82-1.74-24.82l8.39-3.84s18.93,37.52,3.43,42.98c-9.58,3.21-19.97,3.1-29.48-.31l-8.04-23.63Z"}),R.jsx("path",{className:"skin-color",d:"M270.22,199.62c-.09,2.18-.6,4.32-1.51,6.3-1.81,2.99-4.93,4.96-8.41,5.31-1.25.08-2.49.26-3.72.52-1.15.24-2.11,1.03-2.55,2.13-.99,2.4-2.02,4.84-5.21,4.03-.3-.07-.59-.17-.87-.3-1-.47-1.91-1.13-2.66-1.95-.94-.95-1.75-2.01-2.43-3.16-.35-.53-.58-1.13-.69-1.76-.07-.77.03-1.55.27-2.28,1.11-4.45,1.29-9.5,2.87-13.84,1.62-4.4,4.71-8.11,8.75-10.49,4-2.33,9.55-2.36,12.95.81,1.86,1.86,3.03,4.29,3.34,6.9.27,2.59.22,5.2-.13,7.77Z"}),R.jsx("path",{className:"hair-color",d:"M243.14,194.05c.21-2.09.2-4.22.61-6.28.31-2.1,1.37-4.03,2.97-5.42.4-.32.85-.58,1.34-.76.43-.16.89-.24,1.34-.37,1.31-.47,2.56-1.09,3.72-1.85,1.76-1.06,3.69-1.81,5.7-2.23,1.36-.21,2.73-.3,4.11-.29,2.52-.04,5.06-.07,7.6-.07.6-.04,1.2.05,1.75.29.61.37,1.05.96,1.24,1.65.48,1.54.48,3.18,0,4.72-.49,1.52-1.15,2.98-1.95,4.36-.39.87-.94,1.66-1.63,2.33-.59-1.02-1.11-2.08-1.65-3.15-1.7,1.77-4.39,2.23-6.84,2.04s-4.85-.82-7.3-.86c-1.18-.12-2.35.22-3.27.97-.55.64-.93,1.4-1.11,2.23-.52,1.83-.94,3.69-1.26,5.57-.29-.55-1.46-1.97-2.07-1.95-.36.03-.68.22-.9.5-1.01,1.11-.51,5.2.42,6.38.19.18.33.4.41.65.04.33-.06.66-.27.92-.52.62-1.31.94-2.12.87-.98,0-1.17-1.87-1.27-2.56-.41-2.57.18-5.17.42-7.69Z"}),R.jsx("path",{d:"M247.05,198.75c-.14-.29-.2-.61-.18-.92.02-.32-.01-.64-.1-.95-.1-.28-.3-.52-.57-.66-.08-.02-.16-.02-.23,0-.13.06-.23.17-.26.31-.39,1.22-.35,2.54.12,3.73.13.43.44.79.86.96.37.07.75-.04,1.01-.31.36-.38.47-.93.29-1.41-.19-.45-.71-.35-.95-.75Z",fill:"url(#linear-gradient-7-404-page-not-found-9)"}),R.jsx("path",{d:"M256.58,211.73c-1.15.24-2.11,1.03-2.55,2.13-.99,2.4-2.02,4.84-5.21,4.03-.3-.07-.59-.17-.87-.3-.27-.23-.49-.52-.65-.84-.29-.76-.26-1.6.09-2.34.79-1.91,2.63-3.18,4.7-3.23.85.04,1.7.15,2.53.33.51.07,1.11,0,1.58.06.14.02.26.08.38.16Z",fill:"url(#linear-gradient-8-404-page-not-found-9)"})]})]}),R.jsx("h2",{className:"typography-title-lg",children:t("routes.not-found")}),R.jsx("p",{children:t("routes.not-found-description")}),R.jsx(Qr,{to:vt,className:"button-filled",children:t("routes.back-home")})]})},Gf=({Element:t})=>localStorage.getItem(qr)?t:R.jsx(SE,{to:`${vt}/login`}),e4=dA([{path:vt,element:R.jsx(cN,{}),children:[{id:"Home",index:!0,element:R.jsx(dN,{})},{id:"ProductDetails",path:"product/:id",element:R.jsx(hN,{})},{id:"SeeAll",path:"see-all/:category",element:R.jsx(fN,{})},{id:"SearchProducts",path:"search-products/:search",element:R.jsx(pN,{})},{id:"Login",path:"login",element:localStorage.getItem(qr)?R.jsx(SE,{to:`${vt}/admin-menu`}):R.jsx(mN,{})},{id:"AdminMenu",path:"admin-menu",element:R.jsx(Gf,{Element:R.jsx(gN,{})})},{id:"AddProduct",path:"add-product",element:R.jsx(Gf,{Element:R.jsx(yN,{})})},{id:"EditProduct",path:"edit-product/:id",element:R.jsx(Gf,{Element:R.jsx(vN,{})})},{path:"*",element:R.jsx(_N,{})}]}]),wN=()=>R.jsx(wA,{router:e4});Wf.createRoot(document.getElementById("root")).render(R.jsx(je.StrictMode,{children:R.jsx(wN,{})}));
